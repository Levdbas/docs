<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <link rel="stylesheet" href="/docs/css/styles.css">
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,700,700i" rel="stylesheet">
</head>


<body>

<header class="header">
    <a class="logo-link" href="/docs">
        <div id="logo">
            <img src="/docs/images/timberlogo.svg" alt="Timber" style="width:105px;height:30px;border:0">
        </div>
    </a>
    <nav class="nav nav--top" id="nav-top">
        <ul>
            <li>
                <a class="nav__link" href="http://upstatement.com/timber/" target="_blank" rel="noreferrer noopener">Timber Homepage</a>
            </li>
            <li>
                <a class="nav__link" href="http://twig.sensiolabs.org/doc/templates.html"
                   target="_blank" rel="noreferrer noopener">Twig Documentation</a>
            </li>
            <li><a class="nav__link" href="http://code.tutsplus.com/series/kick-start-wordpress-development-with-twig--cms-974"
                   target="_blank" rel="noreferrer noopener">Getting Started Tutorials</a>
            </li>
            <li>
                <a class="nav__link" href="https://github.com/timber/timber" target="_blank" rel="noreferrer noopener">
                    <img src="/images/Github.png" alt="Star on Github" style="width:29px;height:29px;border:0">
                </a>
            </li>
        </ul>
    </nav>
</header>

<aside class="sidebar">
    <div class="search">
        <input type="text" class="search" id="input-search" placeholder="Search">
    </div>

    <ul class="search-results"></ul>

    <nav id="nav nav--main">
        <ul class="nav__items nav__items--level-0">
        
        
            <li class="nav__item nav__item--level-0 nav__item--current-ancestor"><a class="nav__link nav__link--level-0" href="/docs/getting-started/">Getting Started</a>
            
                <ul class="nav__items nav__items--level-1">
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/getting-started/setup/">Setup</a></li>
                
                    <li class="nav__item nav__item--level-1 nav__item--current"><a class="nav__link nav__link--level-1" href="/docs/getting-started/themeing/">Themeing</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/getting-started/twig-tools/">Twig Tools</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/getting-started/video-tutorials/">Video Tutorials</a></li>
                
                </ul>
            
            </li>
        
            <li class="nav__item nav__item--level-0"><a class="nav__link nav__link--level-0" href="/docs/guides/">Guides</a>
            
                <ul class="nav__items nav__items--level-1">
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/acf-cookbook/">ACF Cookbook</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/cheatsheet/">Cheatsheet</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/custom-page-templates/">Custom Page Templates</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/debugging/">Debugging</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/escapers/">Escapers</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/extending-timber/">Extending Timber</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/filters/">Filters</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/functions/">Functions</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/cookbook-images/">Image Cookbook</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/internationalization/">Internationalization</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/pagination/">Pagination</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/performance/">Performance</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/routing/">Routing</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/sidebars/">Sidebars</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/template-locations/">Template Locations</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/testing/">Testing</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/cookbook-text/">Text Cookbook</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/cookbook-twig/">Twig Cookbook</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/woocommerce/">WooCommerce</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/wp-integration/">WordPress Integration</a></li>
                
                </ul>
            
            </li>
        
            <li class="nav__item nav__item--level-0"><a class="nav__link nav__link--level-0" href="/docs/reference/">Reference</a>
            
                <ul class="nav__items nav__items--level-1">
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-archives/">Timber\Archives</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-comment/">Timber\Comment</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-helper/">Timber\Helper</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-image/">Timber\Image</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-imagehelper/">Timber\ImageHelper</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-menu/">Timber\Menu</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-menuitem/">Timber\MenuItem</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-pagination/">Timber\Pagination</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-post/">Timber\Post</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-postpreview/">Timber\PostPreview</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-postquery/">Timber\PostQuery</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-site/">Timber\Site</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-term/">Timber\Term</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-texthelper/">Timber\TextHelper</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-theme/">Timber\Theme</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber/">Timber\Timber</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-urlhelper/">Timber\URLHelper</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-user/">Timber\User</a></li>
                
                </ul>
            
            </li>
        
            <li class="nav__item nav__item--level-0"><a class="nav__link nav__link--level-0" href="/docs/upgrade-guides/">Upgrade Guides</a>
            
                <ul class="nav__items nav__items--level-1">
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/upgrade-guides/1.0/">Upgrade to 1.0</a></li>
                
                </ul>
            
            </li>
        
        </ul>
    </nav>
</aside>


<main>
    
	<article>
		<h1>Themeing</h1>

		<aside class="toc">
			<h2 class="heading-4 toc__title">Contents of this page</h2>
			<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#your-first-timber-project">Your first Timber project</a>
<ul>
<li><a href="#let-s-start-with-your-single-post">Let&rsquo;s start with your single post</a>
<ul>
<li><a href="#this-is-the-fun-part">This is the fun part.</a></li>
</ul></li>
<li><a href="#blocks">Blocks</a>
<ul>
<li>
<ul>
<li><a href="#nesting-blocks-multiple-inheritance">Nesting Blocks, Multiple Inheritance</a></li>
</ul></li>
</ul></li>
<li><a href="#loop-index-page">Loop / Index page</a>
<ul>
<li><a href="#get-the-starter">Get the starter</a></li>
<li><a href="#grab-your-posts">Grab your posts</a>
<ul>
<li><a href="#timber-get-posts-usage">Timber::get_posts() usage</a>
<ul>
<li><a href="#use-a-wp-query-http-codex-wordpress-org-class-reference-wp-query-array">Use a <a href="http://codex.wordpress.org/Class_Reference/WP_Query">WP_Query</a> array</a></li>
</ul></li>
<li><a href="#use-a-wp-query-http-codex-wordpress-org-class-reference-wp-query-string">Use a <a href="http://codex.wordpress.org/Class_Reference/WP_Query">WP_Query</a> string</a></li>
<li><a href="#use-post-id-numbers">Use Post ID numbers</a></li>
</ul></li>
<li><a href="#render">Render</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</nav>
		</aside>

		<div class="content-container">
			<div class="content">
				

<h2 id="your-first-timber-project">Your first Timber project</h2>

<h3 id="let-s-start-with-your-single-post">Let&rsquo;s start with your single post</h3>

<p>Find this file:</p>

<pre><code class="language-html">	wp-content/themes/{timber-starter-theme}/views/single.twig
</code></pre>

<p>Brilliant! Open it up.</p>

<pre><code class="language-twig">{% extends &quot;base.twig&quot; %}
{% block content %}
	&lt;div class=&quot;content-wrapper&quot;&gt;
		&lt;article class=&quot;post-type-{{ post.post_type }}&quot; id=&quot;post-{{ post.ID }}&quot;&gt;
			&lt;section class=&quot;article-content&quot;&gt;
				&lt;h1 class=&quot;article-h1&quot;&gt;{{ post.title }}&lt;/h1&gt;
				&lt;h2 class=&quot;article-h2&quot;&gt;{{ post.subtitle }}&lt;/h2&gt;
				&lt;p class=&quot;blog-author&quot;&gt;&lt;span&gt;By&lt;/span&gt; {{ post.author.name }} &lt;span&gt;&amp;bull;&lt;/span&gt; {{ post.post_date|date }}&lt;/p&gt;
				{{ post.content }}
			&lt;/section&gt;
		&lt;/article&gt;
	&lt;/div&gt; &lt;!-- /content-wrapper --&gt;
{% endblock %}
</code></pre>

<h4 id="this-is-the-fun-part">This is the fun part.</h4>

<pre><code class="language-twig">&lt;h1 class=&quot;article-h1&quot;&gt;{{ post.title }}&lt;/h1&gt;
</code></pre>

<p>This is now how we now call stuff from the WordPress API. Instead of this familiar face:</p>

<pre><code class="language-html">&lt;h1 class=&quot;article-h1&quot;&gt;&lt;?php the_title(); ?&gt;&lt;/h1&gt;
</code></pre>

<p>This is how WordPress wants you to interact with its API. Which sucks. Because soon you get things like:</p>

<pre><code class="language-html">&lt;h1 class=&quot;article-h1&quot;&gt;&lt;a href=&quot;&lt;?php get_permalink(); ?&gt;&quot;&gt;&lt;?php the_title(); ?&gt;&lt;/a&gt;&lt;/h1&gt;
</code></pre>

<p>Okay, not <em>too</em> terrible, but doesn&rsquo;t this (Timber) way look so much nicer:</p>

<pre><code class="language-twig">&lt;h1 class=&quot;article-h1&quot;&gt;&lt;a href=&quot;{{ post.link }}&quot;&gt;{{ post.title }}&lt;/a&gt;&lt;/h1&gt;
</code></pre>

<p>It gets better. Let&rsquo;s explain some other concepts.</p>

<pre><code class="language-twig">{% extends &quot;base.twig&quot; %}
</code></pre>

<p>This means that <code>single.twig</code> is using <code>base.twig</code> as its parent template. That&rsquo;s why you don&rsquo;t see any <code>&lt;head&gt;</code>, <code>&lt;header&gt;</code>, or <code>&lt;footer&gt;</code> tags, those site-wide (usually) things are all controlled in <code>base.twig</code>. You can create any number of base files to extend from (the &ldquo;base&rdquo; naming convention is recommended, but not requrired).</p>

<p>What if you want modify <code>&lt;head&gt;</code>, etc? Read on to learn all about blocks.</p>

<h3 id="blocks">Blocks</h3>

<p>Blocks are the single most important and powerful concept in managing your templates. The <a href="http://twig.sensiolabs.org/doc/templates.html#template-inheritance">official Twig Documentation</a> has more details. Let&rsquo;s cover the basics.</p>

<p>In <code>single.twig</code> you see opening and closing block declarations that surround the main page contents.</p>

<pre><code class="language-twig">{% block content %} {# other stuff here ... #} {% endblock %}
</code></pre>

<p>If you were to peek into <strong>base.twig</strong> you would see a matching set of <code>{% block content %} / {% endblock %}</code> tags. <strong>single.twig</strong> is replacing the content of base&rsquo;s <code>{% block content %}</code> with its own.</p>

<h5 id="nesting-blocks-multiple-inheritance">Nesting Blocks, Multiple Inheritance</h5>

<p>This is when things get really cool. Whereas most people use PHP includes in a linear fashion, you can create infinite levels of nested blocks to particularly control your page templates. For example, let&rsquo;s say you occasionally want to replace the title/headline on your <code>single.twig</code> template with a custom image or typography.</p>

<p>For this demo let&rsquo;s assume that the name of the page is &ldquo;All about Jared&rdquo; (making its slug <code>all-about-jared</code>). First, I&rsquo;m going to surround the part of the template I want to control with block declarations:</p>

<pre><code class="language-twig">{# single.twig #}
{% extends &quot;base.twig&quot; %}
{% block content %}
	&lt;div class=&quot;content-wrapper&quot;&gt;
		&lt;article class=&quot;post-type-{{ post.post_type }}&quot; id=&quot;post-{{ post.ID }}&quot;&gt;
			&lt;section class=&quot;article-content&quot;&gt;
				{% block headline %}
					&lt;h1 class=&quot;article-h1&quot;&gt;{{ post.title }}&lt;/h1&gt;
					&lt;h2 class=&quot;article-h2&quot;&gt;{{ post.subtitle }}&lt;/h2&gt;
				{% endblock %}
				&lt;p class=&quot;blog-author&quot;&gt;&lt;span&gt;By&lt;/span&gt; {{ post.author.name }} &lt;span&gt;&amp;bull;&lt;/span&gt; {{ post.post_date|date }}&lt;/p&gt;
				{{ post.content }}
			&lt;/section&gt;
		&lt;/article&gt;
	&lt;/div&gt; &lt;!-- /content-wrapper --&gt;
{% endblock %}
</code></pre>

<p>Compared to the earlier example of this page, we now have the <code>{% block headline %}</code> bit surrounding the <code>&lt;h1&gt;</code> and <code>&lt;h2&gt;</code>.</p>

<p>To inject my custom bit of markup, I&rsquo;m going to create a file called <code>single-all-about-jared.twig</code> in the <code>views</code> directory. The logic for which template should be selected is controlled in <code>single.php</code> but generally follows WordPress conventions on Template Hierarchy. Inside that file, all I need is:</p>

<pre><code class="language-twig">{# single-all-about-jared.twig #}
{% extends &quot;single.twig&quot; %}
{% block headline %}
	&lt;h1&gt;&lt;img src=&quot;/wp-content/uploads/2014/05/jareds-face.jpg&quot; alt=&quot;Jared's Mug&quot;/&gt;&lt;/h1&gt;
{% endblock %}
</code></pre>

<p>So two big concepts going on here:</p>

<ol>
<li><strong>Multiple Inheritance</strong> I&rsquo;m extending <code>{% single.twig %}</code>, which itself extends <code>{% base.twig %}</code>. Thus we stay true to DRY and don&rsquo;t have very similar code between my two templates hanging around.</li>
<li><strong>Nested Blocks</strong> <code>{% block headline %}</code> is located inside <code>{% block content %}</code>. So while I&rsquo;m replacing the headline, I get to keep all the other markup and variables found in the parent template.</li>
</ol>

<p>What if you want to <strong>add</strong> to the block as opposed to replace? No prob, just call <code>{{ parent() }}</code> where the parent&rsquo;s content should go.</p>

<h3 id="loop-index-page">Loop / Index page</h3>

<p>Let&rsquo;s crack open <strong>index.php</strong> and see what&rsquo;s inside:</p>

<pre><code class="language-php">&lt;?php
$context = Timber::get_context();
$context['posts'] = Timber::get_posts();
Timber::render('index.twig', $context);
</code></pre>

<p>This is where we are going to handle the logic that powers our index file. Let&rsquo;s go step-by-step.</p>

<h4 id="get-the-starter">Get the starter</h4>

<pre><code class="language-php">&lt;?php
$context = Timber::get_context();
</code></pre>

<p>This is going to return an object with a lot of the common things we need across the site. Things like the site name, the description or the navigation menu you&rsquo;ll want to start with each time (even if you over-write them later). You can do a <code>print_r( $context );</code> to see what’s inside or open-up <a href="https://github.com/timber/timber/blob/master/lib/Timber.php"><strong>Timber.php</strong></a> to inspect for yourself.</p>

<h4 id="grab-your-posts">Grab your posts</h4>

<pre><code class="language-php">&lt;?php
$context['posts'] = Timber::get_posts();
</code></pre>

<p>We&rsquo;re now going to grab the posts that are inside the loop and stick them inside our data object under the <strong>posts</strong> key.</p>

<h5 id="timber-get-posts-usage">Timber::get_posts() usage</h5>

<h6 id="use-a-wp-query-http-codex-wordpress-org-class-reference-wp-query-array">Use a <a href="http://codex.wordpress.org/Class_Reference/WP_Query">WP_Query</a> array</h6>

<pre><code class="language-php">	&lt;?php
	$args = array(
		'post_type' =&gt; 'post',
		'tax_query' =&gt; array(
			'relation' =&gt; 'AND',
			array(
				'taxonomy' =&gt; 'movie_genre',
				'field' =&gt; 'slug',
				'terms' =&gt; array( 'action', 'comedy' )
			),
			array(
				'taxonomy' =&gt; 'actor',
				'field' =&gt; 'id',
				'terms' =&gt; array( 103, 115, 206 ),
				'operator' =&gt; 'NOT IN'
			)
		)
	);
	$context['posts'] = Timber::get_posts($args);
</code></pre>

<h5 id="use-a-wp-query-http-codex-wordpress-org-class-reference-wp-query-string">Use a <a href="http://codex.wordpress.org/Class_Reference/WP_Query">WP_Query</a> string</h5>

<pre><code class="language-php">	&lt;?php
	$args = 'post_type=movies&amp;numberposts=8&amp;orderby=rand';
	$context['posts'] = Timber::get_posts($args);
</code></pre>

<h5 id="use-post-id-numbers">Use Post ID numbers</h5>

<pre><code class="language-php">	&lt;?php
	$ids = array(14, 123, 234, 421, 811, 6);
	$context['posts'] = Timber::get_posts($ids);
</code></pre>

<h4 id="render">Render</h4>

<pre><code class="language-php">&lt;?php
Timber::render('index.twig', $context);
</code></pre>

<p>We&rsquo;re now telling Twig to find <strong>index.twig</strong> and send it our data object.</p>

<p>Timber will look first in the child theme and then falls back to the parent theme (same as WordPress logic). The official load order is:</p>

<ol>
<li>User-defined locations</li>
<li>Directory of calling PHP script (but not theme)</li>
<li>Child theme</li>
<li>Parent theme</li>
<li>Directory of calling PHP script (including the theme)</li>
</ol>

<p>Item 2 is inserted above others so that if you&rsquo;re using Timber in a plugin it will use the twig files in the plugin&rsquo;s directory.</p>

			</div>
		</div>
	</article>

</main>

<footer class="footer">My footer</footer>


<script src="/docs/js/highlight.pack.js" defer></script>
<script src="/docs/js/scripts.js" defer></script>

</body>
</html>
