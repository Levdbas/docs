<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <link rel="stylesheet" href="http://timber.github.io/css/styles.css">
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,700,700i" rel="stylesheet">
</head>


<body>

<header class="header">
    <a class="logo-link" href="/">
        <div id="logo">
            <img src="/images/timberlogo.svg" alt="Timber" style="width:105px;height:30px;border:0">
        </div>
    </a>
    <nav class="nav nav--top" id="nav-top">
        <ul>
            <li>
                <a class="nav__link" href="http://upstatement.com/timber/" target="_blank" rel="noreferrer noopener">Timber Homepage</a>
            </li>
            <li>
                <a class="nav__link" href="http://twig.sensiolabs.org/doc/templates.html"
                   target="_blank" rel="noreferrer noopener">Twig Documentation</a>
            </li>
            <li><a class="nav__link" href="http://code.tutsplus.com/series/kick-start-wordpress-development-with-twig--cms-974"
                   target="_blank" rel="noreferrer noopener">Getting Started Tutorials</a>
            </li>
            <li>
                <a class="nav__link" href="https://github.com/timber/timber" target="_blank" rel="noreferrer noopener">
                    <img src="/images/Github.png" alt="Star on Github" style="width:29px;height:29px;border:0">
                </a>
            </li>
        </ul>
    </nav>
</header>

<aside class="sidebar">
    <div class="search">
        <input type="text" class="search" id="input-search" placeholder="Search">
    </div>

    <ul class="search-results"></ul>

    <nav id="nav nav--main">
        <ul class="nav__items nav__items--level-0">
        
        
            <li class="nav__item nav__item--level-0"><a class="nav__link nav__link--level-0" href="http://timber.github.io/getting-started/">Getting Started</a>
            
                <ul class="nav__items nav__items--level-1">
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/getting-started/setup/">Setup</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/getting-started/themeing/">Themeing</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/getting-started/twig-tools/">Twig Tools</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/getting-started/video-tutorials/">Video Tutorials</a></li>
                
                </ul>
            
            </li>
        
            <li class="nav__item nav__item--level-0 nav__item--current-ancestor"><a class="nav__link nav__link--level-0" href="http://timber.github.io/guides/">Guides</a>
            
                <ul class="nav__items nav__items--level-1">
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/guides/acf-cookbook/">ACF Cookbook</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/guides/cheatsheet/">Cheatsheet</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/guides/custom-page-templates/">Custom Page Templates</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/guides/debugging/">Debugging</a></li>
                
                    <li class="nav__item nav__item--level-1 nav__item--current"><a class="nav__link nav__link--level-1" href="http://timber.github.io/guides/escapers/">Escapers</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/guides/extending-timber/">Extending Timber</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/guides/filters/">Filters</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/guides/functions/">Functions</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/guides/cookbook-images/">Image Cookbook</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/guides/internationalization/">Internationalization</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/guides/pagination/">Pagination</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/guides/performance/">Performance</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/guides/routing/">Routing</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/guides/sidebars/">Sidebars</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/guides/template-locations/">Template Locations</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/guides/testing/">Testing</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/guides/cookbook-text/">Text Cookbook</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/guides/cookbook-twig/">Twig Cookbook</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/guides/woocommerce/">WooCommerce</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/guides/wp-integration/">WordPress Integration</a></li>
                
                </ul>
            
            </li>
        
            <li class="nav__item nav__item--level-0"><a class="nav__link nav__link--level-0" href="http://timber.github.io/reference/">Reference</a>
            
                <ul class="nav__items nav__items--level-1">
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/reference/timber-archives/">Timber\Archives</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/reference/timber-comment/">Timber\Comment</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/reference/timber-helper/">Timber\Helper</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/reference/timber-image/">Timber\Image</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/reference/timber-imagehelper/">Timber\ImageHelper</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/reference/timber-menu/">Timber\Menu</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/reference/timber-menuitem/">Timber\MenuItem</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/reference/timber-pagination/">Timber\Pagination</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/reference/timber-post/">Timber\Post</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/reference/timber-postpreview/">Timber\PostPreview</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/reference/timber-postquery/">Timber\PostQuery</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/reference/timber-site/">Timber\Site</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/reference/timber-term/">Timber\Term</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/reference/timber-texthelper/">Timber\TextHelper</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/reference/timber-theme/">Timber\Theme</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/reference/timber/">Timber\Timber</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/reference/timber-urlhelper/">Timber\URLHelper</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/reference/timber-user/">Timber\User</a></li>
                
                </ul>
            
            </li>
        
            <li class="nav__item nav__item--level-0"><a class="nav__link nav__link--level-0" href="http://timber.github.io/upgrade-guides/">Upgrade Guides</a>
            
                <ul class="nav__items nav__items--level-1">
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="http://timber.github.io/upgrade-guides/1.0/">Upgrade to 1.0</a></li>
                
                </ul>
            
            </li>
        
        </ul>
    </nav>
</aside>


<main>
    
	<article>
		<h1>Escapers</h1>

		<aside class="toc">
			<h2 class="heading-4 toc__title">Contents of this page</h2>
			<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#general-escapers">General Escapers</a>
<ul>
<li><a href="#wp-kses-post">wp_kses_post</a>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#twig">Twig:</a></li>
<li><a href="#output">Output:</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#esc-url">esc_url</a>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#twig-1">Twig:</a></li>
<li><a href="#output-1">Output</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#esc-html">esc_html</a>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#twig-2">Twig:</a></li>
<li><a href="#output-2">Output</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#esc-js">esc_js</a>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#twig-3">Twig:</a></li>
<li><a href="#output-3">Output</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</nav>
		</aside>

		<div class="content-container">
			<div class="content">
				

<h2 id="general-escapers">General Escapers</h2>

<p>Twig offers a variety of <a href="http://twig.sensiolabs.org/doc/filters/escape.html">escapers</a> out of the box. These are intended to escape a string for safe insertion into the final output and there are multiple functions to conform to the strategy dependant on the context. In addition, Timber has added some valuable custom escapers for your WP theme. To use the escaper (see documentation link above) you use pipe your content through a function <code>e</code> if you want to use a custom escaper you would supply an argument to the function, e.g. <code>e('wp_kses_post')</code></p>

<p>This all follows the WordPress (and greater development philosophy) to:</p>

<ol>
<li>Never trust user input.</li>
<li>Escape as late as possible.</li>
<li>Escape everything from untrusted sources (like databases and users), third-parties (like Twitter), etc.</li>
<li>Never assume anything.</li>
<li>Never trust user input.</li>
<li>Sanitation is okay, but validation/rejection is better.</li>
<li>Never trust user input.</li>
</ol>

<p><a href="https://vip.wordpress.com/documentation/vip/best-practices/security/validating-sanitizing-escaping/">Relevant Documentation</a></p>

<h3 id="wp-kses-post">wp_kses_post</h3>

<p>Background on KSES. KSES is a recursive acronym for <code>KSES Kills Evil Scripts</code>. It&rsquo;s goal is to ensure only  &ldquo;allowed&rdquo; HTML element names, attribute names and attribute values plus only sane HTML entities in the string. Allowed is based on a configuration.</p>

<p>This uses ths internal WordPress method that sanitize content for allowed HTML tags for post content. The configuration used can be found by running <code>wp_kses_allowed_html( 'post' );</code> <a href="https://codex.wordpress.org/Function_Reference/wp_kses_post">WordPress Documentation</a></p>

<h6 id="twig">Twig:</h6>

<p><code>&lt;p class=&quot;intro&quot;&gt;{{post.post_content|e('wp_kses_post')}}&lt;/p&gt;</code></p>

<p>In this example, <code>post.post_content</code> is:</p>

<p><code>&lt;div foo=&quot;bar&quot; src=&quot;bum&quot;&gt;Foo&lt;/div&gt;&lt;script&gt;DoEvilThing();&lt;/script&gt;</code></p>

<h6 id="output">Output:</h6>

<p><code>&lt;div&gt;Foo&lt;/div&gt;DoEvilThing();</code></p>

<hr />

<h3 id="esc-url">esc_url</h3>

<p>Uses WordPress&rsquo; internal <code>esc_url</code> function on text. This should be used to sanitize URLs. <a href="https://codex.wordpress.org/Function_Reference/esc_url">WordPress Documentation</a></p>

<h6 id="twig-1">Twig:</h6>

<p><code>&lt;a href=&quot;{{ post.get_field('custom_link')|e('esc_url'); }}&quot;&gt;&lt;/a&gt;</code></p>

<h6 id="output-1">Output</h6>

<p><code>&lt;a href=&quot;http://google.com&quot;&gt;&lt;/a&gt;</code></p>

<hr />

<h3 id="esc-html">esc_html</h3>

<p>Escaping for HTML blocks. It converts any potentially conflicting HTML entities to their encoded equivalent to prevent them from being rendered as markup by the browser, e.g. converts &ldquo;&lt;&rdquo; to &ldquo;&lt;&rdquo; and double quotes &ldquo; to &ldquo;$quot;&rdquo;</p>

<p>This is for plain old text. If your content has HTML markup you should not use <code>esc_html</code> which will render the HTML as it looks in your code editor &ndash; to preserve the HTML you will want to use <code>wp_kses_post</code></p>

<h6 id="twig-2">Twig:</h6>

<p><code>&lt;div class=&quot;equation&quot;&gt;{{ post.get_field('equation')|e('esc_html') }}&lt;/div&gt;</code></p>

<h6 id="output-2">Output</h6>

<p><code>&lt;div class=&quot;equation&quot;&gt;is x &amp;lt; y?&lt;/div&gt;</code></p>

<hr />

<h3 id="esc-js">esc_js</h3>

<p>Escapes text strings for echoing in JS. It is intended to be used for inline JS (in a tag attribute, for example onclick=”…”). Note that the strings have to be in single quotes. The filter ‘js_escape’ is also applied.</p>

<h6 id="twig-3">Twig:</h6>

<p><code>&lt;script&gt;var bar = '{{ post.get_field('name') }}';&lt;/script&gt;</code></p>

<h6 id="output-3">Output</h6>

<p><code>&lt;script&gt;var bar = 'Gabrielle';&lt;/script&gt;</code></p>

			</div>
		</div>
	</article>

</main>

<footer class="footer">My footer</footer>


<script src="http://timber.github.io/js/highlight.pack.js" defer></script>
<script src="http://timber.github.io/js/scripts.js" defer></script>

</body>
</html>
