<!doctype html><html lang="en" data-theme="dark"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-126807198-1"></script><script>window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-126807198-1');</script><title>Escapers – Timber Documentation</title><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="docsearch:version" content="v1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3"><link rel="stylesheet" href="/docs/build/css/styles.css?id=9ab551bbd9eed8406af6bd8aef415d42"><link rel="stylesheet" href="/docs/build/css/mobile.css?id=eb03f5e9c806ca82b2fc8d728401461a" media="screen and (max-width: 979px)"><script src="/docs/build/js/app.js?id=4594e1490acc2ce9d471fb2243cbcfce" defer="defer"></script><link rel="icon" href="/docs/build/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon-precomposed" sizes="57x57" href="/docs/build/favicons/apple-touch-icon-57x57.png"><link rel="apple-touch-icon-precomposed" sizes="114x114" href="/docs/build/favicons/apple-touch-icon-114x114.png"><link rel="apple-touch-icon-precomposed" sizes="72x72" href="/docs/build/favicons/apple-touch-icon-72x72.png"><link rel="apple-touch-icon-precomposed" sizes="144x144" href="/docs/build/favicons/apple-touch-icon-144x144.png"><link rel="apple-touch-icon-precomposed" sizes="60x60" href="/docs/build/favicons/apple-touch-icon-60x60.png"><link rel="apple-touch-icon-precomposed" sizes="120x120" href="/docs/build/favicons/apple-touch-icon-120x120.png"><link rel="apple-touch-icon-precomposed" sizes="76x76" href="favicons/apple-touch-icon-76x76.png"><link rel="apple-touch-icon-precomposed" sizes="152x152" href="favicons/apple-touch-icon-152x152.png"><link rel="icon" type="image/png" href="/docs/build/favicons/favicon-196x196.png" sizes="196x196"><link rel="icon" type="image/png" href="/docs/build/favicons/favicon-96x96.png" sizes="96x96"><link rel="icon" type="image/png" href="/docs/build/favicons/favicon-32x32.png" sizes="32x32"><link rel="icon" type="image/png" href="/docs/build/favicons/favicon-16x16.png" sizes="16x16"><link rel="icon" type="image/png" href="/docs/build/favicons/favicon-128.png" sizes="128x128"><meta name="application-name" content="Timber Documentation"><meta name="msapplication-TileColor" content="#FFFFFF"><meta name="msapplication-TileImage" content="/docs/build/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="/docs/build/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="/docs/build/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="/docs/build/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="/docs/build/favicons/mstile-310x310.png"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@TimberWP"><meta name="twitter:title" content="Timber for WordPress Documentation"><meta name="twitter:description" content="Create WordPress themes with beautiful OOP code and the Twig Template Engine"><meta name="twitter:image" content="https://repository-images.githubusercontent.com/7413451/06c62480-b95c-11ea-8b35-b5dd97d070f1"></head><body><header class="header"><div class="logoContainer"><a href="/docs/"><img src="/docs/build/img/timber-logo.svg" alt="Timber Logo" style="width: 105px; height: 30px; border: 0" role="img"></a></div><div class="search"><div id="docsearch"></div></div><nav class="navTop" id="nav-top"><ul><li><a href="https://upstatement.com/timber/" target="_blank" rel="noreferrer noopener">About Timber</a></li><li><a href="https://twig.symfony.com/doc/" target="_blank" rel="noreferrer noopener">Twig Docs</a></li><li><a href="https://github.com/timber/timber" target="_blank" rel="noreferrer noopener"><img src="/docs/build/img/github.png" alt="Star on Github" style="width: 29px; height: 29px; border: 0"></a></li></ul></nav><button class="navMobileToggle js-menu-open" type="button" id="nav-mobile-toggle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 34"><path d="M45.6,19.43H2.4a2.43,2.43,0,0,1,0-4.86H45.6a2.43,2.43,0,0,1,0,4.86Z"/><path d="M45.6,4.86H2.4A2.41,2.41,0,0,1,0,2.43,2.41,2.41,0,0,1,2.4,0H45.6A2.41,2.41,0,0,1,48,2.43,2.41,2.41,0,0,1,45.6,4.86Z"/><path d="M45.6,34H2.4a2.43,2.43,0,0,1,0-4.86H45.6a2.43,2.43,0,0,1,0,4.86Z"/></svg> <span class="sr-only">Menu</span></button></header><div class="wrapper"><aside class="sidebar slideup-menu" id="sidebar" data-turbolinks-keep-scroll-position><button class="navClose js-menu-close" type="button"><div class="navClose-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M3.43,48A3.43,3.43,0,0,1,1,42.15L42.15,1A3.43,3.43,0,1,1,47,5.85L5.85,47A3.4,3.4,0,0,1,3.43,48Z"/><path d="M44.57,48a3.4,3.4,0,0,1-2.42-1L1,5.85A3.43,3.43,0,0,1,5.85,1L47,42.15A3.43,3.43,0,0,1,44.57,48Z"/></svg></div><span class="sr-only">Close Menu</span></button><nav class="navVersions"><ul><li><a href="/docs/" class="is-current">v1.0</a></li><li><a href="/docs/v2">v2.0.0 RC.1</a></li></ul></nav><nav id="nav-main" class="navMain"><ul class="navMain-sections"><li class="navMain-section"><h3 class="navMain-title">Getting Started</h3><ul class="navMain-items"><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/getting-started/setup/">Setup</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/getting-started/switch-to-composer/">Switch to Composer</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/getting-started/theming/">Theming</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/getting-started/twig-tools/">Twig Tools</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/getting-started/video-tutorials/">Video Tutorials</a></li></ul></li><li class="navMain-section"><h3 class="navMain-title navMain-sectionTitle">Guides</h3><ul class="navMain-items"><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/guides/acf-cookbook/">ACF Cookbook</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/guides/gutenberg/">Block Editor (Gutenberg)</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/guides/cheatsheet/">Cheatsheet</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/guides/comments/">Comments</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/guides/custom-page-templates/">Custom Page Templates</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/guides/debugging/">Debugging</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/guides/escapers/" aria-current>Escapers</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/guides/extending-timber/">Extending Timber</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/guides/filters/">Filters</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/guides/functions/">Functions</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/guides/hosts-servers/">Hosts &amp; Servers</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/guides/cookbook-images/">Image Cookbook</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/guides/internationalization/">Internationalization</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/guides/menus/">Menus</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/guides/pagination/">Pagination</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/guides/performance/">Performance/Caching</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/guides/routing/">Routing</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/guides/sidebars/">Sidebars</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/guides/template-locations/">Template Locations</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/guides/testing/">Testing</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/guides/cookbook-text/">Text Cookbook</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/guides/cookbook-twig/">Twig Cookbook</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/guides/woocommerce/">WooCommerce</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/guides/wp-integration/">WordPress Integration</a></li></ul></li><li class="navMain-section"><h3 class="navMain-title">Reference</h3><ul class="navMain-items"><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/reference/timber-archives/">Timber&#92;Archives</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/reference/timber-comment/">Timber&#92;Comment</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/reference/timber-helper/">Timber&#92;Helper</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/reference/timber-image/">Timber&#92;Image</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/reference/timber-imagehelper/">Timber&#92;ImageHelper</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/reference/timber-menu/">Timber&#92;Menu</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/reference/timber-menuitem/">Timber&#92;MenuItem</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/reference/timber-pagination/">Timber&#92;Pagination</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/reference/timber-post/">Timber&#92;Post</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/reference/timber-postpreview/">Timber&#92;PostPreview</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/reference/timber-postquery/">Timber&#92;PostQuery</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/reference/timber-site/">Timber&#92;Site</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/reference/timber-term/">Timber&#92;Term</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/reference/timber-texthelper/">Timber&#92;TextHelper</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/reference/timber-theme/">Timber&#92;Theme</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/reference/timber/">Timber&#92;Timber</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/reference/timber-urlhelper/">Timber&#92;URLHelper</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/reference/timber-user/">Timber&#92;User</a></li></ul></li><li class="navMain-section"><h3 class="navMain-title">Upgrade Guides</h3><ul class="navMain-items"><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/upgrade-guides/1.0/">Upgrade to 1.0</a></li></ul></li></ul></nav></aside><main><article><h1>Escapers</h1><aside><h2 class="heading-small">On this page</h2><nav class="toc"><ol><li><a href="#universal-escaping">Universal Escaping</a></li><li><a href="#general-escapers">General Escapers</a></li><li><a href="#wp_kses_post">wp_kses_post</a></li><li><a href="#esc_url">esc_url</a></li><li><a href="#esc_html">esc_html</a></li><li><a href="#esc_js">esc_js</a></li></ol></nav></aside><div class="content"><h2 id="universal-escaping" tabindex="-1">Universal Escaping <a class="directLink" href="#universal-escaping">#</a></h2><p>By default, Timber does <em>not</em> escape the output of standard tags (i.e. <code>{{ post.field }}</code>). If you want to enable <code>autoescape</code> behavior simply add these lines to <code>functions.php</code>:</p><pre class="language-php"><code class="language-php"><span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token function">class_exists</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Timber'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>	<span class="token class-name static-context">Timber</span><span class="token operator">::</span><span class="token variable">$autoescape</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'html'</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><h2 id="general-escapers" tabindex="-1">General Escapers <a class="directLink" href="#general-escapers">#</a></h2><p>Twig offers a variety of <a href="http://twig.symfony.com/doc/filters/escape.html">escapers</a> out of the box. These are intended to escape a string for safe insertion into the final output and there are multiple functions to conform to the strategy dependant on the context. In addition, Timber has added some valuable custom escapers for your WP theme. To use the escaper (see documentation link above) you use pipe your content through a function <code>e</code> if you want to use a custom escaper you would supply an argument to the function, e.g. <code>e('wp_kses_post')</code></p><p>This all follows the WordPress (and greater development philosophy) to:</p><ol><li>Never trust user input.</li><li>Escape as late as possible.</li><li>Escape everything from untrusted sources (like databases and users), third-parties (like Twitter), etc.</li><li>Never assume anything.</li><li>Never trust user input.</li><li>Sanitation is okay, but validation/rejection is better.</li><li>Never trust user input.</li></ol><p><a href="https://vip.wordpress.com/documentation/vip/best-practices/security/validating-sanitizing-escaping/">Relevant Documentation</a></p><h2 id="wp_kses_post" tabindex="-1">wp_kses_post <a class="directLink" href="#wp_kses_post">#</a></h2><p>Background on KSES. KSES is a recursive acronym for <code>KSES Kills Evil Scripts</code>. It's goal is to ensure only &quot;allowed&quot; HTML element names, attribute names and attribute values plus only sane HTML entities in the string. Allowed is based on a configuration.</p><p>This uses ths internal WordPress method that sanitize content for allowed HTML tags for post content. The configuration used can be found by running <code>wp_kses_allowed_html( 'post' );</code> <a href="https://codex.wordpress.org/Function_Reference/wp_kses_post">WordPress Documentation</a></p><p><strong>Twig</strong></p><p><code>&lt;p class=&quot;intro&quot;&gt;{{post.post_content|e('wp_kses_post')}}&lt;/p&gt;</code></p><p>In this example, <code>post.post_content</code> is:</p><p><code>&lt;div foo=&quot;bar&quot; src=&quot;bum&quot;&gt;Foo&lt;/div&gt;&lt;script&gt;DoEvilThing();&lt;/script&gt;</code></p><p><strong>Output</strong></p><p><code>&lt;div&gt;Foo&lt;/div&gt;DoEvilThing();</code></p><hr><h2 id="esc_url" tabindex="-1">esc_url <a class="directLink" href="#esc_url">#</a></h2><p>Uses WordPress' internal <code>esc_url</code> function on text. This should be used to sanitize URLs. <a href="https://codex.wordpress.org/Function_Reference/esc_url">WordPress Documentation</a></p><p><strong>Twig</strong></p><p><code>&lt;a href=&quot;{{ post.get_field('custom_link')|e('esc_url') }}&quot;&gt;&lt;/a&gt;</code></p><p><strong>Output</strong></p><p><code>&lt;a href=&quot;http://google.com&quot;&gt;&lt;/a&gt;</code></p><hr><h2 id="esc_html" tabindex="-1">esc_html <a class="directLink" href="#esc_html">#</a></h2><p>Escaping for HTML blocks. It converts any potentially conflicting HTML entities to their encoded equivalent to prevent them from being rendered as markup by the browser, e.g. converts &quot;&lt;&quot; to &quot;&lt;&quot; and double quotes &quot; to &quot;$quot;&quot;</p><p>This is for plain old text. If your content has HTML markup you should not use <code>esc_html</code> which will render the HTML as it looks in your code editor -- to preserve the HTML you will want to use <code>wp_kses_post</code></p><p><strong>Twig</strong></p><p><code>&lt;div class=&quot;equation&quot;&gt;{{ post.get_field('equation')|e('esc_html') }}&lt;/div&gt;</code></p><p><strong>Output</strong></p><p><code>&lt;div class=&quot;equation&quot;&gt;is x &amp;lt; y?&lt;/div&gt;</code></p><hr><h2 id="esc_js" tabindex="-1">esc_js <a class="directLink" href="#esc_js">#</a></h2><p>Escapes text strings for echoing in JS. It is intended to be used for inline JS (in a tag attribute, for example onclick=”…”). Note that the strings have to be in single quotes. The filter ‘js_escape’ is also applied.</p><p><strong>Twig</strong></p><p><code>&lt;script&gt;var bar = '{{ post.get_field('name') }}';&lt;/script&gt;</code></p><p><strong>Output</strong></p><p><code>&lt;script&gt;var bar = 'Gabrielle';&lt;/script&gt;</code></p></div></article></main></div><script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script><script>docsearch({
    appId: '7REN4GR6X4',
    apiKey: '9acbf22ef9a9b117a0f9ba50bd2f4280',
    /**
     * Timber config.
     *
     * @link https://github.com/algolia/docsearch-configs/blob/master/configs/timber.json
     */
    indexName: 'timber',
    container: '#docsearch',
    /**
     * Filter for different doc versions.
     *
     * @link https://www.algolia.com/doc/api-reference/api-parameters/facetFilters/
     */
    searchParameters: {
      facetFilters: ['version:v1']
    },
    // Set debug to true if you want to inspect the dropdown.
    // debug: true
  })</script></body></html>