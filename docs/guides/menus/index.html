<p>In Timber, you can use <code>Timber\Menu</code> to make a standard WordPress menu available to the Twig template as an object you can loop through.</p><p>Once the menu becomes available to the context, you can get items from it in a way that is a little smoother and more versatile than WordPress’s <code>wp_nav_menu()</code> function. (And you never again need to rely on a crazy <a href="https://codex.wordpress.org/Class_Reference/Walker">Walker Function</a>).</p><h2 id="initializing-a-menu">Initializing a menu <a class="directLink" href="#initializing-a-menu">#</a></h2><p><code>Timber\Menu</code> can be initialized with different values:</p><p>You can pass the slug of the menu you want to use:</p><pre class="language-php"><code class="language-php"><span class="token variable">$menu</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Timber<span class="token punctuation">\</span>Menu</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'site-tools'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Or the ID number of the menu:</p><pre class="language-php"><code class="language-php"><span class="token variable">$menu</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Timber<span class="token punctuation">\</span>Menu</span><span class="token punctuation">(</span> <span class="token number">3</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Or the proper name from the admin:</p><pre class="language-php"><code class="language-php"><span class="token variable">$menu</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Timber<span class="token punctuation">\</span>Menu</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'Primary Navigation'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Or the slug of the registered location:</p><pre class="language-php"><code class="language-php"><span class="token variable">$menu</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Timber<span class="token punctuation">\</span>Menu</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'primary'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Or pass nothing. This is good if you have only one menu. In that case Timber will just grab what you got.</p><pre class="language-php"><code class="language-php"><span class="token variable">$menu</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Timber<span class="token punctuation">\</span>Menu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="options">Options <a class="directLink" href="#options">#</a></h2><p>Optionally, you can send additional options to <code>Timber\Menu</code>. Current only <code>depth</code> is supported (see <a href="https://developer.wordpress.org/reference/functions/wp_nav_menu/">https://developer.wordpress.org/reference/functions/wp_nav_menu/</a> for reference)</p><pre class="language-php"><code class="language-php"><span class="token variable">$args</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><br>	<span class="token single-quoted-string string">'depth'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token number">2</span><span class="token punctuation">,</span><br><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token variable">$menu</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Timber<span class="token punctuation">\</span>Menu</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'primary'</span><span class="token punctuation">,</span> <span class="token variable">$args</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="setting-up-a-menu-globally">Setting up a menu globally <a class="directLink" href="#setting-up-a-menu-globally">#</a></h2><p>The first thing to do is to initialize your menu using <code>Timber\Menu</code>. This will make the menu available as an object to work with in the context. Because we need the menu on every page, we can add it to the global context through the <code>timber/context</code> filter:</p><p><strong>functions.php</strong></p><pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><br><br><span class="token function">add_filter</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'timber/context'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'add_to_context'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">add_to_context</span><span class="token punctuation">(</span> <span class="token variable">$context</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// So here you are adding data to Timber's context object, i.e...</span><br>    <span class="token variable">$context</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'I am some other typical value set in your functions.php file, unrelated to the menu'</span><span class="token punctuation">;</span><br><br>    <span class="token comment">// Now, in similar fashion, you add a Timber Menu and send it along to the context.</span><br>    <span class="token variable">$context</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'menu'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token punctuation">\</span>Timber<span class="token punctuation">\</span>Menu</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'primary-menu'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">return</span> <span class="token variable">$context</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></span></code></pre><p>Now, when you call <code>Timber::context()</code>, your menu will already be set in the context. You don’t need to initialize the menu in all your template files.</p><p><strong>index.php</strong></p><pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><br><br><span class="token variable">$context</span> <span class="token operator">=</span> Timber<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>Timber<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">render</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'index.twig'</span><span class="token punctuation">,</span> <span class="token variable">$context</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><h2 id="displaying-the-menu-items">Displaying the menu items <a class="directLink" href="#displaying-the-menu-items">#</a></h2><p>In your Twig file, you can loop over the menu items like normal arrays. You’re in complete control of the markup.</p><p><strong>index.twig</strong></p><pre class="language-twig"><code class="language-twig"><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>nav-main<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>        <span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">for</span></span> <span class="token property">item</span> <span class="token operator">in</span> <span class="token property">menu</span><span class="token punctuation">.</span><span class="token property">items</span> <span class="token rd"><span class="token punctuation">%}</span></span></span><br>            <span class="token other">&lt;li class="nav-main-item</span> <span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span> <span class="token property">item</span><span class="token punctuation">.</span><span class="token property">classes</span><span class="token operator">|</span><span class="token property">join</span><span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span> <span class="token punctuation">'</span></span><span class="token punctuation">)</span> <span class="token rd"><span class="token punctuation">}}</span></span></span><span class="token other">"><br>                &lt;a class="nav-main-link" href="</span><span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span> <span class="token property">item</span><span class="token punctuation">.</span><span class="token property">link</span> <span class="token rd"><span class="token punctuation">}}</span></span></span><span class="token other">"></span><span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span> <span class="token property">item</span><span class="token punctuation">.</span><span class="token property">title</span> <span class="token rd"><span class="token punctuation">}}</span></span></span><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></span><br>                <span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">if</span></span> <span class="token property">item</span><span class="token punctuation">.</span><span class="token property">children</span> <span class="token rd"><span class="token punctuation">%}</span></span></span><br>                    <span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>nav-drop<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>                        <span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">for</span></span> <span class="token property">child</span> <span class="token operator">in</span> <span class="token property">item</span><span class="token punctuation">.</span><span class="token property">children</span> <span class="token rd"><span class="token punctuation">%}</span></span></span><br>                            <span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>nav-drop-item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>                                &lt;a href="</span><span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span> <span class="token property">child</span><span class="token punctuation">.</span><span class="token property">link</span> <span class="token rd"><span class="token punctuation">}}</span></span></span><span class="token other">"></span><span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span> <span class="token property">child</span><span class="token punctuation">.</span><span class="token property">title</span> <span class="token rd"><span class="token punctuation">}}</span></span></span><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><br>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span></span><br>                        <span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">endfor</span></span> <span class="token rd"><span class="token punctuation">%}</span></span></span><br>                    <span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span></span><br>                <span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">endif</span></span> <span class="token rd"><span class="token punctuation">%}</span></span></span><br>            <span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span></span><br>        <span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">endfor</span></span> <span class="token rd"><span class="token punctuation">%}</span></span></span><br>    <span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">></span></span></span></code></pre><h2 id="the-current-menu-item">The current menu item <a class="directLink" href="#the-current-menu-item">#</a></h2><p>When you need to check whether a menu item is the current menu item, you can use the <code>current</code> property. Here’s an example to display child menu items only if it’s the menu item is the currently visited page:</p><p><strong>Twig</strong></p><pre class="language-twig"><code class="language-twig"><span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">if</span></span> <span class="token property">item</span><span class="token punctuation">.</span><span class="token property">current</span> <span class="token operator">and</span> <span class="token property">item</span><span class="token punctuation">.</span><span class="token property">children</span> <span class="token rd"><span class="token punctuation">%}</span></span></span><br>    <span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>nav-child<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>        <span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">for</span></span> <span class="token property">child</span> <span class="token operator">in</span> <span class="token property">item</span><span class="token punctuation">.</span><span class="token property">children</span> <span class="token rd"><span class="token punctuation">%}</span></span></span><br>            <span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>nav-child-item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>                &lt;a class="nav-child-link" href="</span><span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span> <span class="token property">child</span><span class="token punctuation">.</span><span class="token property">link</span> <span class="token rd"><span class="token punctuation">}}</span></span></span><span class="token other">"></span><span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span> <span class="token property">child</span><span class="token punctuation">.</span><span class="token property">title</span> <span class="token rd"><span class="token punctuation">}}</span></span></span><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span></span><br>        <span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">endfor</span></span> <span class="token rd"><span class="token punctuation">%}</span></span></span><br>    <span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span></span><br><span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">endif</span></span> <span class="token rd"><span class="token punctuation">%}</span></span></span></code></pre><p>Other properties that are available are <code>current_item_parent</code> for direct parents of a menu item and <code>current_item_ancestor</code> for when you have deeper nesting.</p><h2 id="tips">Tips <a class="directLink" href="#tips">#</a></h2><ul><li><a href="https://github.com/jarednova/timber/issues/200">Add items dynamically</a></li></ul>