<p>Do you like pagination? Stupid question, of course you do. Well, here's how you do it.</p><h2 id="default-pagination">Default pagination <a class="directLink" href="#default-pagination">#</a></h2><p>This will only work in a php file with an active query (like <code>archive.php</code> or <code>home.php</code>):</p><pre class="language-php"><code class="language-php">	<span class="token php language-php"><span class="token delimiter important">&lt;?php</span><br>	<span class="token variable">$context</span> <span class="token operator">=</span> Timber<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token variable">$context</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'posts'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Timber<span class="token punctuation">\</span>PostQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>	Timber<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'archive.twig'</span><span class="token punctuation">,</span> <span class="token variable">$context</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><p>You can then markup the output like so (of course, the exact markup is up to YOU):</p><pre class="language-twig"><code class="language-twig"><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>tool-pagination<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>	<span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">if</span></span> <span class="token property">posts</span><span class="token punctuation">.</span><span class="token property">pagination</span><span class="token punctuation">.</span><span class="token property">prev</span> <span class="token rd"><span class="token punctuation">%}</span></span></span><br>		<span class="token other">&lt;a href="</span><span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span><span class="token property">posts</span><span class="token punctuation">.</span><span class="token property">pagination</span><span class="token punctuation">.</span><span class="token property">prev</span><span class="token punctuation">.</span><span class="token property">link</span><span class="token rd"><span class="token punctuation">}}</span></span></span><span class="token other">" class="prev</span> <span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span><span class="token property">posts</span><span class="token punctuation">.</span><span class="token property">pagination</span><span class="token punctuation">.</span><span class="token property">prev</span><span class="token punctuation">.</span><span class="token property">link</span><span class="token operator">|</span><span class="token property">length</span> <span class="token operator">?</span> <span class="token string"><span class="token punctuation">'</span><span class="token punctuation">'</span></span> <span class="token punctuation">:</span> <span class="token string"><span class="token punctuation">'</span>invisible<span class="token punctuation">'</span></span><span class="token rd"><span class="token punctuation">}}</span></span></span><span class="token other">">Prev<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></span><br>	<span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">endif</span></span> <span class="token rd"><span class="token punctuation">%}</span></span></span><br>	<span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pages<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>		<span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">for</span></span> <span class="token property">page</span> <span class="token operator">in</span> <span class="token property">posts</span><span class="token punctuation">.</span><span class="token property">pagination</span><span class="token punctuation">.</span><span class="token property">pages</span> <span class="token rd"><span class="token punctuation">%}</span></span></span><br>			<span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span></span><br>				<span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">if</span></span> <span class="token property">page</span><span class="token punctuation">.</span><span class="token property">link</span> <span class="token rd"><span class="token punctuation">%}</span></span></span><br>					<span class="token other">&lt;a href="</span><span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span><span class="token property">page</span><span class="token punctuation">.</span><span class="token property">link</span><span class="token rd"><span class="token punctuation">}}</span></span></span><span class="token other">" class="</span><span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span><span class="token property">page</span><span class="token punctuation">.</span><span class="token property">class</span><span class="token rd"><span class="token punctuation">}}</span></span></span><span class="token other">"></span><span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span><span class="token property">page</span><span class="token punctuation">.</span><span class="token property">title</span><span class="token rd"><span class="token punctuation">}}</span></span></span><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></span><br>				<span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">else</span></span> <span class="token rd"><span class="token punctuation">%}</span></span></span><br>					<span class="token other">&lt;span class="</span><span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span><span class="token property">page</span><span class="token punctuation">.</span><span class="token property">class</span><span class="token rd"><span class="token punctuation">}}</span></span></span><span class="token other">"></span><span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span><span class="token property">page</span><span class="token punctuation">.</span><span class="token property">title</span><span class="token rd"><span class="token punctuation">}}</span></span></span><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span></span><br>				<span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">endif</span></span> <span class="token rd"><span class="token punctuation">%}</span></span></span><br>			<span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span></span><br>		<span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">endfor</span></span> <span class="token rd"><span class="token punctuation">%}</span></span></span><br>	<span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span></span><br>	<span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">if</span></span> <span class="token property">posts</span><span class="token punctuation">.</span><span class="token property">pagination</span><span class="token punctuation">.</span><span class="token property">next</span> <span class="token rd"><span class="token punctuation">%}</span></span></span><br>		<span class="token other">&lt;a href="</span><span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span><span class="token property">posts</span><span class="token punctuation">.</span><span class="token property">pagination</span><span class="token punctuation">.</span><span class="token property">next</span><span class="token punctuation">.</span><span class="token property">link</span><span class="token rd"><span class="token punctuation">}}</span></span></span><span class="token other">" class="next</span> <span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span><span class="token property">posts</span><span class="token punctuation">.</span><span class="token property">pagination</span><span class="token punctuation">.</span><span class="token property">next</span><span class="token punctuation">.</span><span class="token property">link</span><span class="token operator">|</span><span class="token property">length</span> <span class="token operator">?</span> <span class="token string"><span class="token punctuation">'</span><span class="token punctuation">'</span></span> <span class="token punctuation">:</span> <span class="token string"><span class="token punctuation">'</span>invisible<span class="token punctuation">'</span></span><span class="token rd"><span class="token punctuation">}}</span></span></span><span class="token other">">Next<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></span><br>	<span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">endif</span></span> <span class="token rd"><span class="token punctuation">%}</span></span></span><br><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span></code></pre><h2 id="what-if-im-not-using-the-default-query?">What if I'm not using the default query? <a class="directLink" href="#what-if-im-not-using-the-default-query?">#</a></h2><pre class="language-php"><code class="language-php">	<span class="token php language-php"><span class="token delimiter important">&lt;?php</span><br>	<span class="token keyword">global</span> <span class="token variable">$paged</span><span class="token punctuation">;</span><br>	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$paged</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token operator">!</span><span class="token variable">$paged</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>		<span class="token variable">$paged</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><br>	<span class="token punctuation">}</span><br>	<span class="token variable">$context</span> <span class="token operator">=</span> Timber<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token variable">$args</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><br>		<span class="token single-quoted-string string">'post_type'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token single-quoted-string string">'event'</span><span class="token punctuation">,</span><br>		<span class="token single-quoted-string string">'posts_per_page'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token number">5</span><span class="token punctuation">,</span><br>		<span class="token single-quoted-string string">'paged'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token variable">$paged</span><br>	<span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token variable">$context</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'posts'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Timber<span class="token punctuation">\</span>PostQuery</span><span class="token punctuation">(</span><span class="token variable">$args</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>	Timber<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'page-events.twig'</span><span class="token punctuation">,</span> <span class="token variable">$context</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><h2 id="pagination-with-pre_get_posts">Pagination with pre_get_posts <a class="directLink" href="#pagination-with-pre_get_posts">#</a></h2><p>Custom <code>query_posts</code> sometimes shows 404 on <a href="http://example.com/page/2">example.com/page/2</a>. In that case you can also use <code>pre_get_posts</code> in your functions.php file:</p><pre class="language-php"><code class="language-php">	<span class="token php language-php"><span class="token delimiter important">&lt;?php</span><br>	<span class="token keyword">function</span> <span class="token function">my_home_query</span><span class="token punctuation">(</span> <span class="token variable">$query</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>	  <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token variable">$query</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">is_main_query</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">is_admin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>		<span class="token variable">$query</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">set</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'post_type'</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'movie'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'post'</span> <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>	  <span class="token punctuation">}</span><br>	<span class="token punctuation">}</span><br>	<span class="token function">add_action</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'pre_get_posts'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'my_home_query'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><p>In your archive.php or home.php template:</p><pre class="language-php"><code class="language-php">	<span class="token php language-php"><span class="token delimiter important">&lt;?php</span><br>	<span class="token variable">$context</span> <span class="token operator">=</span> Timber<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token variable">$context</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'posts'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Timber<span class="token punctuation">\</span>PostQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>	Timber<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'archive.twig'</span><span class="token punctuation">,</span> <span class="token variable">$context</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre>