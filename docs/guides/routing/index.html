<p>Among its other special powers, Timber includes modern routing in the Express.js/Ruby on Rails mold, making it easy for you to implement custom pagination â€” and anything else you might imagine in your wildest dreams of URLs and parameters. OMG so easy!</p><h2 id="some-examples">Some examples <a class="directLink" href="#some-examples">#</a></h2><p>In your functions.php file, this can be called anywhere (don't hook it to <code>init</code> or another action or it might be called too late)</p><pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><br>Routes<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'blog/:name'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$params</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>    <span class="token variable">$query</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'posts_per_page=3&amp;post_type='</span><span class="token punctuation">.</span><span class="token variable">$params</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>    Routes<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'archive.php'</span><span class="token punctuation">,</span> <span class="token constant">null</span><span class="token punctuation">,</span> <span class="token variable">$query</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>Routes<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'blog/:name/page/:pg'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$params</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>    <span class="token variable">$query</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'posts_per_page=3&amp;post_type='</span><span class="token punctuation">.</span><span class="token variable">$params</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token single-quoted-string string">'&amp;paged='</span><span class="token punctuation">.</span><span class="token variable">$params</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'pg'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>    <span class="token variable">$params</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'thing'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'bar'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token single-quoted-string string">'I dont even know'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    Routes<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'archive.php'</span><span class="token punctuation">,</span> <span class="token variable">$params</span><span class="token punctuation">,</span> <span class="token variable">$query</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><h2 id="map">map <a class="directLink" href="#map">#</a></h2><p><code>Routes::map($pattern, $callback)</code></p><h3 id="usage">Usage <a class="directLink" href="#usage">#</a></h3><p>A <code>functions.php</code> where I want to display custom paginated content:</p><pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><br>Routes<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'info/:name/page/:pg'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$params</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>	<span class="token comment">//make a custom query based on incoming path and run it...</span><br>	<span class="token variable">$query</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'posts_per_page=3&amp;post_type='</span><span class="token punctuation">.</span><span class="token variable">$params</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token single-quoted-string string">'&amp;paged='</span><span class="token punctuation">.</span><span class="token function">intval</span><span class="token punctuation">(</span><span class="token variable">$params</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'pg'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>	<span class="token comment">//load up a template which will use that query</span><br>	Routes<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'archive.php'</span><span class="token punctuation">,</span> <span class="token constant">null</span><span class="token punctuation">,</span> <span class="token variable">$query</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><h3 id="arguments">Arguments <a class="directLink" href="#arguments">#</a></h3><p><code>$pattern</code> (required) Set a pattern for Timber to match on, by default everything is handled as a string. Any segment that begins with a <code>:</code> is handled as a variable, for example:</p><p><strong>To paginate:</strong></p><pre><code>page/:pagenum
</code></pre><p><strong>To edit a user:</strong></p><pre><code>my-users/:userid/edit
</code></pre><p><code>$callback</code> A function that should fire when the pattern matches the request. Callback takes one argument which is an array of the parameters passed in the URL.</p><p>So in this example: <code>'info/:name/page/:pg'</code>, $params would have data for:</p><ul><li><code>$data['name']</code></li><li><code>$data['pg']</code></li></ul><p>... which you can use in the callback function as a part of your query</p><hr><h2 id="load">load <a class="directLink" href="#load">#</a></h2><p><code>Routes::load($php_file, $args, $query = null, $status_code = 200)</code></p><h3 id="arguments-2">Arguments <a class="directLink" href="#arguments-2">#</a></h3><p><code>$php_file</code> (required) A PHP file to load, in my experience this is usually your archive.php or a generic listing page (but don't worry it can be anything!)</p><p><code>$args</code> Any data you want to send to the resulting view. Example:</p><pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><br><span class="token comment">/* functions.php */</span><br><br>Routes<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'info/:name/page/:pg'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$params</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>    <span class="token comment">//make a custom query based on incoming path and run it...</span><br>    <span class="token variable">$query</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'posts_per_page=3&amp;post_type='</span><span class="token punctuation">.</span><span class="token variable">$params</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token single-quoted-string string">'&amp;paged='</span><span class="token punctuation">.</span><span class="token function">intval</span><span class="token punctuation">(</span><span class="token variable">$params</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'pg'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token comment">//load up a template which will use that query</span><br>    <span class="token variable">$args</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token variable">$args</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'my_title'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'This is my custom title'</span><span class="token punctuation">;</span><br>    Routes<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'archive.php'</span><span class="token punctuation">,</span> <span class="token variable">$args</span><span class="token punctuation">,</span> <span class="token variable">$query</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><br><span class="token comment">/* archive.php */</span><br><br><span class="token keyword">global</span> <span class="token variable">$params</span><span class="token punctuation">;</span><br><span class="token variable">$context</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'wp_title'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$params</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'my_title'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// "This is my custom title"</span><br><span class="token comment">/* the rest as normal... */</span><br>Timber<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'archive.twig'</span><span class="token punctuation">,</span> <span class="token variable">$context</span><span class="token punctuation">)</span></span></code></pre><p><code>$query</code> The query you want to use, it can accept a string or array just like <code>Timber::get_posts</code> -- use the standard WP_Query syntax (or a WP_Query object too)</p><p><code>$status_code</code> Send an optional status code. Defaults to 200 for 'Success/OK'</p>