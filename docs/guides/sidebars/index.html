<p>So you want a sidebar?</p><h2 id="method-1-php-file">Method 1: PHP file <a class="directLink" href="#method-1-php-file">#</a></h2><p>Let's say every page on the site has the same content going into its sidebar. If so, you would: Create a <code>sidebar.php</code> file in your theme directory (so <code>wp-content/themes/mytheme/sidebar.php</code>)</p><pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><br><span class="token comment">/* sidebar.php */</span><br><span class="token variable">$context</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token variable">$context</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'widget'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">my_function_to_get_widget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token variable">$context</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'ad'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">my_function_to_get_an_ad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>Timber<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'sidebar.twig'</span><span class="token punctuation">,</span> <span class="token variable">$context</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><ul><li>Use that php file within your main php file (home.php, single.php, archive.php, etc):</li></ul><pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><br><span class="token comment">/* single.php */</span><br><span class="token variable">$context</span> <span class="token operator">=</span> Timber<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token variable">$context</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'sidebar'</span><span class="token punctuation">]</span> <span class="token operator">=</span> Timber<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get_sidebar</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'sidebar.php'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>Timber<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'single.twig'</span><span class="token punctuation">,</span> <span class="token variable">$context</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><ul><li>In the final twig file make sure you reserve a spot for your sidebar:</li></ul><pre class="language-twig"><code class="language-twig"><span class="token comment">{# single.twig #}</span><br><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>aside</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sidebar<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>	<span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span><span class="token property">sidebar</span><span class="token rd"><span class="token punctuation">}}</span></span></span><br><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>aside</span><span class="token punctuation">></span></span></span></code></pre><hr><h2 id="method-2-twig-file">Method 2: Twig file <a class="directLink" href="#method-2-twig-file">#</a></h2><p>In this example, you would populate your sidebar from your main PHP file (home.php, single.php, archive.php, etc).</p><ul><li>Make a Twig file for what your sidebar should be:</li></ul><pre class="language-twig"><code class="language-twig"><span class="token comment">{# views/sidebar-related.twig #}</span><br><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>Related Stories<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span></span><br><span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">for</span></span> <span class="token property">post</span> <span class="token operator">in</span> <span class="token property">related</span> <span class="token rd"><span class="token punctuation">%}</span></span></span><br>	<span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h4</span><span class="token punctuation">></span></span>&lt;a href="</span><span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span><span class="token property">post</span><span class="token punctuation">.</span><span class="token property">get_path</span><span class="token rd"><span class="token punctuation">}}</span></span></span><span class="token other">"></span><span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span><span class="token property">post</span><span class="token punctuation">.</span><span class="token property">post_title</span><span class="token rd"><span class="token punctuation">}}</span></span></span><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h4</span><span class="token punctuation">></span></span></span><br><span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">endfor</span></span> <span class="token rd"><span class="token punctuation">%}</span></span></span></code></pre><ul><li>Send data to it via your main PHP file:</li></ul><pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><br><span class="token comment">/* single.php */</span><br><span class="token variable">$context</span> <span class="token operator">=</span> Timber<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token variable">$post</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Timber<span class="token punctuation">\</span>Post</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token variable">$post_cat</span> <span class="token operator">=</span> <span class="token variable">$post</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">get_terms</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'category'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token variable">$post_cat</span> <span class="token operator">=</span> <span class="token variable">$post_cat</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">ID</span><span class="token punctuation">;</span><br><span class="token variable">$context</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'post'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$post</span><span class="token punctuation">;</span><br><br><span class="token variable">$sidebar_context</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token variable">$sidebar_context</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'related'</span><span class="token punctuation">]</span> <span class="token operator">=</span> Timber<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get_posts</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'cat='</span><span class="token punctuation">.</span><span class="token variable">$post_cat</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token variable">$context</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'sidebar'</span><span class="token punctuation">]</span> <span class="token operator">=</span> Timber<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get_sidebar</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'sidebar-related.twig'</span><span class="token punctuation">,</span> <span class="token variable">$sidebar_context</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>Timber<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'single.twig'</span><span class="token punctuation">,</span> <span class="token variable">$context</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><ul><li>In the final twig file, make sure you have spot for your sidebar:</li></ul><pre class="language-twig"><code class="language-twig"><span class="token comment">{# single.twig #}</span><br><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>aside</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sidebar<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>	<span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span><span class="token property">sidebar</span><span class="token rd"><span class="token punctuation">}}</span></span></span><br><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>aside</span><span class="token punctuation">></span></span></span></code></pre><hr><h2 id="method-3-dynamic">Method 3: Dynamic <a class="directLink" href="#method-3-dynamic">#</a></h2><p>This is using WordPress's built-in dynamic_sidebar tools (which, confusingly, are referred to as &quot;Widgets&quot; in the interface). Since sidebar is already used; I used widgets in the code to describe these:</p><pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><br><span class="token variable">$context</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token variable">$context</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'dynamic_sidebar'</span><span class="token punctuation">]</span> <span class="token operator">=</span> Timber<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get_widgets</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'dynamic_sidebar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>Timber<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'sidebar.twig'</span><span class="token punctuation">,</span> <span class="token variable">$context</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><pre class="language-twig"><code class="language-twig"><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>aside</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>my-sidebar<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span><span class="token property">dynamic_sidebar</span><span class="token rd"><span class="token punctuation">}}</span></span></span><br><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>aside</span><span class="token punctuation">></span></span></span></code></pre>