<!DOCTYPE html>
<html lang="en">
<head>
	
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-126807198-1"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-126807198-1');
	</script>

	<title>WooCommerce</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

	
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />

	
    <link rel="stylesheet" href="https://timber.github.io/docs/css/styles.css?c77bdfd53127f8f1e98153f3f27452a2">
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,700,700i" rel="stylesheet">

    
    <link rel="icon" href="https://timber.github.io/docs/favicons/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://timber.github.io/docs/favicons/apple-touch-icon-57x57.png" />
	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://timber.github.io/docs/favicons/apple-touch-icon-114x114.png" />
	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://timber.github.io/docs/favicons/apple-touch-icon-72x72.png" />
	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://timber.github.io/docs/favicons/apple-touch-icon-144x144.png" />
	<link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://timber.github.io/docs/favicons/apple-touch-icon-60x60.png" />
	<link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://timber.github.io/docs/favicons/apple-touch-icon-120x120.png" />
	<link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://timber.github.io/docs/favicons/apple-touch-icon-76x76.png" />
	<link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://timber.github.io/docs/favicons/apple-touch-icon-152x152.png" />
	<link rel="icon" type="image/png" href="https://timber.github.io/docs/favicons/favicon-196x196.png" sizes="196x196" />
	<link rel="icon" type="image/png" href="https://timber.github.io/docs/favicons/favicon-96x96.png" sizes="96x96" />
	<link rel="icon" type="image/png" href="https://timber.github.io/docs/favicons/favicon-32x32.png" sizes="32x32" />
	<link rel="icon" type="image/png" href="https://timber.github.io/docs/favicons/favicon-16x16.png" sizes="16x16" />
	<link rel="icon" type="image/png" href="https://timber.github.io/docs/favicons/favicon-128.png" sizes="128x128" />
	<meta name="application-name" content="Timber Docs"/>
	<meta name="msapplication-TileColor" content="#FFFFFF" />
	<meta name="msapplication-TileImage" content="https://timber.github.io/docs/favicons/mstile-144x144.png" />
	<meta name="msapplication-square70x70logo" content="https://timber.github.io/docs/favicons/mstile-70x70.png" />
	<meta name="msapplication-square150x150logo" content="https://timber.github.io/docs/favicons/mstile-150x150.png" />
	<meta name="msapplication-wide310x150logo" content="https://timber.github.io/docs/favicons/mstile-310x150.png" />
	<meta name="msapplication-square310x310logo" content="https://timber.github.io/docs/favicons/mstile-310x310.png" />

</head>


<body>

<header class="header">
    <a class="logo-link" href="https://timber.github.io/docs/">
        <div id="logo">
            <img src="https://timber.github.io/docs/images/timberlogo.svg" alt="Timber" style="width:105px;height:30px;border:0">
        </div>
    </a>

	<div class="search-container">
		<label for="search" class="search-label">Search</label>
		<input type="search" name="search" class="search" id="search">
	</div>

    <nav class="nav nav--top" id="nav-top">
        <ul>
            <li>
                <a href="http://upstatement.com/timber/"
                   target="_blank" rel="noreferrer noopener">Timber Homepage</a>
            </li>
            <li>
                <a href="http://twig.sensiolabs.org/doc/templates.html"
                   target="_blank" rel="noreferrer noopener">Twig Documentation</a>
            </li>
            <li><a href="http://code.tutsplus.com/series/kick-start-wordpress-development-with-twig--cms-974"
                   target="_blank" rel="noreferrer noopener">Getting Started Tutorials</a>
            </li>
            <li>
                <a href="https://github.com/timber/timber"
                   target="_blank" rel="noreferrer noopener">
                    <img src="https://timber.github.io/docs/images/Github.png" alt="Star on Github" style="width:29px;height:29px;border:0">
                </a>
            </li>
        </ul>
    </nav>
</header>

<aside class="sidebar">
    <nav id="nav" class="nav nav--main">
        <ul class="nav__items nav__items--level-0">
        
        
            <li class="nav__item nav__item--level-0"><a class="nav__link nav__link--level-0" href="/docs/getting-started/">Getting Started</a>
            
                <ul class="nav__items nav__items--level-1">
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/getting-started/setup/">Setup</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/getting-started/theming/">Theming</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/getting-started/twig-tools/">Twig Tools</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/getting-started/video-tutorials/">Video Tutorials</a></li>
                
                </ul>
            
            </li>
        
            <li class="nav__item nav__item--level-0 nav__item--current-ancestor"><a class="nav__link nav__link--level-0" href="/docs/guides/">Guides</a>
            
                <ul class="nav__items nav__items--level-1">
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/acf-cookbook/">ACF Cookbook</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/cheatsheet/">Cheatsheet</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/comments/">Comments</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/custom-page-templates/">Custom Page Templates</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/debugging/">Debugging</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/escapers/">Escapers</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/extending-timber/">Extending Timber</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/filters/">Filters</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/functions/">Functions</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/gutenberg/">Gutenberg</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/cookbook-images/">Image Cookbook</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/internationalization/">Internationalization</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/menus/">Menus</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/pagination/">Pagination</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/performance/">Performance/Caching</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/routing/">Routing</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/sidebars/">Sidebars</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/template-locations/">Template Locations</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/testing/">Testing</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/cookbook-text/">Text Cookbook</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/cookbook-twig/">Twig Cookbook</a></li>
                
                    <li class="nav__item nav__item--level-1 nav__item--current"><a class="nav__link nav__link--level-1" href="/docs/guides/woocommerce/">WooCommerce</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/wp-integration/">WordPress Integration</a></li>
                
                </ul>
            
            </li>
        
            <li class="nav__item nav__item--level-0"><a class="nav__link nav__link--level-0" href="/docs/reference/">Reference</a>
            
                <ul class="nav__items nav__items--level-1">
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-archives/">Timber\Archives</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-comment/">Timber\Comment</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-helper/">Timber\Helper</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-image/">Timber\Image</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-imagehelper/">Timber\ImageHelper</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-menu/">Timber\Menu</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-menuitem/">Timber\MenuItem</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-pagination/">Timber\Pagination</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-post/">Timber\Post</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-postpreview/">Timber\PostPreview</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-postquery/">Timber\PostQuery</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-site/">Timber\Site</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-term/">Timber\Term</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-texthelper/">Timber\TextHelper</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-theme/">Timber\Theme</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber/">Timber\Timber</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-urlhelper/">Timber\URLHelper</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-user/">Timber\User</a></li>
                
                </ul>
            
            </li>
        
            <li class="nav__item nav__item--level-0"><a class="nav__link nav__link--level-0" href="/docs/upgrade-guides/">Upgrade Guides</a>
            
                <ul class="nav__items nav__items--level-1">
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/upgrade-guides/1.0/">Upgrade to 1.0</a></li>
                
                </ul>
            
            </li>
        
        </ul>
    </nav>
</aside>


<main>
    
	<article>
		<h1>WooCommerce</h1>

		<aside class="toc">
			<h2 class="heading-4 toc__title">Contents of this page</h2>
			<nav id="TableOfContents">
  <ul>
    <li><a href="#point-of-entry---main-woocommerce-php-file">Point of entry - main WooCommerce PHP file</a></li>
    <li><a href="#archives">Archives</a></li>
    <li><a href="#single-product">Single Product</a></li>
    <li><a href="#tease-product">Tease Product</a></li>
  </ul>
</nav>
		</aside>

		<div class="content-container">
			<div class="content">
				<h2 id="point-of-entry---main-woocommerce-php-file">Point of entry - main WooCommerce PHP file</h2>
<p>The first step to get your WooCommerce project integrated with Timber is declaring WooCommerce support in your theme’s <strong>functions.php</strong> file like so:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php">function theme_add_woocommerce_support() {
    add_theme_support( &#39;woocommerce&#39; );
}

add_action( &#39;after_setup_theme&#39;, &#39;theme_add_woocommerce_support&#39; );
</code></pre></div><p>For more information about how you can enable or disable features and change settings through theme support, refer to the <a href="https://docs.woocommerce.com/document/woocommerce-theme-developer-handbook">WooCommerce Theme Developer Handbook</a>.</p>
<p>Once that’s done you can start integrating WooCommerce into your theme by creating a file named <strong>woocommerce.php</strong> in the root of your theme. That will establish the context and data to be passed to your Twig files:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">&lt;?php</span>

<span style="color:#66d9ef">if</span> ( <span style="color:#f92672">!</span> <span style="color:#a6e22e">class_exists</span>( <span style="color:#e6db74">&#39;Timber&#39;</span> ) ) {
    <span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#39;Timber not activated. Make sure you activate the plugin in &lt;a href=&#34;/wp-admin/plugins.php#timber&#34;&gt;/wp-admin/plugins.php&lt;/a&gt;&#39;</span>;

    <span style="color:#66d9ef">return</span>;
}

$context            <span style="color:#f92672">=</span> <span style="color:#a6e22e">Timber</span><span style="color:#f92672">::</span><span style="color:#a6e22e">context</span>();
$context[<span style="color:#e6db74">&#39;sidebar&#39;</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">Timber</span><span style="color:#f92672">::</span><span style="color:#a6e22e">get_widgets</span>( <span style="color:#e6db74">&#39;shop-sidebar&#39;</span> );

<span style="color:#66d9ef">if</span> ( <span style="color:#a6e22e">is_singular</span>( <span style="color:#e6db74">&#39;product&#39;</span> ) ) {
    $context[<span style="color:#e6db74">&#39;post&#39;</span>]    <span style="color:#f92672">=</span> <span style="color:#a6e22e">Timber</span><span style="color:#f92672">::</span><span style="color:#a6e22e">get_post</span>();
    $product            <span style="color:#f92672">=</span> <span style="color:#a6e22e">wc_get_product</span>( $context[<span style="color:#e6db74">&#39;post&#39;</span>]<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">ID</span> );
    $context[<span style="color:#e6db74">&#39;product&#39;</span>] <span style="color:#f92672">=</span> $product;

    <span style="color:#75715e">// Get related products
</span><span style="color:#75715e"></span>    $related_limit               <span style="color:#f92672">=</span> <span style="color:#a6e22e">wc_get_loop_prop</span>( <span style="color:#e6db74">&#39;columns&#39;</span> );
    $related_ids                 <span style="color:#f92672">=</span> <span style="color:#a6e22e">wc_get_related_products</span>( $context[<span style="color:#e6db74">&#39;post&#39;</span>]<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">id</span>, $related_limit );
    $context[<span style="color:#e6db74">&#39;related_products&#39;</span>] <span style="color:#f92672">=</span>  <span style="color:#a6e22e">Timber</span><span style="color:#f92672">::</span><span style="color:#a6e22e">get_posts</span>( $related_ids );

    <span style="color:#75715e">// Restore the context and loop back to the main query loop.
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">wp_reset_postdata</span>();

    <span style="color:#a6e22e">Timber</span><span style="color:#f92672">::</span><span style="color:#a6e22e">render</span>( <span style="color:#e6db74">&#39;views/woo/single-product.twig&#39;</span>, $context );
} <span style="color:#66d9ef">else</span> {
    $posts <span style="color:#f92672">=</span> <span style="color:#a6e22e">Timber</span><span style="color:#f92672">::</span><span style="color:#a6e22e">get_posts</span>();
    $context[<span style="color:#e6db74">&#39;products&#39;</span>] <span style="color:#f92672">=</span> $posts;

    <span style="color:#66d9ef">if</span> ( <span style="color:#a6e22e">is_product_category</span>() ) {
        $queried_object <span style="color:#f92672">=</span> <span style="color:#a6e22e">get_queried_object</span>();
        $term_id <span style="color:#f92672">=</span> $queried_object<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">term_id</span>;
        $context[<span style="color:#e6db74">&#39;category&#39;</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">get_term</span>( $term_id, <span style="color:#e6db74">&#39;product_cat&#39;</span> );
        $context[<span style="color:#e6db74">&#39;title&#39;</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">single_term_title</span>( <span style="color:#e6db74">&#39;&#39;</span>, <span style="color:#66d9ef">false</span> );
    }

    <span style="color:#a6e22e">Timber</span><span style="color:#f92672">::</span><span style="color:#a6e22e">render</span>( <span style="color:#e6db74">&#39;views/woo/archive.twig&#39;</span>, $context );
}
</code></pre></div><p>You will now need the two Twig files loaded from <code>woocommerce.php</code>: <code>views/woo/single-product.twig</code> and <code>views/woo/archive.twig</code>.</p>
<h2 id="archives">Archives</h2>
<p>Create a Twig file according to the location asked by the above file, in this example that would be <code>views/woo/archive.twig</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-twig" data-lang="twig"><span style="color:#75715e">{%</span> <span style="color:#66d9ef">extends</span> <span style="color:#e6db74">&#39;base.twig&#39;</span> <span style="color:#75715e">%}</span>

<span style="color:#75715e">{%</span> <span style="color:#66d9ef">block</span> content <span style="color:#75715e">%}</span>

    <span style="color:#75715e">{%</span> <span style="color:#66d9ef">do</span> action<span style="color:#f92672">(</span><span style="color:#e6db74">&#39;woocommerce_before_main_content&#39;</span><span style="color:#f92672">)</span> <span style="color:#75715e">%}</span>

    &lt;div class=&#34;before-shop-loop&#34;&gt;
        <span style="color:#75715e">{%</span> <span style="color:#66d9ef">do</span> action<span style="color:#f92672">(</span><span style="color:#e6db74">&#39;woocommerce_before_shop_loop&#39;</span><span style="color:#f92672">)</span> <span style="color:#75715e">%}</span>
    &lt;/div&gt;

    &lt;div class=&#34;loop&#34;&gt;
        <span style="color:#75715e">{%</span> <span style="color:#66d9ef">for</span> post <span style="color:#66d9ef">in</span> products <span style="color:#75715e">%}</span>
            <span style="color:#75715e">{%</span> <span style="color:#66d9ef">include</span> <span style="color:#f92672">[</span><span style="color:#e6db74">&#34;partials/tease-product.twig&#34;</span><span style="color:#f92672">]</span> <span style="color:#75715e">%}</span>
        <span style="color:#75715e">{%</span> <span style="color:#66d9ef">endfor</span> <span style="color:#75715e">%}</span>
    &lt;/div&gt;

    <span style="color:#75715e">{%</span> <span style="color:#66d9ef">do</span> action<span style="color:#f92672">(</span><span style="color:#e6db74">&#39;woocommerce_after_shop_loop&#39;</span><span style="color:#f92672">)</span> <span style="color:#75715e">%}</span>
    <span style="color:#75715e">{%</span> <span style="color:#66d9ef">do</span> action<span style="color:#f92672">(</span><span style="color:#e6db74">&#39;woocommerce_after_main_content&#39;</span><span style="color:#f92672">)</span> <span style="color:#75715e">%}</span>

<span style="color:#75715e">{%</span> <span style="color:#66d9ef">endblock</span>  <span style="color:#75715e">%}</span>
</code></pre></div><p>You’ll notice the inclusion of several of WooCommerce’s default hooks, which you’ll need to keep the integration seamless and allow any WooCommerce extension plugin to still work.</p>
<p>Next, we’ll take care of the single product view.</p>
<h2 id="single-product">Single Product</h2>
<p>Create a Twig file according to the location asked by the above file, in this example that would be <code>views/woo/single-product.twig</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-twig" data-lang="twig"><span style="color:#75715e">{%</span> <span style="color:#66d9ef">extends</span> <span style="color:#e6db74">&#34;base.twig&#34;</span> <span style="color:#75715e">%}</span>

<span style="color:#75715e">{%</span> <span style="color:#66d9ef">block</span> content <span style="color:#75715e">%}</span>

    <span style="color:#75715e">{%</span> <span style="color:#66d9ef">do</span> action<span style="color:#f92672">(</span><span style="color:#e6db74">&#39;woocommerce_before_single_product&#39;</span><span style="color:#f92672">)</span> <span style="color:#75715e">%}</span>

    &lt;article itemscope itemtype=&#34;http://schema.org/Product&#34; class=&#34;single-product-details <span style="color:#75715e">{{</span> post.class <span style="color:#75715e">}}</span>&#34;&gt;

        &lt;div class=&#34;entry-images&#34;&gt;
            <span style="color:#75715e">{%</span> <span style="color:#66d9ef">do</span> action<span style="color:#f92672">(</span><span style="color:#e6db74">&#39;woocommerce_before_single_product_summary&#39;</span><span style="color:#f92672">)</span> <span style="color:#75715e">%}</span>

            &lt;img src=&#34;<span style="color:#75715e">{{</span> post.thumbnail.src<span style="color:#f92672">(</span><span style="color:#e6db74">&#39;shop_single&#39;</span><span style="color:#f92672">)</span> <span style="color:#75715e">}}</span>&#34; /&gt;
        &lt;/div&gt;

        &lt;div class=&#34;summary entry-summary&#34;&gt;
            <span style="color:#75715e">{%</span> <span style="color:#66d9ef">do</span> action<span style="color:#f92672">(</span><span style="color:#e6db74">&#39;woocommerce_single_product_summary&#39;</span><span style="color:#f92672">)</span> <span style="color:#75715e">%}</span>
        &lt;/div&gt;

        <span style="color:#75715e">{%</span> <span style="color:#66d9ef">do</span> action<span style="color:#f92672">(</span><span style="color:#e6db74">&#39;woocommerce_after_single_product_summary&#39;</span><span style="color:#f92672">)</span> <span style="color:#75715e">%}</span>

        &lt;meta itemprop=&#34;url&#34; content=&#34;<span style="color:#75715e">{{</span> post.link <span style="color:#75715e">}}</span>&#34; /&gt;

    &lt;/article&gt;

    <span style="color:#75715e">{%</span> <span style="color:#66d9ef">include</span> <span style="color:#f92672">[</span><span style="color:#e6db74">&#34;partials/tease-product.twig&#34;</span><span style="color:#f92672">]</span> with <span style="color:#f92672">{</span> products<span style="color:#f92672">:</span> related_products <span style="color:#f92672">}</span> <span style="color:#75715e">%}</span>

    <span style="color:#75715e">{%</span> <span style="color:#66d9ef">do</span> action<span style="color:#f92672">(</span><span style="color:#e6db74">&#39;woocommerce_after_single_product&#39;</span><span style="color:#f92672">)</span> <span style="color:#75715e">%}</span>

<span style="color:#75715e">{%</span> <span style="color:#66d9ef">endblock</span>  <span style="color:#75715e">%}</span>
</code></pre></div><p>Again we are keeping things simple by using WooCommerce’s default hooks. If you need to override the output of any of those hooks, my advice would be to remove and add the relevant actions using PHP, keeping your upgrade path simple.</p>
<p>If you wanna use the same <code>tease-product.twig</code> output as your related products, you have to remove the default related-products from theme, add the following to your <code>functions.php</code> file:
<code>remove_action( 'woocommerce_after_single_product_summary', 'woocommerce_output_related_products', 20 );</code></p>
<p>Finally, we’ll need to create a teaser file for products in loops. Considering the code above that would be <code>views/partials/tease-product.twig</code>:</p>
<h2 id="tease-product">Tease Product</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-twig" data-lang="twig">&lt;article <span style="color:#75715e">{{</span> fn<span style="color:#f92672">(</span><span style="color:#e6db74">&#39;post_class&#39;</span><span style="color:#f92672">,</span> <span style="color:#f92672">[</span><span style="color:#e6db74">&#39;$classes&#39;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#39;entry&#39;</span><span style="color:#f92672">]</span> <span style="color:#f92672">)</span> <span style="color:#75715e">}}</span>&gt;

    <span style="color:#75715e">{{</span> fn<span style="color:#f92672">(</span><span style="color:#e6db74">&#39;timber_set_product&#39;</span><span style="color:#f92672">,</span> post<span style="color:#f92672">)</span> <span style="color:#75715e">}}</span>

    &lt;div class=&#34;media&#34;&gt;

        <span style="color:#75715e">{%</span> <span style="color:#66d9ef">if</span> showthumb <span style="color:#75715e">%}</span>
            &lt;div class=&#34;media-figure <span style="color:#75715e">{%</span> <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">not</span> post.thumbnail <span style="color:#75715e">%}</span>placeholder<span style="color:#75715e">{%</span> <span style="color:#66d9ef">endif</span> <span style="color:#75715e">%}</span>&#34;&gt;
                &lt;a href=&#34;<span style="color:#75715e">{{</span> post.link <span style="color:#75715e">}}</span>&#34;&gt;
                    <span style="color:#75715e">{%</span> <span style="color:#66d9ef">if</span> post.thumbnail <span style="color:#75715e">%}</span>
                        &lt;img src=&#34;<span style="color:#75715e">{{</span> post.thumbnail.src<span style="color:#f92672">|</span><span style="color:#a6e22e">resize</span><span style="color:#f92672">(</span>post_thumb_size<span style="color:#f92672">[</span><span style="color:#ae81ff">0</span><span style="color:#f92672">],</span> post_thumb_size<span style="color:#f92672">[</span><span style="color:#ae81ff">1</span><span style="color:#f92672">])</span> <span style="color:#75715e">}}</span>&#34; /&gt;
                    <span style="color:#75715e">{%</span> <span style="color:#66d9ef">else</span> <span style="color:#75715e">%}</span>
                        &lt;span class=&#34;thumb-placeholder&#34;&gt;&lt;i class=&#34;icon-camera&#34;&gt;&lt;/i&gt;&lt;/span&gt;
                    <span style="color:#75715e">{%</span> <span style="color:#66d9ef">endif</span> <span style="color:#75715e">%}</span>
                &lt;/a&gt;
            &lt;/div&gt;
        <span style="color:#75715e">{%</span> <span style="color:#66d9ef">endif</span> <span style="color:#75715e">%}</span>

        &lt;div class=&#34;media-content&#34;&gt;

            <span style="color:#75715e">{%</span> <span style="color:#66d9ef">do</span> action<span style="color:#f92672">(</span><span style="color:#e6db74">&#39;woocommerce_before_shop_loop_item_title&#39;</span><span style="color:#f92672">)</span> <span style="color:#75715e">%}</span>

            <span style="color:#75715e">{%</span> <span style="color:#66d9ef">if</span> post.title <span style="color:#75715e">%}</span>
                &lt;h3 class=&#34;entry-title&#34;&gt;&lt;a href=&#34;<span style="color:#75715e">{{</span> post.link <span style="color:#75715e">}}</span>&#34;&gt;<span style="color:#75715e">{{</span> post.title <span style="color:#75715e">}}</span>&lt;/a&gt;&lt;/h3&gt;
            <span style="color:#75715e">{%</span> <span style="color:#66d9ef">else</span> <span style="color:#75715e">%}</span>
                &lt;h3 class=&#34;entry-title&#34;&gt;&lt;a href=&#34;<span style="color:#75715e">{{</span> post.link <span style="color:#75715e">}}</span>&#34;&gt;<span style="color:#75715e">{{</span> fn<span style="color:#f92672">(</span><span style="color:#e6db74">&#39;the_title&#39;</span><span style="color:#f92672">)</span> <span style="color:#75715e">}}</span>&lt;/a&gt;&lt;/h3&gt;
            <span style="color:#75715e">{%</span> <span style="color:#66d9ef">endif</span> <span style="color:#75715e">%}</span>

            <span style="color:#75715e">{%</span> <span style="color:#66d9ef">do</span> action<span style="color:#f92672">(</span> <span style="color:#e6db74">&#39;woocommerce_after_shop_loop_item_title&#39;</span> <span style="color:#f92672">)</span> <span style="color:#75715e">%}</span>
            <span style="color:#75715e">{%</span> <span style="color:#66d9ef">do</span> action<span style="color:#f92672">(</span> <span style="color:#e6db74">&#39;woocommerce_after_shop_loop_item&#39;</span> <span style="color:#f92672">)</span> <span style="color:#75715e">%}</span>

        &lt;/div&gt;

    &lt;/div&gt;

&lt;/article&gt;
</code></pre></div><p>This should all sound familiar by now, except for one line:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-twig" data-lang="twig"><span style="color:#75715e">{{</span> fn<span style="color:#f92672">(</span><span style="color:#e6db74">&#39;timber_set_product&#39;</span><span style="color:#f92672">,</span> post<span style="color:#f92672">)</span> <span style="color:#75715e">}}</span>
</code></pre></div><p>For some reason, products in the loop don’t get the right context by default. This line will call the following function that you need to add somewhere in your <code>functions.php</code> file:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">&lt;?php</span>
<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">timber_set_product</span>( $post ) {
    <span style="color:#66d9ef">global</span> $product;

    <span style="color:#66d9ef">if</span> ( <span style="color:#a6e22e">is_woocommerce</span>() ) {
        $product <span style="color:#f92672">=</span> <span style="color:#a6e22e">wc_get_product</span>( $post<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">ID</span> );
    }
}
</code></pre></div><p>Without this, some elements of the listed products would show the same information as the first product in the loop. If you see an error like <code>Warning: call_user_func_array() expects parameter 1 to be a valid callback, no array or string given</code>, this is your problem.</p>
<p><em>Note:</em> Some users reported issues with the loop context even when using the <code>timber_set_product()</code> helper function. Turns out the default WooCommerce hooks interfere with the output of the aforementioned function.</p>
<p>One way to get around this is by building your own image calls, that means removing WooCommerce’s default hooks and declare your own template for the HTML to show the image:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-twig" data-lang="twig"><span style="color:#75715e">{%</span> <span style="color:#66d9ef">if</span> post.thumbnail <span style="color:#75715e">%}</span>
    &lt;img src=&#34;<span style="color:#75715e">{{</span> post.thumbnail.src<span style="color:#f92672">|</span><span style="color:#a6e22e">resize</span><span style="color:#f92672">(</span>shop_thumbnail_image_size<span style="color:#f92672">)</span> <span style="color:#75715e">}}</span>&#34; /&gt;
<span style="color:#75715e">{%</span> <span style="color:#66d9ef">endif</span> <span style="color:#75715e">%}</span>
</code></pre></div><p>To remove the default image, add the following to your <code>functions.php</code> file:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">&lt;?php</span>
<span style="color:#a6e22e">remove_action</span>( <span style="color:#e6db74">&#39;woocommerce_before_shop_loop_item_title&#39;</span>, <span style="color:#e6db74">&#39;woocommerce_template_loop_product_thumbnail&#39;</span> );
</code></pre></div><p>This comes with the added benefit that you’ll have total control over where your image is created in the markup.</p>

			</div>
		</div>
	</article>

</main>



<script src="https://timber.github.io/docs/js/highlight.pack.js" defer></script>
<script src="https://timber.github.io/docs/js/scripts.js?44e60569f8868a72f5a9e8cd72cb0844" defer></script>


<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
apiKey: '4907f57b267887b1da360de600656085',
indexName: 'timber',
inputSelector: '#search',
debug: false 
});
</script>

</body>
</html>
