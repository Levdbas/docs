<!DOCTYPE html>
<html lang="en">
<head>
	<title>WooCommerce</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

	
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />

	
    <link rel="stylesheet" href="https://timber.github.io/docs/css/styles.css?bbb4a34691cef083c31eb7d1af61a243">
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,700,700i" rel="stylesheet">

    
    <link rel="icon" href="https://timber.github.io/docs/favicons/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://timber.github.io/docs/favicons/apple-touch-icon-57x57.png" />
	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://timber.github.io/docs/favicons/apple-touch-icon-114x114.png" />
	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://timber.github.io/docs/favicons/apple-touch-icon-72x72.png" />
	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://timber.github.io/docs/favicons/apple-touch-icon-144x144.png" />
	<link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://timber.github.io/docs/favicons/apple-touch-icon-60x60.png" />
	<link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://timber.github.io/docs/favicons/apple-touch-icon-120x120.png" />
	<link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://timber.github.io/docs/favicons/apple-touch-icon-76x76.png" />
	<link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://timber.github.io/docs/favicons/apple-touch-icon-152x152.png" />
	<link rel="icon" type="image/png" href="https://timber.github.io/docs/favicons/favicon-196x196.png" sizes="196x196" />
	<link rel="icon" type="image/png" href="https://timber.github.io/docs/favicons/favicon-96x96.png" sizes="96x96" />
	<link rel="icon" type="image/png" href="https://timber.github.io/docs/favicons/favicon-32x32.png" sizes="32x32" />
	<link rel="icon" type="image/png" href="https://timber.github.io/docs/favicons/favicon-16x16.png" sizes="16x16" />
	<link rel="icon" type="image/png" href="https://timber.github.io/docs/favicons/favicon-128.png" sizes="128x128" />
	<meta name="application-name" content="Timber Docs"/>
	<meta name="msapplication-TileColor" content="#FFFFFF" />
	<meta name="msapplication-TileImage" content="https://timber.github.io/docs/favicons/mstile-144x144.png" />
	<meta name="msapplication-square70x70logo" content="https://timber.github.io/docs/favicons/mstile-70x70.png" />
	<meta name="msapplication-square150x150logo" content="https://timber.github.io/docs/favicons/mstile-150x150.png" />
	<meta name="msapplication-wide310x150logo" content="https://timber.github.io/docs/favicons/mstile-310x150.png" />
	<meta name="msapplication-square310x310logo" content="https://timber.github.io/docs/favicons/mstile-310x310.png" />

</head>


<body>

<header class="header">
    <a class="logo-link" href="https://timber.github.io/docs/">
        <div id="logo">
            <img src="https://timber.github.io/docs/images/timberlogo.svg" alt="Timber" style="width:105px;height:30px;border:0">
        </div>
    </a>

	<div class="search-container">
		<label for="search" class="search-label">Search</label>
		<input type="search" name="search" class="search" id="search">
	</div>

    <nav class="nav nav--top" id="nav-top">
        <ul>
            <li>
                <a href="http://upstatement.com/timber/"
                   target="_blank" rel="noreferrer noopener">Timber Homepage</a>
            </li>
            <li>
                <a href="http://twig.sensiolabs.org/doc/templates.html"
                   target="_blank" rel="noreferrer noopener">Twig Documentation</a>
            </li>
            <li><a href="http://code.tutsplus.com/series/kick-start-wordpress-development-with-twig--cms-974"
                   target="_blank" rel="noreferrer noopener">Getting Started Tutorials</a>
            </li>
            <li>
                <a href="https://github.com/timber/timber"
                   target="_blank" rel="noreferrer noopener">
                    <img src="https://timber.github.io/docs/images/Github.png" alt="Star on Github" style="width:29px;height:29px;border:0">
                </a>
            </li>
        </ul>
    </nav>
</header>

<aside class="sidebar">
    <nav id="nav" class="nav nav--main">
        <ul class="nav__items nav__items--level-0">
        
        
            <li class="nav__item nav__item--level-0"><a class="nav__link nav__link--level-0" href="/docs/getting-started/">Getting Started</a>
            
                <ul class="nav__items nav__items--level-1">
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/getting-started/setup/">Setup</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/getting-started/themeing/">Themeing</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/getting-started/theming/">Theming</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/getting-started/twig-tools/">Twig Tools</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/getting-started/video-tutorials/">Video Tutorials</a></li>
                
                </ul>
            
            </li>
        
            <li class="nav__item nav__item--level-0 nav__item--current-ancestor"><a class="nav__link nav__link--level-0" href="/docs/guides/">Guides</a>
            
                <ul class="nav__items nav__items--level-1">
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/acf-cookbook/">ACF Cookbook</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/cheatsheet/">Cheatsheet</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/custom-page-templates/">Custom Page Templates</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/debugging/">Debugging</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/escapers/">Escapers</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/extending-timber/">Extending Timber</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/filters/">Filters</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/functions/">Functions</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/cookbook-images/">Image Cookbook</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/internationalization/">Internationalization</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/pagination/">Pagination</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/performance/">Performance/Caching</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/routing/">Routing</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/sidebars/">Sidebars</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/template-locations/">Template Locations</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/testing/">Testing</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/cookbook-text/">Text Cookbook</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/cookbook-twig/">Twig Cookbook</a></li>
                
                    <li class="nav__item nav__item--level-1 nav__item--current"><a class="nav__link nav__link--level-1" href="/docs/guides/woocommerce/">WooCommerce</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/wp-integration/">WordPress Integration</a></li>
                
                </ul>
            
            </li>
        
            <li class="nav__item nav__item--level-0"><a class="nav__link nav__link--level-0" href="/docs/reference/">Reference</a>
            
                <ul class="nav__items nav__items--level-1">
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-archives/">Timber\Archives</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-comment/">Timber\Comment</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-helper/">Timber\Helper</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-image/">Timber\Image</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-imagehelper/">Timber\ImageHelper</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-menu/">Timber\Menu</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-menuitem/">Timber\MenuItem</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-pagination/">Timber\Pagination</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-post/">Timber\Post</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-postpreview/">Timber\PostPreview</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-postquery/">Timber\PostQuery</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-site/">Timber\Site</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-term/">Timber\Term</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-texthelper/">Timber\TextHelper</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-theme/">Timber\Theme</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber/">Timber\Timber</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-urlhelper/">Timber\URLHelper</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-user/">Timber\User</a></li>
                
                </ul>
            
            </li>
        
            <li class="nav__item nav__item--level-0"><a class="nav__link nav__link--level-0" href="/docs/upgrade-guides/">Upgrade Guides</a>
            
                <ul class="nav__items nav__items--level-1">
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/upgrade-guides/1.0/">Upgrade to 1.0</a></li>
                
                </ul>
            
            </li>
        
        </ul>
    </nav>
</aside>


<main>
    
	<article>
		<h1>WooCommerce</h1>

		<aside class="toc">
			<h2 class="heading-4 toc__title">Contents of this page</h2>
			<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#point-of-entry-main-woocommerce-php-file">Point of entry - main WooCommerce PHP file</a></li>
<li><a href="#archives">Archives</a></li>
<li><a href="#single-product">Single Product</a></li>
<li><a href="#tease-product">Tease Product</a></li>
</ul></li>
</ul>
</nav>
		</aside>

		<div class="content-container">
			<div class="content">
				

<h2 id="point-of-entry-main-woocommerce-php-file">Point of entry - main WooCommerce PHP file</h2>

<p>The first step to get your WooCommerce project integrated with Timber is creating a file named <code>woocommerce.php</code> in the root of your theme. That will establish the context and data to be passed to your Twig files:</p>

<pre><code class="language-php">&lt;?php

if ( ! class_exists( 'Timber' ) ){
    echo 'Timber not activated. Make sure you activate the plugin in &lt;a href=&quot;/wp-admin/plugins.php#timber&quot;&gt;/wp-admin/plugins.php&lt;/a&gt;';

    return;
}

$context            = Timber::get_context();
$context['sidebar'] = Timber::get_widgets( 'shop-sidebar' );

if ( is_singular( 'product' ) ) {
    $context['post']    = Timber::get_post();
    $product            = wc_get_product( $context['post']-&gt;ID );
    $context['product'] = $product;

    Timber::render( 'views/woo/single-product.twig', $context );
} else {
    $posts = Timber::get_posts();
    $context['products'] = $posts;

    if ( is_product_category() ) {
        $queried_object = get_queried_object();
        $term_id = $queried_object-&gt;term_id;
        $context['category'] = get_term( $term_id, 'product_cat' );
        $context['title'] = single_term_title( '', false );
    }

    Timber::render( 'views/woo/archive.twig', $context );
}
</code></pre>

<p>You will now need the two Twig files loaded from <code>woocommerce.php</code>: <code>views/woo/single-product.twig</code> and <code>views/woo/archive.twig</code>.</p>

<h2 id="archives">Archives</h2>

<p>Create a Twig file according to the location asked by the above file, in this example that would be <code>views/woo/archive.twig</code>:</p>

<pre><code class="language-twig">{% extends 'base.twig' %}

{% block content %}

    {% do action('woocommerce_before_main_content') %}

    &lt;div class=&quot;before-shop-loop&quot;&gt;
        {% do action('woocommerce_before_shop_loop') %}
    &lt;/div&gt;

    &lt;div class=&quot;loop&quot;&gt;
        {% for post in products %}
            {% include [&quot;partials/tease-product.twig&quot;] %}
        {% endfor %}
    &lt;/div&gt;

    {% do action('woocommerce_after_shop_loop') %}
    {% do action('woocommerce_after_main_content') %}

{% endblock  %}
</code></pre>

<p>You’ll notice the inclusion of several of WooCommerce’s default hooks, which you’ll need to keep the integration seamless and allow any WooCommerce extension plugin to still work.</p>

<p>Next, we’ll take care of the single product view.</p>

<h2 id="single-product">Single Product</h2>

<p>Create a Twig file according to the location asked by the above file, in this example that would be <code>views/woo/single-product.twig</code>:</p>

<pre><code class="language-twig">{% extends &quot;base.twig&quot; %}

{% block content %}

    {% do action('woocommerce_before_single_product') %}

    &lt;article itemscope itemtype=&quot;http://schema.org/Product&quot; class=&quot;single-product-details {{ post.class }}&quot;&gt;

        &lt;div class=&quot;entry-images&quot;&gt;
            {% do action('woocommerce_before_single_product_summary') %}

            &lt;img src=&quot;{{ post.thumbnail.src('shop_single') }}&quot; /&gt;
        &lt;/div&gt;

        &lt;div class=&quot;summary entry-summary&quot;&gt;
            {% do action('woocommerce_single_product_summary') %}
        &lt;/div&gt;

        {% do action('woocommerce_after_single_product_summary') %}

        &lt;meta itemprop=&quot;url&quot; content=&quot;{{ post.link }}&quot; /&gt;

    &lt;/article&gt;

    {% do action('woocommerce_after_single_product') %}

{% endblock  %}
</code></pre>

<p>Again we are keeping things simple by using WooCommerce’s default hooks. If you need to override the output of any of those hooks, my advice would be to remove and add the relevant actions using PHP, keeping your upgrade path simple.</p>

<p>Finally, we’ll need to create a teaser file for products in loops. Considering the code above that would be <code>views/partials/tease-product.twig</code>:</p>

<h2 id="tease-product">Tease Product</h2>

<pre><code class="language-twig">&lt;article {{ fn('post_class', ['$classes', 'entry'] ) }}&gt;

    {{ fn('timber_set_product', post) }}

    &lt;div class=&quot;media&quot;&gt;

        {% if showthumb %}
            &lt;div class=&quot;media-figure {% if not post.thumbnail %}placeholder{% endif %}&quot;&gt;
                &lt;a href=&quot;{{ post.link }}&quot;&gt;
                    {% if post.thumbnail %}
                        &lt;img src=&quot;{{ post.thumbnail.src|resize(post_thumb_size[0], post_thumb_size[1]) }}&quot; /&gt;
                    {% else %}
                        &lt;span class=&quot;thumb-placeholder&quot;&gt;&lt;i class=&quot;icon-camera&quot;&gt;&lt;/i&gt;&lt;/span&gt;
                    {% endif %}
                &lt;/a&gt;
            &lt;/div&gt;
        {% endif %}

        &lt;div class=&quot;media-content&quot;&gt;

            {% do action('woocommerce_before_shop_loop_item_title') %}

            {% if post.title %}
                &lt;h3 class=&quot;entry-title&quot;&gt;&lt;a href=&quot;{{ post.link }}&quot;&gt;{{ post.title }}&lt;/a&gt;&lt;/h3&gt;
            {% else %}
                &lt;h3 class=&quot;entry-title&quot;&gt;&lt;a href=&quot;{{ post.link }}&quot;&gt;{{ fn('the_title') }}&lt;/a&gt;&lt;/h3&gt;
            {% endif %}

            {% do action( 'woocommerce_after_shop_loop_item_title' ) %}
            {% do action( 'woocommerce_after_shop_loop_item' ) %}

        &lt;/div&gt;

    &lt;/div&gt;

&lt;/article&gt;
</code></pre>

<p>This should all sound familiar by now, except for one line:</p>

<pre><code class="language-twig">{{ fn('timber_set_product', post) }}
</code></pre>

<p>For some reason, products in the loop don’t get the right context by default. This line will call the following function that you need to add somewhere in your <code>functions.php</code> file:</p>

<pre><code class="language-php">&lt;?php
function timber_set_product( $post ) {
    global $product;
    
    if ( is_woocommerce() ) {
        $product = wc_get_product( $post-&gt;ID );
    }
}
</code></pre>

<p>Without this, some elements of the listed products would show the same information as the first product in the loop.</p>

<p><em>Note:</em> Some users reported issues with the loop context even when using the <code>timber_set_product()</code> helper function. Turns out the default WooCommerce hooks interfere with the output of the aforementioned function.</p>

<p>One way to get around this is by building your own image calls, that means removing WooCommerce’s default hooks and declare your own template for the HTML to show the image:</p>

<pre><code class="language-twig">{% if post.thumbnail %}
    &lt;img src=&quot;{{ post.thumbnail.src|resize(shop_thumbnail_image_size) }}&quot; /&gt;
{% endif %}
</code></pre>

<p>To remove the default image, add the following to your <code>functions.php</code> file:</p>

<pre><code class="language-php">&lt;?php
remove_action( 'woocommerce_before_shop_loop_item_title', 'woocommerce_template_loop_product_thumbnail' );
</code></pre>

<p>This comes with the added benefit that you’ll have total control over where your image is created in the markup.</p>

			</div>
		</div>
	</article>

</main>



<script src="https://timber.github.io/docs/js/highlight.pack.js" defer></script>
<script src="https://timber.github.io/docs/js/scripts.js?18bf6c2843a868bd886e268277fd2fa2" defer></script>


<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
apiKey: '4907f57b267887b1da360de600656085',
indexName: 'timber',
inputSelector: '#search',
debug: false 
});
</script>

</body>
</html>
