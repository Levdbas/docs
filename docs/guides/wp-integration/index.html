<!DOCTYPE html>
<html lang="en">
<head>
	<title>WordPress Integration</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <link rel="stylesheet" href="https://timber.github.io/docs/css/styles.css">
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,700,700i" rel="stylesheet">
</head>


<body>

<header class="header">
    <a class="logo-link" href="https://timber.github.io/docs/">
        <div id="logo">
            <img src="https://timber.github.io/docs/images/timberlogo.svg" alt="Timber" style="width:105px;height:30px;border:0">
        </div>
    </a>
    <nav class="nav nav--top" id="nav-top">
        <ul>
            <li>
                <a href="http://upstatement.com/timber/"
                   target="_blank" rel="noreferrer noopener">Timber Homepage</a>
            </li>
            <li>
                <a href="http://twig.sensiolabs.org/doc/templates.html"
                   target="_blank" rel="noreferrer noopener">Twig Documentation</a>
            </li>
            <li><a href="http://code.tutsplus.com/series/kick-start-wordpress-development-with-twig--cms-974"
                   target="_blank" rel="noreferrer noopener">Getting Started Tutorials</a>
            </li>
            <li>
                <a href="https://github.com/timber/timber"
                   target="_blank" rel="noreferrer noopener">
                    <img src="https://timber.github.io/docs/images/Github.png" alt="Star on Github" style="width:29px;height:29px;border:0">
                </a>
            </li>
        </ul>
    </nav>
</header>

<aside class="sidebar">
    

    <nav id="nav nav--main">
        <ul class="nav__items nav__items--level-0">
        
        
            <li class="nav__item nav__item--level-0"><a class="nav__link nav__link--level-0" href="/docs/getting-started/">Getting Started</a>
            
                <ul class="nav__items nav__items--level-1">
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/getting-started/setup/">Setup</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/getting-started/themeing/">Themeing</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/getting-started/twig-tools/">Twig Tools</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/getting-started/video-tutorials/">Video Tutorials</a></li>
                
                </ul>
            
            </li>
        
            <li class="nav__item nav__item--level-0 nav__item--current-ancestor"><a class="nav__link nav__link--level-0" href="/docs/guides/">Guides</a>
            
                <ul class="nav__items nav__items--level-1">
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/acf-cookbook/">ACF Cookbook</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/cheatsheet/">Cheatsheet</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/custom-page-templates/">Custom Page Templates</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/debugging/">Debugging</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/escapers/">Escapers</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/extending-timber/">Extending Timber</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/filters/">Filters</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/functions/">Functions</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/cookbook-images/">Image Cookbook</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/internationalization/">Internationalization</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/pagination/">Pagination</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/performance/">Performance</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/routing/">Routing</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/sidebars/">Sidebars</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/template-locations/">Template Locations</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/testing/">Testing</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/cookbook-text/">Text Cookbook</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/cookbook-twig/">Twig Cookbook</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/guides/woocommerce/">WooCommerce</a></li>
                
                    <li class="nav__item nav__item--level-1 nav__item--current"><a class="nav__link nav__link--level-1" href="/docs/guides/wp-integration/">WordPress Integration</a></li>
                
                </ul>
            
            </li>
        
            <li class="nav__item nav__item--level-0"><a class="nav__link nav__link--level-0" href="/docs/reference/">Reference</a>
            
                <ul class="nav__items nav__items--level-1">
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-archives/">Timber\Archives</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-comment/">Timber\Comment</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-helper/">Timber\Helper</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-image/">Timber\Image</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-imagehelper/">Timber\ImageHelper</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-menu/">Timber\Menu</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-menuitem/">Timber\MenuItem</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-pagination/">Timber\Pagination</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-post/">Timber\Post</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-postpreview/">Timber\PostPreview</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-postquery/">Timber\PostQuery</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-site/">Timber\Site</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-term/">Timber\Term</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-texthelper/">Timber\TextHelper</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-theme/">Timber\Theme</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber/">Timber\Timber</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-urlhelper/">Timber\URLHelper</a></li>
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/reference/timber-user/">Timber\User</a></li>
                
                </ul>
            
            </li>
        
            <li class="nav__item nav__item--level-0"><a class="nav__link nav__link--level-0" href="/docs/upgrade-guides/">Upgrade Guides</a>
            
                <ul class="nav__items nav__items--level-1">
                
                    <li class="nav__item nav__item--level-1"><a class="nav__link nav__link--level-1" href="/docs/upgrade-guides/1.0/">Upgrade to 1.0</a></li>
                
                </ul>
            
            </li>
        
        </ul>
    </nav>
</aside>


<main>
    
	<article>
		<h1>WordPress Integration</h1>

		<aside class="toc">
			<h2 class="heading-4 toc__title">Contents of this page</h2>
			<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#the-content">the_content</a></li>
<li><a href="#hooks">Hooks</a></li>
<li><a href="#actions">Actions</a></li>
<li><a href="#filters">Filters</a></li>
<li><a href="#widgets">Widgets</a>
<ul>
<li><a href="#using-timber-inside-your-own-widgets">Using Timber inside your own widgets</a></li>
</ul></li>
<li><a href="#shortcodes">Shortcodes</a>
<ul>
<li><a href="#layouts-with-shortcodes">Layouts with Shortcodes</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
		</aside>

		<div class="content-container">
			<div class="content">
				

<p>Timber plays nice with your existing WordPress setup. You can still use other plugins, etc.</p>

<h2 id="the-content">the_content</h2>

<p>You&rsquo;re probably used to calling <code>the_content()</code> in your theme file. This is good. Before outputting, WordPress will run all the filters and actions that your plugins and themes are using. If you want to get this into your new Timber theme (and you probably do). Call it like this:</p>

<pre><code class="language-twig">&lt;div class=&quot;my-article&quot;&gt;
   {{ post.content }}
&lt;/div&gt;
</code></pre>

<p>This differs from <code>{{ post.post_content }}</code>, which is the raw text stored in your database.</p>

<hr />

<h2 id="hooks">Hooks</h2>

<p>Timber hooks to interact with WordPress use <code>this/style/of_hooks</code> instead of <code>this_style_of_hooks</code>. This matches the same methodology as <a href="http://www.advancedcustomfields.com/resources/#actions">Advanced Custom Fields</a>.</p>

<p>Full documentation to come</p>

<hr />

<h2 id="actions">Actions</h2>

<p>Call them in your Twig template&hellip;</p>

<pre><code class="language-twig">{% do action('my_action') %}
{% do action('my_action_with_args', 'foo', 'bar') %}
</code></pre>

<p>&hellip; in your <code>functions.php</code> file:</p>

<pre><code class="language-php">&lt;?php
add_action('my_action', 'my_function');

function my_function( $context ) {
	// $context stores the template context in case you need to reference it
	echo $context['post']-&gt;post_title; //outputs title of yr post
}
</code></pre>

<pre><code class="language-php">&lt;?php
add_action( 'my_action_with_args', 'my_function_with_args', 10, 2 );

function my_function_with_args( $foo, $bar ){
	echo 'I say ' . $foo . ' and ' . $bar;
}
</code></pre>

<p>You can still get the context object when passing args, it&rsquo;s always the <em>last</em> argument&hellip;</p>

<pre><code class="language-php">&lt;?php
add_action( 'my_action_with_args', 'my_function_with_args', 10, 3 );

function my_function_with_args( $foo, $bar, $context ){
	echo 'I say ' . $foo . ' and ' . $bar;
	echo 'For the post with title ' . $context['post']-&gt;post_title;
}
</code></pre>

<p>Please note the argument count that WordPress requires for <code>add_action</code>.</p>

<hr />

<h2 id="filters">Filters</h2>

<p>Timber already comes with a <a href="http://timber.github.io/timber/#filters">set of useful filters</a>. If you have your own filters that you want to apply, you can use <code>apply_filters</code>.</p>

<pre><code class="language-twig">{{ post.content|apply_filters('my_filter') }}
{{ &quot;my custom string&quot;|apply_filters('my_filter', param1, param2, ...) }}
</code></pre>

<hr />

<h2 id="widgets">Widgets</h2>

<p>Everyone loves widgets!
Of course they do&hellip;</p>

<pre><code class="language-php">&lt;?php
$data['footer_widgets'] = Timber::get_widgets('footer_widgets');
</code></pre>

<p>&hellip;where &lsquo;footer_widgets&rsquo; is the registered name of the widgets you want to get(in twentythirteen these are called <code>sidebar-1</code> and <code>sidebar-2</code> )</p>

<p>Then use it in your template:</p>

<pre><code class="language-twig">{# base.twig #}
&lt;footer&gt;
	{{ footer_widgets }}
&lt;/footer&gt;
</code></pre>

<hr />

<h3 id="using-timber-inside-your-own-widgets">Using Timber inside your own widgets</h3>

<p>You can also use twig templates for your widgets!
Let&rsquo;s imagine we want a widget that shows a random number each time it is rendered.</p>

<p>Inside the widget class, the widget function is used to show the widget:</p>

<pre><code class="language-php">&lt;?php
public function widget($args, $instance) {
	$number = rand();
	Timber::render('random-widget.twig', array('args' =&gt; $args, 'instance' =&gt; $instance, 'number' =&gt; $number));
}
</code></pre>

<p>The corresponding template file <code>random-widget.twig</code> looks like this:</p>

<pre><code class="language-twig">{{ args.before_widget | raw }}
{{ args.before_title | raw }}{{ instance.title | apply_filters('widget_title') }}{{ args.after_title | raw }}

&lt;p&gt;Your magic number is: &lt;strong&gt;{{ number }}&lt;/strong&gt;&lt;/p&gt;

{{ args.after_widget | raw }}
</code></pre>

<p>The raw filter is needed here to embed the widget properly.</p>

<p>You may also want to check if the Timber plugin was loaded before using it:</p>

<pre><code class="language-php">&lt;?php
public function widget( $args, $instance ) {
	if ( ! class_exists( 'Timber' ) ) {
		// if you want to show some error message, this is the right place
		return;
	}
	$number = rand();
	Timber::render( 'random-widget.twig', array( 'args' =&gt; $args, 'instance' =&gt; $instance, 'number' =&gt; $number ) );
}
</code></pre>

<hr />

<h2 id="shortcodes">Shortcodes</h2>

<p>Well, if it works for widgets, why shouldn&rsquo;t it work for shortcodes ?
Of course it does !</p>

<p>Let&rsquo;s implement a <code>[youtube]</code> shorttag which embeds a youtube video.
For the desired usage of <code>[youtube id=xxxx]</code> we only need a few lines of code:</p>

<pre><code class="language-php">&lt;?php
// Should be called from within an init action hook
add_shortcode( 'youtube', 'youtube_shorttag' );

function youtube_shorttag( $atts ) {
	if( isset( $atts['id'] ) ) {
		$id = sanitize_text_field( $atts['id'] );
	} else {
		$id = false;
	}
	
	// This time we use Timber::compile since shorttags should return the code
	return Timber::compile( 'youtube-short.twig', array( 'id' =&gt; $id ) );
}
</code></pre>

<p>In <code>youtube-short.twig</code> we have the following template:</p>

<pre><code class="language-twig">{% if id %}
&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;//www.youtube.com/embed/{{ id }}&quot; frameborder=&quot;0&quot; allowfullscreen&gt;&lt;/iframe&gt;
{% endif %}
</code></pre>

<p>Now, when the YouTube embed code changes, we only need to edit the <code>youtube-short.twig</code> template. No need to search your PHP files for this one particular line.</p>

<h3 id="layouts-with-shortcodes">Layouts with Shortcodes</h3>

<p>Timber and Twig can process your shortcodes by using the <code>{% filter shortcodes %}</code> tag. Let&rsquo;s say you&rsquo;re using a <code>[tab]</code> shortcode, for example:</p>

<pre><code class="language-twig">{% filter shortcodes %}
	[tabs tab1=&quot;Tab 1 title&quot; tab2=&quot;Tab 2 title&quot; layout=&quot;horizontal&quot; backgroundcolor=&quot;&quot; inactivecolor=&quot;&quot;]
		[tab id=1]
			Something something something
		[/tab]

		[tab id=2]
			Tab 2 content here
		[/tab]
	[/tabs]
{% endfilter %}
</code></pre>

			</div>
		</div>
	</article>

</main>



<script src="https://timber.github.io/docs/js/highlight.pack.js" defer></script>
<script src="https://timber.github.io/docs/js/scripts.js" defer></script>

</body>
</html>
