<p>The PostPreview class lets a user modify a post preview/excerpt to their liking.</p><p>It’s designed to be used through the <code>Timber\Post::preview()</code> method. The public methods of this class all return the object itself, which means that this is a <strong>chainable object</strong>. You can change the output of the preview by <strong>adding more methods</strong>.</p><p>By default, the preview will</p><ul><li>have a length of 50 words, which will be forced, even if a longer excerpt is set on the post.</li><li>be stripped of all HTML tags.</li><li>have an ellipsis (…) as the end of the text.</li><li>have a &quot;Read More&quot; link appended.</li></ul><p><strong>Twig</strong></p><pre class="language-twig"><code class="language-twig"><span class="token comment">{# Use default preview #}</span><br><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></span><span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span> <span class="token property">post</span><span class="token punctuation">.</span><span class="token property">preview</span> <span class="token rd"><span class="token punctuation">}}</span></span></span><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="token comment">{# Change the post preview text #}</span><br><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></span><span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span> <span class="token property">post</span><span class="token punctuation">.</span><span class="token property">preview</span><span class="token punctuation">.</span><span class="token property">read_more</span><span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>Continue Reading<span class="token punctuation">'</span></span><span class="token punctuation">)</span> <span class="token rd"><span class="token punctuation">}}</span></span></span><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><span class="token comment">{# Additionally restrict the length to 50 words #}</span><br><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></span><span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span> <span class="token property">post</span><span class="token punctuation">.</span><span class="token property">preview</span><span class="token punctuation">.</span><span class="token property">length</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property">read_more</span><span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>Continue Reading<span class="token punctuation">'</span></span><span class="token punctuation">)</span> <span class="token rd"><span class="token punctuation">}}</span></span></span><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span></code></pre><h2 id="overview">Overview <a class="directLink" href="#overview">#</a></h2><h3 id="methods">Methods <a class="directLink" href="#methods">#</a></h3><table><thead><tr><th>Name</th><th>Type</th><th>Returns/Description</th></tr></thead><tbody><tr><td><a href="#__construct">__construct</a></td><td><code>void</code></td><td></td></tr><tr><td><a href="#__toString">__toString</a></td><td><code>string</code></td><td></td></tr><tr><td><a href="#chars">chars</a></td><td><code>\Timber\PostPreview</code></td><td></td></tr><tr><td><a href="#end">end</a></td><td><code>\Timber\PostPreview</code></td><td></td></tr><tr><td><a href="#force">force</a></td><td><code>\Timber\PostPreview</code></td><td></td></tr><tr><td><a href="#length">length</a></td><td><code>\Timber\PostPreview</code></td><td></td></tr><tr><td><a href="#read_more">read_more</a></td><td><code>\Timber\PostPreview</code></td><td></td></tr><tr><td><a href="#strip">strip</a></td><td><code>\Timber\PostPreview</code></td><td></td></tr></tbody></table><hr><h2 id="class-methods">Class Methods <a class="directLink" href="#class-methods">#</a></h2><h3 id="__construct">__construct <a class="directLink" href="#__construct">#</a></h3><p><code>__construct( \Timber\Post $post )</code></p><p><strong>returns:</strong> <code>void</code></p><p>PostPreview constructor.</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>$post</td><td><code>\Timber\Post</code></td><td>The post to pull the preview from.</td></tr></tbody></table><hr><h3 id="__tostring">__toString <a class="directLink" href="#__tostring">#</a></h3><p><code>__toString( )</code></p><p><strong>returns:</strong> <code>string</code></p><p>Returns the resulting preview.</p><hr><h3 id="chars">chars <a class="directLink" href="#chars">#</a></h3><p><code>chars( bool/int/bool $char_length=false )</code></p><p><strong>returns:</strong> <code>\Timber\PostPreview</code></p><p>Restricts the length of the preview to a certain amount of characters.</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>$char_length</td><td><code>bool/int/bool</code></td><td>The maximum amount of characters for the preview. Default <code>false</code>.</td></tr></tbody></table><p><strong>Twig</strong></p><pre class="language-twig"><code class="language-twig"><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></span><span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span> <span class="token property">post</span><span class="token punctuation">.</span><span class="token property">preview</span><span class="token punctuation">.</span><span class="token property">chars</span><span class="token punctuation">(</span><span class="token number">180</span><span class="token punctuation">)</span> <span class="token rd"><span class="token punctuation">}}</span></span></span><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span></code></pre><hr><h3 id="end">end <a class="directLink" href="#end">#</a></h3><p><code>end( string $end=&quot;&amp;hellip;&quot; )</code></p><p><strong>returns:</strong> <code>\Timber\PostPreview</code></p><p>Defines the text to end the preview with.</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>$end</td><td><code>string</code></td><td>The text for the end of the preview. Default <code>…</code>.</td></tr></tbody></table><p><strong>Twig</strong></p><pre class="language-twig"><code class="language-twig"><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></span><span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span> <span class="token property">post</span><span class="token punctuation">.</span><span class="token property">preview</span><span class="token punctuation">.</span><span class="token property">end</span><span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>… and much more!<span class="token punctuation">'</span></span><span class="token punctuation">)</span> <span class="token rd"><span class="token punctuation">}}</span></span></span><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span></code></pre><hr><h3 id="force">force <a class="directLink" href="#force">#</a></h3><p><code>force( bool $force=true )</code></p><p><strong>returns:</strong> <code>\Timber\PostPreview</code></p><p>Forces preview lengths.</p><p>What happens if your custom post excerpt is longer than the length requested? By default, it will use the full <code>post_excerpt</code>. However, you can set this to <code>true</code> to <em>force</em> your excerpt to be of the desired length.</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>$force</td><td><code>bool</code></td><td>Whether the length of the preview should be forced to the requested length, even if an editor wrote a manual excerpt that is longer than the set length. Default <code>true</code>.</td></tr></tbody></table><p><strong>Twig</strong></p><pre class="language-twig"><code class="language-twig"><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></span><span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span> <span class="token property">post</span><span class="token punctuation">.</span><span class="token property">preview</span><span class="token punctuation">.</span><span class="token property">length</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property">force</span> <span class="token rd"><span class="token punctuation">}}</span></span></span><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span></code></pre><hr><h3 id="length">length <a class="directLink" href="#length">#</a></h3><p><code>length( mixed/int $length=50 )</code></p><p><strong>returns:</strong> <code>\Timber\PostPreview</code></p><p>Restricts the length of the preview to a certain amount of words.</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>$length</td><td><code>mixed/int</code></td><td>The maximum amount of words (not letters) for the preview. Default <code>50</code>.</td></tr></tbody></table><p><strong>Twig</strong></p><pre class="language-twig"><code class="language-twig"><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span></span><span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span> <span class="token property">post</span><span class="token punctuation">.</span><span class="token property">preview</span><span class="token punctuation">.</span><span class="token property">length</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token rd"><span class="token punctuation">}}</span></span></span><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span></code></pre><hr><h3 id="read_more">read_more <a class="directLink" href="#read_more">#</a></h3><p><code>read_more( string $readmore=&quot;Read More&quot; )</code></p><p><strong>returns:</strong> <code>\Timber\PostPreview</code></p><p>Defines the text to be used for the &quot;Read More&quot; link.</p><p>Set this to <code>false</code> to not add a &quot;Read More&quot; link.</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>$readmore</td><td><code>string</code></td><td>Text for the link. Default 'Read More'.</td></tr></tbody></table><hr><h3 id="strip">strip <a class="directLink" href="#strip">#</a></h3><p><code>strip( bool/bool/string $strip=true )</code></p><p><strong>returns:</strong> <code>\Timber\PostPreview</code></p><p>Defines how HTML tags should be stripped from the preview.</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>$strip</td><td><code>bool/bool/string</code></td><td>Whether or how HTML tags in the preview should be stripped. Use <code>true</code> to strip all tags, <code>false</code> for no stripping, or a string for a list of allowed tags (e.g. '<p><a>'). Default <code>true</code>.</a></p></td></tr></tbody></table><hr><h3 id="assemble">assemble <a class="directLink" href="#assemble">#</a></h3><p><code>assemble( string $text, array/bool $readmore_matches, boolean $trimmed )</code></p><p><strong>returns:</strong> <code>void</code></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>$text</td><td><code>string</code></td><td></td></tr><tr><td>$readmore_matches</td><td><code>array/bool</code></td><td></td></tr><tr><td>$trimmed</td><td><code>boolean</code></td><td>was the text trimmed?</td></tr></tbody></table><hr><h3 id="run">run <a class="directLink" href="#run">#</a></h3><p><code>run( )</code></p><p><strong>returns:</strong> <code>void</code></p><hr>