<!doctype html><html lang="en" data-theme="dark"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-126807198-1"></script><script>window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-126807198-1');</script><title>WooCommerce – Timber v1 – Timber Documentation</title><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="docsearch:version" content="v1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3"><link rel="stylesheet" href="/docs/build/css/styles.css?id=c9d85857d742479204d190fd66fabaf1"><link rel="stylesheet" href="/docs/build/css/mobile.css?id=eb03f5e9c806ca82b2fc8d728401461a" media="screen and (max-width: 979px)"><script src="/docs/build/js/app.js?id=4594e1490acc2ce9d471fb2243cbcfce" defer="defer"></script><link rel="icon" href="/docs/build/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon-precomposed" sizes="57x57" href="/docs/build/favicons/apple-touch-icon-57x57.png"><link rel="apple-touch-icon-precomposed" sizes="114x114" href="/docs/build/favicons/apple-touch-icon-114x114.png"><link rel="apple-touch-icon-precomposed" sizes="72x72" href="/docs/build/favicons/apple-touch-icon-72x72.png"><link rel="apple-touch-icon-precomposed" sizes="144x144" href="/docs/build/favicons/apple-touch-icon-144x144.png"><link rel="apple-touch-icon-precomposed" sizes="60x60" href="/docs/build/favicons/apple-touch-icon-60x60.png"><link rel="apple-touch-icon-precomposed" sizes="120x120" href="/docs/build/favicons/apple-touch-icon-120x120.png"><link rel="apple-touch-icon-precomposed" sizes="76x76" href="favicons/apple-touch-icon-76x76.png"><link rel="apple-touch-icon-precomposed" sizes="152x152" href="favicons/apple-touch-icon-152x152.png"><link rel="icon" type="image/png" href="/docs/build/favicons/favicon-196x196.png" sizes="196x196"><link rel="icon" type="image/png" href="/docs/build/favicons/favicon-96x96.png" sizes="96x96"><link rel="icon" type="image/png" href="/docs/build/favicons/favicon-32x32.png" sizes="32x32"><link rel="icon" type="image/png" href="/docs/build/favicons/favicon-16x16.png" sizes="16x16"><link rel="icon" type="image/png" href="/docs/build/favicons/favicon-128.png" sizes="128x128"><meta name="application-name" content="Timber Documentation"><meta name="msapplication-TileColor" content="#FFFFFF"><meta name="msapplication-TileImage" content="/docs/build/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="/docs/build/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="/docs/build/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="/docs/build/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="/docs/build/favicons/mstile-310x310.png"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@TimberWP"><meta name="twitter:title" content="Timber for WordPress Documentation"><meta name="twitter:description" content="Create WordPress themes with beautiful OOP code and the Twig Template Engine"><meta name="twitter:image" content="https://repository-images.githubusercontent.com/7413451/06c62480-b95c-11ea-8b35-b5dd97d070f1"></head><body><header class="header"><div class="logoContainer"><a href="/docs/"><img src="/docs/build/img/timber-logo.svg" alt="Timber Logo" style="width: 105px; height: 30px; border: 0" role="img"></a></div><div class="search"><div id="docsearch"></div></div><nav class="navTop" id="nav-top"><ul><li><a href="https://upstatement.com/timber/" target="_blank" rel="noreferrer noopener">About Timber</a></li><li><a href="https://twig.symfony.com/doc/" target="_blank" rel="noreferrer noopener">Twig Docs</a></li><li><a href="https://opencollective.com/timber" target="_blank" rel="noreferrer noopener">Sponsor us</a></li><li><a href="https://github.com/timber/timber" target="_blank" rel="noreferrer noopener"><img src="/docs/build/img/github.png" alt="Star on Github" style="width: 29px; height: 29px; border: 0"></a></li></ul></nav><button class="navMobileToggle js-menu-open" type="button" id="nav-mobile-toggle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 34"><path d="M45.6,19.43H2.4a2.43,2.43,0,0,1,0-4.86H45.6a2.43,2.43,0,0,1,0,4.86Z"/><path d="M45.6,4.86H2.4A2.41,2.41,0,0,1,0,2.43,2.41,2.41,0,0,1,2.4,0H45.6A2.41,2.41,0,0,1,48,2.43,2.41,2.41,0,0,1,45.6,4.86Z"/><path d="M45.6,34H2.4a2.43,2.43,0,0,1,0-4.86H45.6a2.43,2.43,0,0,1,0,4.86Z"/></svg> <span class="sr-only">Menu</span></button></header><div class="wrapper"><aside class="sidebar slideup-menu" id="sidebar" data-turbolinks-keep-scroll-position><button class="navClose js-menu-close" type="button"><div class="navClose-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M3.43,48A3.43,3.43,0,0,1,1,42.15L42.15,1A3.43,3.43,0,1,1,47,5.85L5.85,47A3.4,3.4,0,0,1,3.43,48Z"/><path d="M44.57,48a3.4,3.4,0,0,1-2.42-1L1,5.85A3.43,3.43,0,0,1,5.85,1L47,42.15A3.43,3.43,0,0,1,44.57,48Z"/></svg></div><span class="sr-only">Close Menu</span></button><nav class="navVersions"><ul><li><a href="/docs/v2/">v2.x</a></li><li><a href="/docs/v1/" class="is-current">v1.x</a></li></ul></nav><nav id="nav-main" class="navMain"><ul class="navMain-sections"><li class="navMain-section"><h3 class="navMain-title">Getting Started</h3><ul class="navMain-items"><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/getting-started/setup/">Setup</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/getting-started/switch-to-composer/">Switch to Composer</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/getting-started/theming/">Theming</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/getting-started/twig-tools/">Twig Tools</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/getting-started/video-tutorials/">Video Tutorials</a></li></ul></li><li class="navMain-section"><h3 class="navMain-title navMain-sectionTitle">Guides</h3><ul class="navMain-items"><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/guides/acf-cookbook/">ACF Cookbook</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/guides/gutenberg/">Block Editor (Gutenberg)</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/guides/cheatsheet/">Cheatsheet</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/guides/comments/">Comments</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/guides/custom-page-templates/">Custom Page Templates</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/guides/debugging/">Debugging</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/guides/escapers/">Escapers</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/guides/extending-timber/">Extending Timber</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/guides/filters/">Filters</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/guides/functions/">Functions</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/guides/hosts-servers/">Hosts &amp; Servers</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/guides/cookbook-images/">Image Cookbook</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/guides/internationalization/">Internationalization</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/guides/menus/">Menus</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/guides/pagination/">Pagination</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/guides/performance/">Performance/Caching</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/guides/routing/">Routing</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/guides/sidebars/">Sidebars</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/guides/template-locations/">Template Locations</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/guides/testing/">Testing</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/guides/cookbook-text/">Text Cookbook</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/guides/cookbook-twig/">Twig Cookbook</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/guides/woocommerce/" aria-current>WooCommerce</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/guides/wp-integration/">WordPress Integration</a></li></ul></li><li class="navMain-section"><h3 class="navMain-title">Reference</h3><ul class="navMain-items"><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/reference/timber-archives/">Timber&#92;Archives</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/reference/timber-comment/">Timber&#92;Comment</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/reference/timber-helper/">Timber&#92;Helper</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/reference/timber-image/">Timber&#92;Image</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/reference/timber-imagehelper/">Timber&#92;ImageHelper</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/reference/timber-menu/">Timber&#92;Menu</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/reference/timber-menuitem/">Timber&#92;MenuItem</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/reference/timber-pagination/">Timber&#92;Pagination</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/reference/timber-post/">Timber&#92;Post</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/reference/timber-postpreview/">Timber&#92;PostPreview</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/reference/timber-postquery/">Timber&#92;PostQuery</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/reference/timber-site/">Timber&#92;Site</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/reference/timber-term/">Timber&#92;Term</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/reference/timber-texthelper/">Timber&#92;TextHelper</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/reference/timber-theme/">Timber&#92;Theme</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/reference/timber/">Timber&#92;Timber</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/reference/timber-urlhelper/">Timber&#92;URLHelper</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/reference/timber-user/">Timber&#92;User</a></li></ul></li><li class="navMain-section"><ul class="navMain-items"><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v1/upgrade-guides/1.0/">Upgrade to 1.0</a></li></ul></li></ul></nav></aside><div class="main-container"><div class="version-note"><p>You are reading the documentation for <strong>Timber v1.x</strong>. Switch to the documentation for Timber <a href="/docs/v2/">v2.x</a>.</p></div><main><article><h1>WooCommerce</h1><aside><h2 class="heading-small">On this page</h2><nav class="toc"><ol><li><a href="#point-of-entry-main-woocommerce-php-file">Point of entry - main WooCommerce PHP file</a></li><li><a href="#archives">Archives</a></li><li><a href="#single-product">Single Product</a></li><li><a href="#tease-product">Tease Product</a></li></ol></nav></aside><div class="content"><h2 id="point-of-entry-main-woocommerce-php-file" tabindex="-1">Point of entry - main WooCommerce PHP file <a class="directLink" href="#point-of-entry-main-woocommerce-php-file">#</a></h2><p>The first step to get your WooCommerce project integrated with Timber is declaring WooCommerce support in your theme’s <strong>functions.php</strong> file like so:</p><pre class="language-php"><code class="language-php"><span class="token keyword">function</span> <span class="token function-definition function">theme_add_woocommerce_support</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token function">add_theme_support</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'woocommerce'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token function">add_action</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'after_setup_theme'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'theme_add_woocommerce_support'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>For more information about how you can enable or disable features and change settings through theme support, refer to the <a href="https://docs.woocommerce.com/document/woocommerce-theme-developer-handbook">WooCommerce Theme Developer Handbook</a>.</p><p>Once that’s done you can start integrating WooCommerce into your theme by creating a file named <strong>woocommerce.php</strong> in the root of your theme. That will establish the context and data to be passed to your Twig files:</p><pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><br><br><span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span> <span class="token function">class_exists</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'Timber'</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">echo</span> <span class="token string single-quoted-string">'Timber not activated. Make sure you activate the plugin in &lt;a href="/wp-admin/plugins.php#timber">/wp-admin/plugins.php&lt;/a>'</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">return</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token variable">$context</span>            <span class="token operator">=</span> <span class="token class-name static-context">Timber</span><span class="token operator">::</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token variable">$context</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'sidebar'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name static-context">Timber</span><span class="token operator">::</span><span class="token function">get_widgets</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'shop-sidebar'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token function">is_singular</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'product'</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token variable">$context</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'post'</span><span class="token punctuation">]</span>    <span class="token operator">=</span> <span class="token class-name static-context">Timber</span><span class="token operator">::</span><span class="token function">get_post</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token variable">$product</span>            <span class="token operator">=</span> <span class="token function">wc_get_product</span><span class="token punctuation">(</span> <span class="token variable">$context</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'post'</span><span class="token punctuation">]</span><span class="token operator">-></span><span class="token constant">ID</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token variable">$context</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'product'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$product</span><span class="token punctuation">;</span><br><br>    <span class="token comment">// Get related products</span><br>    <span class="token variable">$related_limit</span>               <span class="token operator">=</span> <span class="token function">wc_get_loop_prop</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'columns'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token variable">$related_ids</span>                 <span class="token operator">=</span> <span class="token function">wc_get_related_products</span><span class="token punctuation">(</span> <span class="token variable">$context</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'post'</span><span class="token punctuation">]</span><span class="token operator">-></span><span class="token property">id</span><span class="token punctuation">,</span> <span class="token variable">$related_limit</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token variable">$context</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'related_products'</span><span class="token punctuation">]</span> <span class="token operator">=</span>  <span class="token class-name static-context">Timber</span><span class="token operator">::</span><span class="token function">get_posts</span><span class="token punctuation">(</span> <span class="token variable">$related_ids</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token comment">// Restore the context and loop back to the main query loop.</span><br>    <span class="token function">wp_reset_postdata</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token class-name static-context">Timber</span><span class="token operator">::</span><span class="token function">render</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'views/woo/single-product.twig'</span><span class="token punctuation">,</span> <span class="token variable">$context</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>    <span class="token variable">$posts</span> <span class="token operator">=</span> <span class="token class-name static-context">Timber</span><span class="token operator">::</span><span class="token function">get_posts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token variable">$context</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'products'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$posts</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token function">is_product_category</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token variable">$queried_object</span> <span class="token operator">=</span> <span class="token function">get_queried_object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token variable">$term_id</span> <span class="token operator">=</span> <span class="token variable">$queried_object</span><span class="token operator">-></span><span class="token property">term_id</span><span class="token punctuation">;</span><br>        <span class="token variable">$context</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'category'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">get_term</span><span class="token punctuation">(</span> <span class="token variable">$term_id</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'product_cat'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token variable">$context</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'title'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">single_term_title</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">''</span><span class="token punctuation">,</span> <span class="token constant boolean">false</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token class-name static-context">Timber</span><span class="token operator">::</span><span class="token function">render</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'views/woo/archive.twig'</span><span class="token punctuation">,</span> <span class="token variable">$context</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></span></code></pre><p>You will now need the two Twig files loaded from <code>woocommerce.php</code>: <code>views/woo/single-product.twig</code> and <code>views/woo/archive.twig</code>.</p><h2 id="archives" tabindex="-1">Archives <a class="directLink" href="#archives">#</a></h2><p>Create a Twig file according to the location asked by the above file, in this example that would be <code>views/woo/archive.twig</code>:</p><pre class="language-twig"><code class="language-twig"><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">extends</span> <span class="token string"><span class="token punctuation">'</span>base.twig<span class="token punctuation">'</span></span> <span class="token delimiter punctuation">%}</span></span><br><br><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">block</span> content <span class="token delimiter punctuation">%}</span></span><br><br>    <span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">do</span> action<span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>woocommerce_before_main_content<span class="token punctuation">'</span></span><span class="token punctuation">)</span> <span class="token delimiter punctuation">%}</span></span><br><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>before-shop-loop<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>        <span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">do</span> action<span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>woocommerce_before_shop_loop<span class="token punctuation">'</span></span><span class="token punctuation">)</span> <span class="token delimiter punctuation">%}</span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>loop<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>        <span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">for</span> post <span class="token operator">in</span> products <span class="token delimiter punctuation">%}</span></span><br>            <span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">include</span> <span class="token punctuation">[</span><span class="token string"><span class="token punctuation">"</span>partials/tease-product.twig<span class="token punctuation">"</span></span><span class="token punctuation">]</span> <span class="token delimiter punctuation">%}</span></span><br>        <span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">endfor</span> <span class="token delimiter punctuation">%}</span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br><br>    <span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">do</span> action<span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>woocommerce_after_shop_loop<span class="token punctuation">'</span></span><span class="token punctuation">)</span> <span class="token delimiter punctuation">%}</span></span><br>    <span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">do</span> action<span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>woocommerce_after_main_content<span class="token punctuation">'</span></span><span class="token punctuation">)</span> <span class="token delimiter punctuation">%}</span></span><br><br><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">endblock</span>  <span class="token delimiter punctuation">%}</span></span></code></pre><p>You’ll notice the inclusion of several of WooCommerce’s default hooks, which you’ll need to keep the integration seamless and allow any WooCommerce extension plugin to still work.</p><p>Next, we’ll take care of the single product view.</p><h2 id="single-product" tabindex="-1">Single Product <a class="directLink" href="#single-product">#</a></h2><p>Create a Twig file according to the location asked by the above file, in this example that would be <code>views/woo/single-product.twig</code>:</p><pre class="language-twig"><code class="language-twig"><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">extends</span> <span class="token string"><span class="token punctuation">"</span>base.twig<span class="token punctuation">"</span></span> <span class="token delimiter punctuation">%}</span></span><br><br><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">block</span> content <span class="token delimiter punctuation">%}</span></span><br><br>    <span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">do</span> action<span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>woocommerce_before_single_product<span class="token punctuation">'</span></span><span class="token punctuation">)</span> <span class="token delimiter punctuation">%}</span></span><br><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span> <span class="token attr-name">itemscope</span> <span class="token attr-name">itemtype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://schema.org/Product<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>single-product-details <span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> post<span class="token punctuation">.</span>class <span class="token delimiter punctuation">}}</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>entry-images<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>            <span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">do</span> action<span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>woocommerce_before_single_product_summary<span class="token punctuation">'</span></span><span class="token punctuation">)</span> <span class="token delimiter punctuation">%}</span></span><br><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> post<span class="token punctuation">.</span>thumbnail<span class="token punctuation">.</span>src<span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>shop_single<span class="token punctuation">'</span></span><span class="token punctuation">)</span> <span class="token delimiter punctuation">}}</span></span><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>summary entry-summary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>            <span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">do</span> action<span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>woocommerce_single_product_summary<span class="token punctuation">'</span></span><span class="token punctuation">)</span> <span class="token delimiter punctuation">%}</span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br><br>        <span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">do</span> action<span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>woocommerce_after_single_product_summary<span class="token punctuation">'</span></span><span class="token punctuation">)</span> <span class="token delimiter punctuation">%}</span></span><br><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">itemprop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> post<span class="token punctuation">.</span>link <span class="token delimiter punctuation">}}</span></span><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">></span></span><br><br>    <span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">include</span> <span class="token punctuation">[</span><span class="token string"><span class="token punctuation">"</span>partials/tease-product.twig<span class="token punctuation">"</span></span><span class="token punctuation">]</span> with <span class="token punctuation">{</span> products<span class="token punctuation">:</span> related_products <span class="token punctuation">}</span> <span class="token delimiter punctuation">%}</span></span><br><br>    <span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">do</span> action<span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>woocommerce_after_single_product<span class="token punctuation">'</span></span><span class="token punctuation">)</span> <span class="token delimiter punctuation">%}</span></span><br><br><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">endblock</span>  <span class="token delimiter punctuation">%}</span></span></code></pre><p>Again we are keeping things simple by using WooCommerce’s default hooks. If you need to override the output of any of those hooks, my advice would be to remove and add the relevant actions using PHP, keeping your upgrade path simple.</p><p>If you wanna use the same <code>tease-product.twig</code> output as your related products, you have to remove the default related-products from theme, add the following to your <code>functions.php</code> file: <code>remove_action( 'woocommerce_after_single_product_summary', 'woocommerce_output_related_products', 20 );</code></p><p>Finally, we’ll need to create a teaser file for products in loops. Considering the code above that would be <code>views/partials/tease-product.twig</code>:</p><h2 id="tease-product" tabindex="-1">Tease Product <a class="directLink" href="#tease-product">#</a></h2><pre class="language-twig"><code class="language-twig"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span> <span class="token attr-name"><span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> fn<span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>post_class<span class="token punctuation">'</span></span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string"><span class="token punctuation">'</span>$classes<span class="token punctuation">'</span></span><span class="token punctuation">,</span> <span class="token string"><span class="token punctuation">'</span>entry<span class="token punctuation">'</span></span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token delimiter punctuation">}}</span></span></span><span class="token punctuation">></span></span><br><br>    <span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> fn<span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>timber_set_product<span class="token punctuation">'</span></span><span class="token punctuation">,</span> post<span class="token punctuation">)</span> <span class="token delimiter punctuation">}}</span></span><br><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>media<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br><br>        <span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">if</span> showthumb <span class="token delimiter punctuation">%}</span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>media-figure <span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">if</span> <span class="token operator">not</span> post<span class="token punctuation">.</span>thumbnail <span class="token delimiter punctuation">%}</span></span>placeholder<span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">endif</span> <span class="token delimiter punctuation">%}</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> post<span class="token punctuation">.</span>link <span class="token delimiter punctuation">}}</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>                    <span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">if</span> post<span class="token punctuation">.</span>thumbnail <span class="token delimiter punctuation">%}</span></span><br>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> post<span class="token punctuation">.</span>thumbnail<span class="token punctuation">.</span>src<span class="token operator">|</span>resize<span class="token punctuation">(</span>post_thumb_size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> post_thumb_size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token delimiter punctuation">}}</span></span><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>                    <span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">else</span> <span class="token delimiter punctuation">%}</span></span><br>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>thumb-placeholder<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>icon-camera<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>                    <span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">endif</span> <span class="token delimiter punctuation">%}</span></span><br>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>        <span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">endif</span> <span class="token delimiter punctuation">%}</span></span><br><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>media-content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br><br>            <span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">do</span> action<span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>woocommerce_before_shop_loop_item_title<span class="token punctuation">'</span></span><span class="token punctuation">)</span> <span class="token delimiter punctuation">%}</span></span><br><br>            <span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">if</span> post<span class="token punctuation">.</span>title <span class="token delimiter punctuation">%}</span></span><br>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>entry-title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> post<span class="token punctuation">.</span>link <span class="token delimiter punctuation">}}</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> post<span class="token punctuation">.</span>title <span class="token delimiter punctuation">}}</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><br>            <span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">else</span> <span class="token delimiter punctuation">%}</span></span><br>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>entry-title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> post<span class="token punctuation">.</span>link <span class="token delimiter punctuation">}}</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> fn<span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>the_title<span class="token punctuation">'</span></span><span class="token punctuation">)</span> <span class="token delimiter punctuation">}}</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><br>            <span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">endif</span> <span class="token delimiter punctuation">%}</span></span><br><br>            <span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">do</span> action<span class="token punctuation">(</span> <span class="token string"><span class="token punctuation">'</span>woocommerce_after_shop_loop_item_title<span class="token punctuation">'</span></span> <span class="token punctuation">)</span> <span class="token delimiter punctuation">%}</span></span><br>            <span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">do</span> action<span class="token punctuation">(</span> <span class="token string"><span class="token punctuation">'</span>woocommerce_after_shop_loop_item<span class="token punctuation">'</span></span> <span class="token punctuation">)</span> <span class="token delimiter punctuation">%}</span></span><br><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">></span></span></code></pre><p>This should all sound familiar by now, except for one line:</p><pre class="language-twig"><code class="language-twig"><span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> fn<span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>timber_set_product<span class="token punctuation">'</span></span><span class="token punctuation">,</span> post<span class="token punctuation">)</span> <span class="token delimiter punctuation">}}</span></span></code></pre><p>For some reason, products in the loop don’t get the right context by default. This line will call the following function that you need to add somewhere in your <code>functions.php</code> file:</p><pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><br><span class="token keyword">function</span> <span class="token function-definition function">timber_set_product</span><span class="token punctuation">(</span> <span class="token variable">$post</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">global</span> <span class="token variable">$product</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token function">is_woocommerce</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token variable">$product</span> <span class="token operator">=</span> <span class="token function">wc_get_product</span><span class="token punctuation">(</span> <span class="token variable">$post</span><span class="token operator">-></span><span class="token constant">ID</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></span></code></pre><p>Without this, some elements of the listed products would show the same information as the first product in the loop. If you see an error like <code>Warning: call_user_func_array() expects parameter 1 to be a valid callback, no array or string given</code>, this is your problem.</p><p><em>Note:</em> Some users reported issues with the loop context even when using the <code>timber_set_product()</code> helper function. Turns out the default WooCommerce hooks interfere with the output of the aforementioned function.</p><p>One way to get around this is by building your own image calls, that means removing WooCommerce’s default hooks and declare your own template for the HTML to show the image:</p><pre class="language-twig"><code class="language-twig"><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">if</span> post<span class="token punctuation">.</span>thumbnail <span class="token delimiter punctuation">%}</span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> post<span class="token punctuation">.</span>thumbnail<span class="token punctuation">.</span>src<span class="token operator">|</span>resize<span class="token punctuation">(</span>shop_thumbnail_image_size<span class="token punctuation">)</span> <span class="token delimiter punctuation">}}</span></span><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">endif</span> <span class="token delimiter punctuation">%}</span></span></code></pre><p>To remove the default image, add the following to your <code>functions.php</code> file:</p><pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><br><span class="token function">remove_action</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'woocommerce_before_shop_loop_item_title'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'woocommerce_template_loop_product_thumbnail'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><p>This comes with the added benefit that you’ll have total control over where your image is created in the markup.</p></div></article></main></div></div><script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script><script>docsearch({
    appId: '7REN4GR6X4',
    apiKey: '9acbf22ef9a9b117a0f9ba50bd2f4280',
    /**
     * Timber config.
     *
     * @link https://github.com/algolia/docsearch-configs/blob/master/configs/timber.json
     */
    indexName: 'timber',
    container: '#docsearch',
    /**
     * Filter for different doc versions.
     *
     * @link https://www.algolia.com/doc/api-reference/api-parameters/facetFilters/
     */
    searchParameters: {
      facetFilters: ['version:v1']
    },
    // Set debug to true if you want to inspect the dropdown.
    // debug: true
  })</script></body></html>