<!doctype html><html lang="en" data-theme="dark"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-126807198-1"></script><script>window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-126807198-1');</script><title>Class Maps â€“ Timber Documentation</title><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="robots" content="noindex"><meta name="docsearch:version" content="v2"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3"><link rel="stylesheet" href="/docs/build/css/styles.css?id=1e683e562ab476927d77e6b9965cdd63"><link rel="stylesheet" href="/docs/build/css/mobile.css?id=1c0c81d39ce0cbfc4cbdf7f7c93c61db" media="screen and (max-width: 979px)"><script src="/docs/build/js/app.js?id=1bda1fde1ad4728c63bb3cc0cb17c53a" defer="defer"></script><link rel="icon" href="/docs/build/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon-precomposed" sizes="57x57" href="/docs/build/favicons/apple-touch-icon-57x57.png"><link rel="apple-touch-icon-precomposed" sizes="114x114" href="/docs/build/favicons/apple-touch-icon-114x114.png"><link rel="apple-touch-icon-precomposed" sizes="72x72" href="/docs/build/favicons/apple-touch-icon-72x72.png"><link rel="apple-touch-icon-precomposed" sizes="144x144" href="/docs/build/favicons/apple-touch-icon-144x144.png"><link rel="apple-touch-icon-precomposed" sizes="60x60" href="/docs/build/favicons/apple-touch-icon-60x60.png"><link rel="apple-touch-icon-precomposed" sizes="120x120" href="/docs/build/favicons/apple-touch-icon-120x120.png"><link rel="apple-touch-icon-precomposed" sizes="76x76" href="favicons/apple-touch-icon-76x76.png"><link rel="apple-touch-icon-precomposed" sizes="152x152" href="favicons/apple-touch-icon-152x152.png"><link rel="icon" type="image/png" href="/docs/build/favicons/favicon-196x196.png" sizes="196x196"><link rel="icon" type="image/png" href="/docs/build/favicons/favicon-96x96.png" sizes="96x96"><link rel="icon" type="image/png" href="/docs/build/favicons/favicon-32x32.png" sizes="32x32"><link rel="icon" type="image/png" href="/docs/build/favicons/favicon-16x16.png" sizes="16x16"><link rel="icon" type="image/png" href="/docs/build/favicons/favicon-128.png" sizes="128x128"><meta name="application-name" content="Timber Documentation"><meta name="msapplication-TileColor" content="#FFFFFF"><meta name="msapplication-TileImage" content="/docs/build/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="/docs/build/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="/docs/build/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="/docs/build/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="/docs/build/favicons/mstile-310x310.png"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@TimberWP"><meta name="twitter:title" content="Timber for WordPress Documentation"><meta name="twitter:description" content="Create WordPress themes with beautiful OOP code and the Twig Template Engine"><meta name="twitter:image" content="https://repository-images.githubusercontent.com/7413451/06c62480-b95c-11ea-8b35-b5dd97d070f1"></head><body><header class="header"><div class="logoContainer"><a href="/docs/"><img src="/docs/build/img/timber-logo.svg" alt="Timber Logo" style="width: 105px; height: 30px; border: 0" role="img"></a></div><div class="search"><div id="docsearch"></div></div><nav class="navTop" id="nav-top"><ul><li><a href="http://upstatement.com/timber/" target="_blank" rel="noreferrer noopener">About Timber</a></li><li><a href="http://twig.sensiolabs.org/doc/templates.html" target="_blank" rel="noreferrer noopener">Twig Docs</a></li><li><a href="https://github.com/timber/timber" target="_blank" rel="noreferrer noopener"><img src="/docs/build/img/github.png" alt="Star on Github" style="width: 29px; height: 29px; border: 0"></a></li></ul></nav><button class="navMobileToggle js-menu-open" type="button" id="nav-mobile-toggle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 34"><path d="M45.6,19.43H2.4a2.43,2.43,0,0,1,0-4.86H45.6a2.43,2.43,0,0,1,0,4.86Z"/><path d="M45.6,4.86H2.4A2.41,2.41,0,0,1,0,2.43,2.41,2.41,0,0,1,2.4,0H45.6A2.41,2.41,0,0,1,48,2.43,2.41,2.41,0,0,1,45.6,4.86Z"/><path d="M45.6,34H2.4a2.43,2.43,0,0,1,0-4.86H45.6a2.43,2.43,0,0,1,0,4.86Z"/></svg> <span class="sr-only">Menu</span></button></header><div class="wrapper"><aside class="sidebar slideup-menu" id="sidebar" data-turbolinks-keep-scroll-position><button class="navClose js-menu-close" type="button"><div class="navClose-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M3.43,48A3.43,3.43,0,0,1,1,42.15L42.15,1A3.43,3.43,0,1,1,47,5.85L5.85,47A3.4,3.4,0,0,1,3.43,48Z"/><path d="M44.57,48a3.4,3.4,0,0,1-2.42-1L1,5.85A3.43,3.43,0,0,1,5.85,1L47,42.15A3.43,3.43,0,0,1,44.57,48Z"/></svg></div><span class="sr-only">Close Menu</span></button><nav class="navVersions"><ul><li><a href="/docs/">v1.0</a></li><li><a href="/docs/v2" class="is-current">v2.0 DEV</a></li></ul></nav><nav id="nav-main" class="navMain"><ul class="navMain-sections"><li class="navMain-section"><h3 class="navMain-title">Installation</h3><ul class="navMain-items"><li class="navMain-item" data-order="10"><a class="navMain-link" href="/docs/v2/installation/">Installation</a></li><li class="navMain-item" data-order="30"><a class="navMain-link" href="/docs/v2/installation/manage-timber-with-composer/">Managing Timber with Composer</a></li></ul></li><li class="navMain-section"><h3 class="navMain-title">Getting Started</h3><ul class="navMain-items"><li class="navMain-item" data-order="100"><a class="navMain-link" href="/docs/v2/getting-started/introduction/">Introduction</a></li><li class="navMain-item" data-order="200"><a class="navMain-link" href="/docs/v2/getting-started/template-inheritance-and-includes/">Template inheritance and includes</a></li><li class="navMain-item" data-order="300"><a class="navMain-link" href="/docs/v2/getting-started/a-single-post/">A single post</a></li><li class="navMain-item" data-order="400"><a class="navMain-link" href="/docs/v2/getting-started/a-post-archive/">A post archive</a></li></ul></li><li class="navMain-section"><h3 class="navMain-title navMain-sectionTitle">Guides</h3><ul class="navMain-items"><li class="navMain-item" data-order="50"><a class="navMain-link" href="/docs/v2/guides/context/">Context</a></li><li class="navMain-item" data-order="75"><a class="navMain-link" href="/docs/v2/guides/template-locations/">Template Locations</a></li><li class="navMain-item" data-order="110"><a class="navMain-link" href="/docs/v2/guides/posts/">Posts</a></li><li class="navMain-item" data-order="120"><a class="navMain-link" href="/docs/v2/guides/terms/">Terms</a></li><li class="navMain-item" data-order="130"><a class="navMain-link" href="/docs/v2/guides/users/">Users</a></li><li class="navMain-item" data-order="140"><a class="navMain-link" href="/docs/v2/guides/comments/">Comments</a></li><li class="navMain-item" data-order="150"><a class="navMain-link" href="/docs/v2/guides/menus/">Menus</a></li><li class="navMain-item" data-order="160"><a class="navMain-link" href="/docs/v2/guides/widgets/">Widgets</a></li><li class="navMain-item" data-order="170"><a class="navMain-link" href="/docs/v2/guides/shortcodes/">Shortcodes</a></li><li class="navMain-item" data-order="200"><a class="navMain-link" href="/docs/v2/guides/twig/">Twig</a></li><li class="navMain-item" data-order="220"><a class="navMain-link" href="/docs/v2/guides/twig-filters/">Twig filters</a></li><li class="navMain-item" data-order="300"><a class="navMain-link" href="/docs/v2/guides/cookbook-text/">Text Cookbook</a></li><li class="navMain-item" data-order="400"><a class="navMain-link" href="/docs/v2/guides/escaping/">Escaping</a></li><li class="navMain-item" data-order="500"><a class="navMain-link" href="/docs/v2/guides/custom-page-templates/">Custom Page Templates</a></li><li class="navMain-item" data-order="600"><a class="navMain-link" href="/docs/v2/guides/custom-fields/">Custom Fields</a></li><li class="navMain-item" data-order="800"><a class="navMain-link" href="/docs/v2/guides/functions/">Functions</a></li><li class="navMain-item" data-order="1000"><a class="navMain-link" href="/docs/v2/guides/cookbook-images/">Image Cookbook</a></li><li class="navMain-item" data-order="1100"><a class="navMain-link" href="/docs/v2/guides/pagination/">Pagination</a></li><li class="navMain-item" data-order="1200"><a class="navMain-link" href="/docs/v2/guides/sidebars/">Sidebars</a></li><li class="navMain-item" data-order="1300"><a class="navMain-link" href="/docs/v2/guides/performance/">Performance/Caching</a></li><li class="navMain-item" data-order="1350"><a class="navMain-link" href="/docs/v2/guides/date-time/">Date/Time in Timber</a></li><li class="navMain-item" data-order="1400"><a class="navMain-link" href="/docs/v2/guides/internationalization/">Internationalization</a></li><li class="navMain-item" data-order="1500"><a class="navMain-link" href="/docs/v2/guides/cheatsheet/">Cheatsheet</a></li><li class="navMain-item" data-order="1550"><a class="navMain-link" href="/docs/v2/guides/gutenberg/">Block Editor (Gutenberg)</a></li><li class="navMain-item" data-order="1600"><a class="navMain-link" href="/docs/v2/guides/extending-timber/">Extending Timber</a></li><li class="navMain-item" data-order="1650"><a class="navMain-link" href="/docs/v2/guides/extending-twig/">Extending Timber</a></li><li class="navMain-item" data-order="1650"><a class="navMain-link" href="/docs/v2/guides/class-maps/" aria-current>Class Maps</a></li><li class="navMain-item" data-order="1700"><a class="navMain-link" href="/docs/v2/guides/hosts-servers/">Hosts &amp; Servers</a></li><li class="navMain-item" data-order="1800"><a class="navMain-link" href="/docs/v2/guides/debugging/">Debugging</a></li><li class="navMain-item" data-order="1900"><a class="navMain-link" href="/docs/v2/guides/testing/">Automated Testing</a></li><li class="navMain-item" data-order="2000"><a class="navMain-link" href="/docs/v2/guides/routing/">Routing</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/guides/custom-integrations/">Custom Integrations</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/guides/woocommerce/">WooCommerce</a></li></ul></li><li class="navMain-section"><h3 class="navMain-title">Reference</h3><ul class="navMain-items"><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-archives/">Archives</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-attachment/">Attachment</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-comment/">Comment</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-datetimehelper/">DateTimeHelper</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-image/">Image</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-imagehelper/">ImageHelper</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-menu/">Menu</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-menuitem/">MenuItem</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-pagination/">Pagination</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-pathhelper/">PathHelper</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-post/">Post</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-postarrayobject/">PostArrayObject</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-postcollection/">PostCollection</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-postexcerpt/">PostExcerpt</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-postquery/">PostQuery</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-site/">Site</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-term/">Term</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-texthelper/">TextHelper</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-theme/">Theme</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-timber/">Timber</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-urlhelper/">URLHelper</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-user/">User</a></li></ul></li><li class="navMain-section"><h3 class="navMain-title">Hooks</h3><ul class="navMain-items"><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/hooks/actions/">Action Hooks</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/hooks/filters/">Filter Hooks</a></li></ul></li><li class="navMain-section"><h3 class="navMain-title">Integrations</h3><ul class="navMain-items"><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/integrations/advanced-custom-fields/">Advanced Custom Fields</a></li></ul></li><li class="navMain-section"><h3 class="navMain-title">Upgrade Guides</h3><ul class="navMain-items"><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/upgrade-guides/1.0/">Upgrade to 1.0</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/upgrade-guides/2.0/">Upgrade to 2.0</a></li></ul></li><li class="navMain-section"><h3 class="navMain-title">Contributing</h3><ul class="navMain-items"><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/contributing/">Contributing to Timber</a></li></ul></li></ul></nav></aside><main><div class="globalCallout"><h2>Version 2 ðŸ‘‹</h2><p>Youâ€™re looking at the documentation for version 2 of Timber, which is <strong>still in development</strong>. You canâ€™t use it yet, but you may have a look at the <a href="https://timber.github.io/docs/v2/upgrade-guides/2.0/">upcoming changes</a>.</p><p>Follow us on <a href="https://twitter.com/TimberWP">Twitter</a> or start <a href="https://help.github.com/en/enterprise/2.15/user/articles/watching-and-unwatching-repositories#watching-a-single-repository">watching new releases</a> of our <a href="https://github.com/timber/timber/">GitHub repository</a> to be notified about a version you can use.</p></div><article><h1>Class Maps</h1><aside><h2 class="heading-small">On this page</h2><nav class="toc"><ol><li><a href="#the-post-class-map">The Post Class Map</a></li><li><a href="#the-term-class-map">The Term Class Map</a></li><li><a href="#the-comment-class-map">The Comment Class Map</a></li><li><a href="#the-menu-class-map">The Menu Class Map</a></li><li><a href="#the-menuitem-class-filter">The MenuItem class filter</a></li><li><a href="#the-pages-menu-class-map">The Pages Menu Class Map</a></li><li><a href="#the-user-class-filter">The User class filter</a></li></ol></nav></aside><div class="content"><p>The Class Map is the central hub for Timber to select the right PHP class for post or term objects. Whenever you want to extend existing Timber classes with your custom classes, youâ€™ll have to register them through a Class Map so that Timber will know when to use it.</p><p>There are several different Class Maps in Timber:</p><ul><li><code>timber/post/classmap</code> for posts</li><li><code>timber/term/classmap</code> for terms</li><li><code>timber/comment/classmap</code> for comments</li><li><code>timber/menu/classmap</code> and <code>timber/menu/class</code> for menus</li><li><code>timber/menuitem/class</code> for menu items</li><li><code>timber/user/class</code> for users</li></ul><h2 id="the-post-class-map" tabindex="-1">The Post Class Map <a class="directLink" href="#the-post-class-map">#</a></h2><p>When you extend <code>Timber\Post</code>, the logic you add is usually for a certain post type. With the <code>timber/post/classmap</code> filter, you can tell Timber which class it should use for certain post types.</p><p>The Post Class Map is used:</p><ul><li>When you get a post through <code>Timber::get_post()</code>.</li><li>When you get a collection of posts through <code>Timber::get_posts()</code>.</li><li>When you use a function that returns other posts, like <code>$post-&gt;children()</code> or <code>$post-&gt;thumbnail()</code>.</li></ul><p><strong>functions.php</strong></p><pre class="language-php"><code class="language-php"><span class="token keyword">use</span> <span class="token package">Book</span><span class="token punctuation">;</span><br><span class="token keyword">use</span> <span class="token package">Page</span><span class="token punctuation">;</span><br><br><span class="token function">add_filter</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'timber/post/classmap'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token variable">$classmap</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token variable">$custom_classmap</span> <span class="token operator">=</span> <span class="token punctuation">[</span><br>        <span class="token string single-quoted-string">'page'</span> <span class="token operator">=></span> <span class="token class-name static-context">Page</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span><br>        <span class="token string single-quoted-string">'book'</span> <span class="token operator">=></span> <span class="token class-name static-context">Book</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span><br>    <span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">return</span> <span class="token function">array_merge</span><span class="token punctuation">(</span> <span class="token variable">$classmap</span><span class="token punctuation">,</span> <span class="token variable">$custom_classmap</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Post types that you donâ€™t list in the Post Class Map will take the default <code>Timber\Post</code> class.</p><p>In case you need more fine-grained control over which class is used for your post object, you can use a callback function:</p><pre class="language-php"><code class="language-php"><span class="token keyword">use</span> <span class="token package">Book</span><span class="token punctuation">;</span><br><span class="token keyword">use</span> <span class="token package">Page</span><span class="token punctuation">;</span><br><span class="token keyword">use</span> <span class="token package">PreciousBook</span><span class="token punctuation">;</span><br><br><span class="token function">add_filter</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'timber/post/classmap'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token variable">$classmap</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token variable">$custom_classmap</span> <span class="token operator">=</span> <span class="token punctuation">[</span><br>        <span class="token string single-quoted-string">'book'</span> <span class="token operator">=></span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token class-name class-name-fully-qualified type-declaration"><span class="token punctuation">\</span>WP_Post</span> <span class="token variable">$post</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token variable">$post</span><span class="token operator">-></span><span class="token property">id</span> <span class="token operator">===</span> <span class="token number">3</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>                <span class="token keyword">return</span> <span class="token class-name static-context">PreciousBook</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br><br>            <span class="token keyword">return</span> <span class="token class-name static-context">Book</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">return</span> <span class="token function">array_merge</span><span class="token punctuation">(</span> <span class="token variable">$classmap</span><span class="token punctuation">,</span> <span class="token variable">$custom_classmap</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The callback function receives a <code>WP_Post</code> object and should return the name of the class to use.</p><p>Hereâ€™s another example, where you could use a different attachment class for a featured image that belongs to a certain post type.</p><pre class="language-php"><code class="language-php"><span class="token keyword">use</span> <span class="token package">BookAttachment</span><span class="token punctuation">;</span><br><span class="token keyword">use</span> <span class="token package">Timber<span class="token punctuation">\</span>Attachment</span><span class="token punctuation">;</span><br><br><span class="token function">add_filter</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'timber/post/classmap'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token variable">$classmap</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token variable">$custom_classmap</span> <span class="token operator">=</span> <span class="token punctuation">[</span><br>        <span class="token string single-quoted-string">'attachment'</span> <span class="token operator">=></span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token class-name class-name-fully-qualified type-declaration"><span class="token punctuation">\</span>WP_Post</span> <span class="token variable">$post</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token string single-quoted-string">'book'</span> <span class="token operator">===</span> <span class="token function">get_post_type</span><span class="token punctuation">(</span> <span class="token variable">$post</span><span class="token operator">-></span><span class="token property">post_parent</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>                <span class="token keyword">return</span> <span class="token class-name static-context">BookAttachment</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br><br>            <span class="token keyword">return</span> <span class="token class-name static-context">Attachment</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">return</span> <span class="token function">array_merge</span><span class="token punctuation">(</span> <span class="token variable">$classmap</span><span class="token punctuation">,</span> <span class="token variable">$custom_classmap</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="the-term-class-map" tabindex="-1">The Term Class Map <a class="directLink" href="#the-term-class-map">#</a></h2><p>When you extend <code>Timber\Term</code>, the logic you add is usually for a certain taxonomy. With the <code>timber/term/classmap</code> filter, you can tell Timber which class it should use for certain taxonomies.</p><p>The Term Class Map is used:</p><ul><li>When you get a post through <code>Timber::get_term()</code>.</li><li>When you get a collection of posts through <code>Timber::get_terms()</code>.</li><li>When you use a function that returns other terms, like <code>$post-&gt;terms()</code>.</li></ul><p><strong>functions.php</strong></p><pre class="language-php"><code class="language-php"><span class="token keyword">use</span> <span class="token package">Genre</span><span class="token punctuation">;</span><br><br><span class="token function">add_filter</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'timber/term/classmap'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token variable">$classmap</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token variable">$custom_classmap</span> <span class="token operator">=</span> <span class="token punctuation">[</span><br>        <span class="token string single-quoted-string">'genre'</span> <span class="token operator">=></span> <span class="token class-name static-context">Genre</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span><br>    <span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">return</span> <span class="token function">array_merge</span><span class="token punctuation">(</span> <span class="token variable">$classmap</span><span class="token punctuation">,</span> <span class="token variable">$custom_classmap</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Taxonomies that you donâ€™t list in the Term Class Map will take the default <code>Timber\Term</code> class.</p><p>When you need more fine-grained control over which class is used for your term object, you can use a callback function:</p><pre class="language-php"><code class="language-php"><span class="token keyword">use</span> <span class="token package">ComedyGenre</span><span class="token punctuation">;</span><br><span class="token keyword">use</span> <span class="token package">Genre</span><span class="token punctuation">;</span><br><br><span class="token function">add_filter</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'timber/term/classmap'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token variable">$classmap</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token variable">$custom_classmap</span> <span class="token operator">=</span> <span class="token punctuation">[</span><br>        <span class="token string single-quoted-string">'genre'</span> <span class="token operator">=></span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token class-name class-name-fully-qualified type-declaration"><span class="token punctuation">\</span>WP_Term</span> <span class="token variable">$term</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token variable">$term</span><span class="token operator">-></span><span class="token property">term_id</span> <span class="token operator">===</span> <span class="token number">2</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>                <span class="token keyword">return</span> <span class="token class-name static-context">ComedyGenre</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br><br>            <span class="token keyword">return</span> <span class="token class-name static-context">Genre</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">return</span> <span class="token function">array_merge</span><span class="token punctuation">(</span> <span class="token variable">$classmap</span><span class="token punctuation">,</span> <span class="token variable">$custom_classmap</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The callback function receives a <code>WP_Term</code> object and should return the name of the class to use.</p><h2 id="the-comment-class-map" tabindex="-1">The Comment Class Map <a class="directLink" href="#the-comment-class-map">#</a></h2><p>When you extend <code>Timber\Comment</code>, the logic you add is usually for comments related to a certain post type. With the <code>timber/comment/classmap</code> filter, you can tell Timber which class it should use for comments that belong to a certain post type.</p><p>The Comment Class Map is used:</p><ul><li>When you get a single comment through <code>Timber::get_comment()</code>.</li><li>When you get the comments for a post through <code>$post-&gt;comments()</code>.</li></ul><p><strong>functions.php</strong></p><pre class="language-php"><code class="language-php"><span class="token keyword">use</span> <span class="token package">CommentPost</span><span class="token punctuation">;</span><br><span class="token keyword">use</span> <span class="token package">CommentBook</span><span class="token punctuation">;</span><br><br><span class="token function">add_filter</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'timber/comment/classmap'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token variable">$classmap</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token variable">$custom_classmap</span> <span class="token operator">=</span> <span class="token punctuation">[</span><br>        <span class="token string single-quoted-string">'post'</span> <span class="token operator">=></span> <span class="token class-name static-context">CommentPost</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span><br>        <span class="token string single-quoted-string">'book'</span> <span class="token operator">=></span> <span class="token class-name static-context">CommentBook</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span><br>    <span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">return</span> <span class="token function">array_merge</span><span class="token punctuation">(</span> <span class="token variable">$classmap</span><span class="token punctuation">,</span> <span class="token variable">$custom_classmap</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Comments for post types that you donâ€™t list in the Comment Class Map will take the default <code>Timber\Comment</code> class name as an argument.</p><p>When you need more fine-grained control over which class is used for your comment object, you can use a callback function:</p><pre class="language-php"><code class="language-php"><span class="token keyword">use</span> <span class="token package">BookComment</span><span class="token punctuation">;</span><br><span class="token keyword">use</span> <span class="token package">BookChildComment</span><span class="token punctuation">;</span><br><br><span class="token function">add_filter</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'timber/comment/classmap'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token variable">$classmap</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token variable">$custom_classmap</span> <span class="token operator">=</span> <span class="token punctuation">[</span><br>        <span class="token string single-quoted-string">'book'</span> <span class="token operator">=></span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token class-name class-name-fully-qualified type-declaration"><span class="token punctuation">\</span>WP_Comment</span> <span class="token variable">$comment</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            <span class="token variable">$post</span> <span class="token operator">=</span> <span class="token function">get_post</span><span class="token punctuation">(</span> <span class="token variable">$comment</span><span class="token operator">-></span><span class="token property">comment_post_ID</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token number">0</span> <span class="token operator">!==</span> <span class="token variable">$post</span><span class="token operator">-></span><span class="token property">post_parent</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>                <span class="token keyword">return</span> <span class="token class-name static-context">BookChildComment</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br><br>            <span class="token keyword">return</span> <span class="token class-name static-context">BookComment</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">return</span> <span class="token function">array_merge</span><span class="token punctuation">(</span> <span class="token variable">$classmap</span><span class="token punctuation">,</span> <span class="token variable">$custom_classmap</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The callback function receives a <code>WP_Comment</code> object and should return the name of the class to use. If you need the post ID a comment is associated with, you can get that through <code>$comment-&gt;comment_post_ID</code>.</p><h2 id="the-menu-class-map" tabindex="-1">The Menu Class Map <a class="directLink" href="#the-menu-class-map">#</a></h2><p>With the <code>timber/menu/classmap</code> filter, you can tell Timber which class it should use for menu objects based on the menu location.</p><p>The Menu Class Map is used:</p><ul><li>When you get a menu through <code>Timber::get_menu()</code>.</li></ul><p>Hereâ€™s an a example for a basic filter where we select different menu objects based on the <code>primary</code> and <code>secondary</code> nav menu locations.</p><p><strong>functions.php</strong></p><pre class="language-php"><code class="language-php"><span class="token function">add_filter</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'timber/menu/classmap'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token variable">$classmap</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token variable">$custom_classmap</span> <span class="token operator">=</span> <span class="token punctuation">[</span><br>        <span class="token string single-quoted-string">'primary'</span>   <span class="token operator">=></span> <span class="token class-name static-context">MenuPrimary</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span><br>        <span class="token string single-quoted-string">'secondary'</span> <span class="token operator">=></span> <span class="token class-name static-context">MenuSecondary</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span><br>    <span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">return</span> <span class="token function">array_merge</span><span class="token punctuation">(</span> <span class="token variable">$classmap</span><span class="token punctuation">,</span> <span class="token variable">$custom_classmap</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">10</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Menu locations that you donâ€™t list in the class map will use <code>Timber\Menu</code> as a default class.</p><p>If selecting a menu class based on the location isnâ€™t enough for you, you can also use the <code>timber/menu/class</code> filter.</p><p>The following example demonstrates how you can use custom classes (<code>SingleLevelMenu</code> or <code>MultiLevelMenu</code>) based on the depth of the menu.</p><pre class="language-php"><code class="language-php"><span class="token function">add_filter</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'timber/menu/class'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token variable">$class</span><span class="token punctuation">,</span> <span class="token variable">$term</span><span class="token punctuation">,</span> <span class="token variable">$args</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token variable">$args</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'depth'</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> <span class="token class-name static-context">SingleLevelMenu</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">return</span> <span class="token class-name static-context">MultiLevelMenu</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="the-menuitem-class-filter" tabindex="-1">The MenuItem class filter <a class="directLink" href="#the-menuitem-class-filter">#</a></h2><p>With the <code>timber/menuitem/class</code> filter, you can tell Timber which class it should use for menu item objects (that is, the actual items within the menu).</p><p>The MenuItem class filter is used:</p><ul><li>When you get a menu through <code>Timber::get_menu()</code>.</li></ul><p><strong>functions.php</strong></p><pre class="language-php"><code class="language-php"><span class="token function">add_filter</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'timber/menuitem/class'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token variable">$class</span><span class="token punctuation">,</span> <span class="token variable">$item</span><span class="token punctuation">,</span> <span class="token variable">$menu</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token variable">$menu</span> <span class="token keyword">instanceof</span> <span class="token class-name">MenuPrimary</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> <span class="token class-name static-context">MenuItemPrimary</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">return</span> <span class="token variable">$class</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>In the above example, the MenuItem class filter receives the default <code>Timber\MenuItem</code> class name, the WordPress menu item (which is an instance of <code>WP_Post</code>) and the <code>Timber\Menu</code> object that the item is assigend to. You should be able to decide which class to use based on these parameters. This example demonstrates how you can use a custom class (<code>MenuItemPrimary</code>) when the parent menu has a (custom) class of <code>MenuPrimary</code>.</p><p>Hereâ€™s another example where you would use a different class if the menu item is in a menu assigned to the <code>secondary</code> menu location.</p><pre class="language-php"><code class="language-php"><span class="token keyword">use</span> <span class="token package">MenuItemSecondary</span><span class="token punctuation">;</span><br><br><span class="token function">add_filter</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'timber/menuitem/class'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token variable">$class</span><span class="token punctuation">,</span> <span class="token variable">$item</span><span class="token punctuation">,</span> <span class="token variable">$menu</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token string single-quoted-string">'secondary'</span> <span class="token operator">===</span> <span class="token variable">$menu</span><span class="token operator">-></span><span class="token property">theme_location</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> <span class="token class-name static-context">MenuItemPrimary</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">return</span> <span class="token variable">$class</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="the-pages-menu-class-map" tabindex="-1">The Pages Menu Class Map <a class="directLink" href="#the-pages-menu-class-map">#</a></h2><p>With the <code>timber/pages_menu/classmap</code> filter, you can tell Timber which class it should use for pages menu object.</p><p>The Pages Menu Class Map is used:</p><ul><li>When you get a menu through <code>Timber::get_pages_menu()</code>.</li></ul><p>Hereâ€™s an a example for a basic filter where you would always return your custom <code>ExtendedMenu</code> class.</p><p><strong>functions.php</strong></p><pre class="language-php"><code class="language-php"><span class="token keyword">use</span> <span class="token package">ExtendedPagesMenu</span><span class="token punctuation">;</span><br><br><span class="token function">add_filter</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'timber/pages_menu/classmap'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token variable">$class</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token class-name static-context">ExtendedPagesMenu</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The Pages Menu Class Map receives the default <code>Timber\PagesMenu</code> class name as an argument.</p><h2 id="the-user-class-filter" tabindex="-1">The User class filter <a class="directLink" href="#the-user-class-filter">#</a></h2><p>With the <code>timber/user/class</code> filter, you can tell Timber which class it should use for user objects.</p><p>The User Class Map is used:</p><ul><li>When you get the currently logged-in user through <code>Timber::get_user()</code>.</li><li>When you get a user by ID through <code>Timber::get_user( $user_id )</code>.</li><li>When you get a postâ€™s author (or authors) through <code>$post-&gt;author()</code> or <code>$post-&gt;authors()</code>.</li></ul><p><strong>functions.php</strong></p><pre class="language-php"><code class="language-php"><span class="token keyword">use</span> <span class="token package">UserExtended</span><span class="token punctuation">;</span><br><br><span class="token function">add_filter</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'timber/user/class'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token variable">$class</span><span class="token punctuation">,</span> <span class="token class-name class-name-fully-qualified type-declaration"><span class="token punctuation">\</span>WP_User</span> <span class="token variable">$user</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token class-name static-context">UserExtended</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>In the above example, the User class filter receives the default User class and a <code>WP_User</code> object as arguments. You should be able to decide which class to use based on that user object.</p><p>In case you need a different User class based on the current template youâ€™re displaying, you can use <a href="https://developer.wordpress.org/themes/references/list-of-conditional-tags/">Conditional Tags</a>.</p><pre class="language-php"><code class="language-php"><span class="token function">add_filter</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'timber/user/class'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token variable">$class</span><span class="token punctuation">,</span> <span class="token class-name class-name-fully-qualified type-declaration"><span class="token punctuation">\</span>WP_User</span> <span class="token variable">$user</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// Use Author class for single post template.</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token function">is_singular</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'post'</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> <span class="token class-name static-context">Author</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">return</span> <span class="token variable">$class</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>If you need to have a special class based on the capabilities a user has, work with <code>$user-&gt;has_cap()</code>.</p><pre class="language-php"><code class="language-php"><span class="token function">add_filter</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'timber/user/class'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token variable">$class</span><span class="token punctuation">,</span> <span class="token class-name class-name-fully-qualified type-declaration"><span class="token punctuation">\</span>WP_User</span> <span class="token variable">$user</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token variable">$user</span><span class="token operator">-></span><span class="token function">has_cap</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'manage_options'</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> <span class="token class-name static-context">Administrator</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span> <span class="token keyword">elseif</span> <span class="token punctuation">(</span> <span class="token variable">$user</span><span class="token operator">-></span><span class="token function">has_cap</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'edit_pages'</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> <span class="token class-name static-context">Editor</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">return</span> <span class="token variable">$class</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>If you need to check for user roles, check the <code>$user-&gt;roles</code> array. Donâ€™t work with <code>$user-&gt;has_cap()</code> to check for roles, because it may lead to unreliable results.</p><pre class="language-php"><code class="language-php"><span class="token function">add_filter</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'timber/user/class'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token variable">$class</span><span class="token punctuation">,</span> <span class="token class-name class-name-fully-qualified type-declaration"><span class="token punctuation">\</span>WP_User</span> <span class="token variable">$user</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token function">in_array</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'editor'</span><span class="token punctuation">,</span> <span class="token variable">$user</span><span class="token operator">-></span><span class="token property">roles</span><span class="token punctuation">,</span> <span class="token constant boolean">true</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> <span class="token class-name static-context">Editor</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span> <span class="token keyword">elseif</span> <span class="token punctuation">(</span> <span class="token function">in_array</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'author'</span><span class="token punctuation">,</span> <span class="token variable">$user</span><span class="token operator">-></span><span class="token property">roles</span><span class="token punctuation">,</span> <span class="token constant boolean">true</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> <span class="token class-name static-context">Author</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">return</span> <span class="token variable">$class</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></article></main></div><script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script><script>docsearch({
    appId: '7REN4GR6X4',
    apiKey: '9acbf22ef9a9b117a0f9ba50bd2f4280',
    /**
     * Timber config.
     *
     * @link https://github.com/algolia/docsearch-configs/blob/master/configs/timber.json
     */
    indexName: 'timber',
    container: '#docsearch',
    /**
     * Filter for different doc versions.
     *
     * @link https://www.algolia.com/doc/api-reference/api-parameters/facetFilters/
     */
    searchParameters: {
      facetFilters: ['version:v2']
    },
    // Set debug to true if you want to inspect the dropdown.
    // debug: true
  })</script></body></html>