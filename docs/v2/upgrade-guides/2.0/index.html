<!doctype html><html lang="en" data-theme="dark"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-126807198-1"></script><script>window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-126807198-1');</script><title>Upgrade to 2.0 â€“ Timber Documentation</title><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="robots" content="noindex"><meta name="docsearch:version" content="v2"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3"><link rel="stylesheet" href="/docs/build/css/styles.css?id=c6dd6fc0dc4152fa1eba764426fa484a"><link rel="stylesheet" href="/docs/build/css/mobile.css?id=1c0c81d39ce0cbfc4cbdf7f7c93c61db" media="screen and (max-width: 979px)"><script src="/docs/build/js/app.js?id=1bda1fde1ad4728c63bb3cc0cb17c53a" defer="defer"></script><link rel="icon" href="/docs/build/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon-precomposed" sizes="57x57" href="/docs/build/favicons/apple-touch-icon-57x57.png"><link rel="apple-touch-icon-precomposed" sizes="114x114" href="/docs/build/favicons/apple-touch-icon-114x114.png"><link rel="apple-touch-icon-precomposed" sizes="72x72" href="/docs/build/favicons/apple-touch-icon-72x72.png"><link rel="apple-touch-icon-precomposed" sizes="144x144" href="/docs/build/favicons/apple-touch-icon-144x144.png"><link rel="apple-touch-icon-precomposed" sizes="60x60" href="/docs/build/favicons/apple-touch-icon-60x60.png"><link rel="apple-touch-icon-precomposed" sizes="120x120" href="/docs/build/favicons/apple-touch-icon-120x120.png"><link rel="apple-touch-icon-precomposed" sizes="76x76" href="favicons/apple-touch-icon-76x76.png"><link rel="apple-touch-icon-precomposed" sizes="152x152" href="favicons/apple-touch-icon-152x152.png"><link rel="icon" type="image/png" href="/docs/build/favicons/favicon-196x196.png" sizes="196x196"><link rel="icon" type="image/png" href="/docs/build/favicons/favicon-96x96.png" sizes="96x96"><link rel="icon" type="image/png" href="/docs/build/favicons/favicon-32x32.png" sizes="32x32"><link rel="icon" type="image/png" href="/docs/build/favicons/favicon-16x16.png" sizes="16x16"><link rel="icon" type="image/png" href="/docs/build/favicons/favicon-128.png" sizes="128x128"><meta name="application-name" content="Timber Documentation"><meta name="msapplication-TileColor" content="#FFFFFF"><meta name="msapplication-TileImage" content="/docs/build/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="/docs/build/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="/docs/build/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="/docs/build/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="/docs/build/favicons/mstile-310x310.png"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@TimberWP"><meta name="twitter:title" content="Timber for WordPress Documentation"><meta name="twitter:description" content="Create WordPress themes with beautiful OOP code and the Twig Template Engine"><meta name="twitter:image" content="https://repository-images.githubusercontent.com/7413451/06c62480-b95c-11ea-8b35-b5dd97d070f1"></head><body><header class="header"><div class="logoContainer"><a href="/docs/"><img src="/docs/build/img/timber-logo.svg" alt="Timber Logo" style="width: 105px; height: 30px; border: 0" role="img"></a></div><div class="search"><div id="docsearch"></div></div><nav class="navTop" id="nav-top"><ul><li><a href="https://upstatement.com/timber/" target="_blank" rel="noreferrer noopener">About Timber</a></li><li><a href="https://twig.symfony.com/doc/" target="_blank" rel="noreferrer noopener">Twig Docs</a></li><li><a href="https://github.com/timber/timber" target="_blank" rel="noreferrer noopener"><img src="/docs/build/img/github.png" alt="Star on Github" style="width: 29px; height: 29px; border: 0"></a></li></ul></nav><button class="navMobileToggle js-menu-open" type="button" id="nav-mobile-toggle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 34"><path d="M45.6,19.43H2.4a2.43,2.43,0,0,1,0-4.86H45.6a2.43,2.43,0,0,1,0,4.86Z"/><path d="M45.6,4.86H2.4A2.41,2.41,0,0,1,0,2.43,2.41,2.41,0,0,1,2.4,0H45.6A2.41,2.41,0,0,1,48,2.43,2.41,2.41,0,0,1,45.6,4.86Z"/><path d="M45.6,34H2.4a2.43,2.43,0,0,1,0-4.86H45.6a2.43,2.43,0,0,1,0,4.86Z"/></svg> <span class="sr-only">Menu</span></button></header><div class="wrapper"><aside class="sidebar slideup-menu" id="sidebar" data-turbolinks-keep-scroll-position><button class="navClose js-menu-close" type="button"><div class="navClose-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M3.43,48A3.43,3.43,0,0,1,1,42.15L42.15,1A3.43,3.43,0,1,1,47,5.85L5.85,47A3.4,3.4,0,0,1,3.43,48Z"/><path d="M44.57,48a3.4,3.4,0,0,1-2.42-1L1,5.85A3.43,3.43,0,0,1,5.85,1L47,42.15A3.43,3.43,0,0,1,44.57,48Z"/></svg></div><span class="sr-only">Close Menu</span></button><nav class="navVersions"><ul><li><a href="/docs/">v1.0</a></li><li><a href="/docs/v2" class="is-current">v2.0 DEV</a></li></ul></nav><nav id="nav-main" class="navMain"><ul class="navMain-sections"><li class="navMain-section"><h3 class="navMain-title">Installation</h3><ul class="navMain-items"><li class="navMain-item" data-order="10"><a class="navMain-link" href="/docs/v2/installation/">Installation</a></li><li class="navMain-item" data-order="30"><a class="navMain-link" href="/docs/v2/installation/manage-timber-with-composer/">Managing Timber with Composer</a></li></ul></li><li class="navMain-section"><h3 class="navMain-title">Getting Started</h3><ul class="navMain-items"><li class="navMain-item" data-order="100"><a class="navMain-link" href="/docs/v2/getting-started/introduction/">Introduction</a></li><li class="navMain-item" data-order="200"><a class="navMain-link" href="/docs/v2/getting-started/template-inheritance-and-includes/">Template inheritance and includes</a></li><li class="navMain-item" data-order="300"><a class="navMain-link" href="/docs/v2/getting-started/a-single-post/">A single post</a></li><li class="navMain-item" data-order="400"><a class="navMain-link" href="/docs/v2/getting-started/a-post-archive/">A post archive</a></li></ul></li><li class="navMain-section"><h3 class="navMain-title">Guides</h3><ul class="navMain-items"><li class="navMain-item" data-order="50"><a class="navMain-link" href="/docs/v2/guides/context/">Context</a></li><li class="navMain-item" data-order="75"><a class="navMain-link" href="/docs/v2/guides/template-locations/">Template Locations</a></li><li class="navMain-item" data-order="110"><a class="navMain-link" href="/docs/v2/guides/posts/">Posts</a></li><li class="navMain-item" data-order="120"><a class="navMain-link" href="/docs/v2/guides/terms/">Terms</a></li><li class="navMain-item" data-order="130"><a class="navMain-link" href="/docs/v2/guides/users/">Users</a></li><li class="navMain-item" data-order="140"><a class="navMain-link" href="/docs/v2/guides/comments/">Comments</a></li><li class="navMain-item" data-order="150"><a class="navMain-link" href="/docs/v2/guides/menus/">Menus</a></li><li class="navMain-item" data-order="160"><a class="navMain-link" href="/docs/v2/guides/widgets/">Widgets</a></li><li class="navMain-item" data-order="170"><a class="navMain-link" href="/docs/v2/guides/shortcodes/">Shortcodes</a></li><li class="navMain-item" data-order="200"><a class="navMain-link" href="/docs/v2/guides/twig/">Twig</a></li><li class="navMain-item" data-order="220"><a class="navMain-link" href="/docs/v2/guides/twig-filters/">Twig filters</a></li><li class="navMain-item" data-order="300"><a class="navMain-link" href="/docs/v2/guides/cookbook-text/">Text Cookbook</a></li><li class="navMain-item" data-order="400"><a class="navMain-link" href="/docs/v2/guides/escaping/">Escaping</a></li><li class="navMain-item" data-order="500"><a class="navMain-link" href="/docs/v2/guides/custom-page-templates/">Custom Page Templates</a></li><li class="navMain-item" data-order="600"><a class="navMain-link" href="/docs/v2/guides/custom-fields/">Custom Fields</a></li><li class="navMain-item" data-order="800"><a class="navMain-link" href="/docs/v2/guides/functions/">Functions</a></li><li class="navMain-item" data-order="1000"><a class="navMain-link" href="/docs/v2/guides/cookbook-images/">Image Cookbook</a></li><li class="navMain-item" data-order="1100"><a class="navMain-link" href="/docs/v2/guides/pagination/">Pagination</a></li><li class="navMain-item" data-order="1200"><a class="navMain-link" href="/docs/v2/guides/sidebars/">Sidebars</a></li><li class="navMain-item" data-order="1300"><a class="navMain-link" href="/docs/v2/guides/performance/">Performance/Caching</a></li><li class="navMain-item" data-order="1350"><a class="navMain-link" href="/docs/v2/guides/date-time/">Date/Time in Timber</a></li><li class="navMain-item" data-order="1400"><a class="navMain-link" href="/docs/v2/guides/internationalization/">Internationalization</a></li><li class="navMain-item" data-order="1500"><a class="navMain-link" href="/docs/v2/guides/cheatsheet/">Cheatsheet</a></li><li class="navMain-item" data-order="1550"><a class="navMain-link" href="/docs/v2/guides/gutenberg/">Block Editor (Gutenberg)</a></li><li class="navMain-item" data-order="1600"><a class="navMain-link" href="/docs/v2/guides/extending-timber/">Extending Timber</a></li><li class="navMain-item" data-order="1650"><a class="navMain-link" href="/docs/v2/guides/extending-twig/">Extending Twig</a></li><li class="navMain-item" data-order="1660"><a class="navMain-link" href="/docs/v2/guides/class-maps/">Class Maps</a></li><li class="navMain-item" data-order="1670"><a class="navMain-link" href="/docs/v2/guides/wp-cli/">WP-CLI</a></li><li class="navMain-item" data-order="1700"><a class="navMain-link" href="/docs/v2/guides/hosts-servers/">Hosts &amp; Servers</a></li><li class="navMain-item" data-order="1800"><a class="navMain-link" href="/docs/v2/guides/debugging/">Debugging</a></li><li class="navMain-item" data-order="1900"><a class="navMain-link" href="/docs/v2/guides/testing/">Automated Testing</a></li><li class="navMain-item" data-order="2000"><a class="navMain-link" href="/docs/v2/guides/routing/">Routing</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/guides/custom-integrations/">Custom Integrations</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/guides/woocommerce/">WooCommerce</a></li></ul></li><li class="navMain-section"><h3 class="navMain-title">Reference</h3><ul class="navMain-items"><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-archives/">Archives</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-attachment/">Attachment</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-cache-cleaner/">Cleaner</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-comment/">Comment</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-datetimehelper/">DateTimeHelper</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-externalimage/">ExternalImage</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-filesize/">FileSize</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-image/">Image</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-imagedimensions/">ImageDimensions</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-imagehelper/">ImageHelper</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-menu/">Menu</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-menuitem/">MenuItem</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-pagesmenu/">PagesMenu</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-pagination/">Pagination</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-pathhelper/">PathHelper</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-post/">Post</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-postarrayobject/">PostArrayObject</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-postexcerpt/">PostExcerpt</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-postquery/">PostQuery</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-site/">Site</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-term/">Term</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-texthelper/">TextHelper</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-theme/">Theme</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-timber/">Timber</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-urlhelper/">URLHelper</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-user/">User</a></li></ul></li><li class="navMain-section"><h3 class="navMain-title">Hooks</h3><ul class="navMain-items"><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/hooks/actions/">Action Hooks</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/hooks/filters/">Filter Hooks</a></li></ul></li><li class="navMain-section"><h3 class="navMain-title">Integrations</h3><ul class="navMain-items"><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/integrations/advanced-custom-fields/">Advanced Custom Fields</a></li></ul></li><li class="navMain-section"><h3 class="navMain-title navMain-sectionTitle">Upgrade Guides</h3><ul class="navMain-items"><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/upgrade-guides/1.0/">Upgrade to 1.0</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/upgrade-guides/2.0/" aria-current>Upgrade to 2.0</a></li></ul></li><li class="navMain-section"><h3 class="navMain-title">Contributing</h3><ul class="navMain-items"><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/contributing/">Contributing to Timber</a></li></ul></li></ul></nav></aside><main><div class="globalCallout"><h2>Version 2 ðŸ‘‹</h2><p>Youâ€™re looking at the documentation for version 2 of Timber, which is <strong>still in development</strong>. You canâ€™t use it yet, but you may have a look at the <a href="https://timber.github.io/docs/v2/upgrade-guides/2.0/">upcoming changes</a>.</p><p>Follow us on <a href="https://twitter.com/TimberWP">Twitter</a> or start <a href="https://help.github.com/en/enterprise/2.15/user/articles/watching-and-unwatching-repositories#watching-a-single-repository">watching new releases</a> of our <a href="https://github.com/timber/timber/">GitHub repository</a> to be notified about a version you can use.</p></div><article><h1>Upgrade to 2.0</h1><aside><h2 class="heading-small">On this page</h2><nav class="toc"><ol><li><a href="#new-requirements">New requirements</a></li><li><a href="#no-more-plugin-support">No more plugin support</a></li><li><a href="#initializing-timber">Initializing Timber</a></li><li><a href="#dont-use-a-dollartimber-global">Donâ€™t use a $timber global</a></li><li><a href="#checking-timbers-version">Checking Timberâ€™s version</a></li><li><a href="#removed-functionality">Removed functionality</a><ol><li><a href="#removed-routes">Removed Routes</a></li><li><a href="#removed-twig-cache-extension">Removed Twig cache extension</a></li><li><a href="#removed-timber\request-class">Removed Timber\Request class</a></li></ol></li><li><a href="#namespaced-class-names">Namespaced class names</a><ol><li><a href="#timber\timber">Timber\Timber</a></li><li><a href="#twig-classes">Twig classes</a></li></ol></li><li><a href="#an-updated-api-to-get-timber-objects">An updated API to get Timber objects</a></li><li><a href="#factories">Factories</a><ol><li><a href="#removed-classes">Removed classes</a></li></ol></li><li><a href="#posts">Posts</a><ol><li><a href="#timberget_post">Timber::get_post()</a><ol><li><a href="#use-timberget_post-instead-of-new-timber\post">Use Timber::get_post() instead of new Timber\Post()</a></li><li><a href="#updated-function-signature-for-timberget_post">Updated function signature for Timber::get_post()</a></li><li><a href="#changed-return-type-timberget_post-on-failure">Changed return type Timber::get_post() on failure</a></li></ol></li><li><a href="#timberget_posts">Timber::get_posts()</a><ol><li><a href="#use-timberget_posts-instead-of-new-timber\postquery">Use Timber::get_posts() instead of new Timber\PostQuery()</a></li><li><a href="#use-an-array-instead-of-query-strings-in-timberget_posts">Use an array instead of query strings in Timber::get_posts()</a></li><li><a href="#updated-function-signature-for-timberget_posts">Updated function signature for Timber::get_posts()</a></li></ol></li><li><a href="#post-queries-in-twig">Post queries in Twig</a></li><li><a href="#post-collections">Post Collections</a></li><li><a href="#post-serialization">Post Serialization</a></li></ol></li><li><a href="#terms">Terms</a><ol><li><a href="#timberget_term">Timber::get_term()</a><ol><li><a href="#use-timberget_term-instead-of-new-timber\term">Use Timber::get_term() instead of new Timber\Term()</a></li><li><a href="#updated-function-signature-for-timberget_term">Updated function signature for Timber::get_term()</a></li><li><a href="#removed-edge-case-logic">Removed edge case logic</a></li></ol></li><li><a href="#timberget_terms">Timber::get_terms()</a><ol><li><a href="#updated-function-signature-for-timberget_terms">Updated function signature for Timber::get_terms()</a></li><li><a href="#updated-default-query-parameters-for-timberget_terms">Updated default query parameters for Timber::get_terms()</a></li></ol></li></ol></li><li><a href="#comments">Comments</a></li><li><a href="#menus">Menus</a><ol><li><a href="#a-parameter-is-always-required">A parameter is always required</a></li><li><a href="#the-pages-menu">The Pages Menu</a></li></ol></li><li><a href="#users">Users</a></li><li><a href="#context">Context</a><ol><li><a href="#global-context">Global context</a></li><li><a href="#template-context">Template context</a></li><li><a href="#passing-variables-directly-to-context">Passing variables directly to context</a></li></ol></li><li><a href="#twig">Twig</a><ol><li><a href="#updated-function-names">Updated function names</a></li><li><a href="#updated-timber/twig-filters">Updated timber/twig filters</a></li><li><a href="#namespaced-twig-locations">Namespaced Twig locations</a></li><li><a href="#better-compatibility-with-twig-date-functions">Better compatibility with Twig date functions</a></li><li><a href="#no-context-argument-when-calling-actions-in-twig">No context argument when calling actions in Twig</a></li><li><a href="#deprecated-twig-filters">Deprecated Twig filters</a></li><li><a href="#twig-deprecations">Twig deprecations</a><ol><li><a href="#spaceless">Spaceless</a></li><li><a href="#filter-tag">Filter tag</a></li></ol></li></ol></li><li><a href="#meta">Meta</a><ol><li><a href="#deprecating-direct-access-to-meta-values">Deprecating direct access to meta values</a></li><li><a href="#access-meta-values-through-meta">Access meta values through meta()</a></li><li><a href="#access-raw-meta-values">Access raw meta values</a></li><li><a href="#the-custom-property">The custom property</a></li></ol></li><li><a href="#new-classes">New classes</a><ol><li><a href="#new-attachment-class">New Attachment class</a></li><li><a href="#new-externalimage-class">New ExternalImage class</a></li><li><a href="#new-pagesmenu-class">New PagesMenu class</a></li></ol></li><li><a href="#deprecated-functions-and-variables">Deprecated functions and variables</a><ol><li><a href="#timber\timber-1">Timber\Timber</a></li><li><a href="#timber\post">Timber\Post</a></li><li><a href="#timber\postquery">Timber\PostQuery</a></li><li><a href="#timber\image-and-timber\attachment">Timber\Image and Timber\Attachment</a></li><li><a href="#timber\term">Timber\Term</a></li><li><a href="#timber\comment">Timber\Comment</a></li><li><a href="#timber\menuitem">Timber\MenuItem</a></li><li><a href="#timber\user">Timber\User</a></li><li><a href="#timber\site">Timber\Site</a></li><li><a href="#timber\archives">Timber\Archives</a></li><li><a href="#timber\twig">Timber\Twig</a></li><li><a href="#timber\loader">Timber\Loader</a></li><li><a href="#timber\locationmanager">Timber\LocationManager</a></li></ol></li><li><a href="#removed-functions-and-properties">Removed functions and properties</a><ol><li><a href="#timber\timber-2">Timber\Timber</a></li><li><a href="#timber\site-1">Timber\Site</a></li><li><a href="#timber\post-1">Timber\Post</a></li><li><a href="#timber\term-1">Timber\Term</a></li><li><a href="#timber\image">Timber\Image</a></li><li><a href="#timber\menuitem-1">Timber\MenuItem</a></li><li><a href="#timber\comment-1">Timber\Comment</a></li><li><a href="#timber\commentthread">Timber\CommentThread</a></li><li><a href="#timber\user-1">Timber\User</a></li><li><a href="#timber\helper">Timber\Helper</a></li><li><a href="#timber\texthelper">Timber\TextHelper</a></li><li><a href="#timber\integration\command">Timber\Integration\Command</a></li></ol></li><li><a href="#new-functions">New functions</a></li><li><a href="#new-and-updated-functions">New and updated functions</a><ol><li><a href="#timber\postterms">Timber\Post::terms()</a></li><li><a href="#timber\postget_info">Timber\Post::get_info()</a></li><li><a href="#timber\termposts">Timber\Term::posts()</a></li></ol></li><li><a href="#post-excerpts">Post Excerpts</a><ol><li><a href="#excerpt-instead-of-preview">Excerpt instead of Preview</a></li><li><a href="#read-more-links-and-end-strings-will-not-always-be-added">Read more links and end strings will not always be added</a></li><li><a href="#filter-the-defaults">Filter the defaults</a></li><li><a href="#post.excerpt-takes-arguments-in-array/hash-notation">post.excerpt takes arguments in array/hash notation</a></li></ol></li><li><a href="#hooks">Hooks</a><ol><li><a href="#deprecated-hooks">Deprecated hooks</a></li><li><a href="#deprecated-without-replacement">Deprecated without replacement</a></li><li><a href="#timber/term/meta">timber/term/meta</a></li><li><a href="#removed-hooks">Removed hooks</a></li><li><a href="#new-hooks">New hooks</a></li></ol></li><li><a href="#sideloaded/external-images">Sideloaded/external images</a></li><li><a href="#escaping">Escaping</a></li><li><a href="#urlhelper">URLHelper</a></li><li><a href="#integrations">Integrations</a></li><li><a href="#wp-cli">WP-CLI</a></li><li><a href="#documentation">Documentation</a></li></ol></nav></aside><div class="content"><p>Version 2.0 of Timber</p><ul><li>Will only work as a Composer package.</li><li>Tries to make the naming of functions and filters more consistent.</li><li>Refactors how Timber Core works under the hood to improve compatibility with WordPress Core and be ready for future challenges.</li><li>Removes a lot of deprecated code.</li></ul><h2 id="new-requirements" tabindex="-1">New requirements <a class="directLink" href="#new-requirements">#</a></h2><p>We upgraded Timber to work with more modern PHP and functionalities that only were introduced in newer versions of Timber. Thatâ€™s why we now have the following requirements to run Timber:</p><ul><li>Timber 2.0 requires you to use a <strong>PHP version &gt;= 7.4</strong>.</li><li>Timber 2.0 requires <strong>WordPress 5.3 or greater</strong>. This was changed to take advantage of new <a href="https://make.wordpress.org/core/2019/09/23/date-time-improvements-wp-5-3/">Date/Time improvements</a> built into WordPress. If you need to use WordPress 5.2 or earlier, please continue to use Timber 1.x.</li><li>Timber now requires <strong>Twig in a version &gt;= 2.15.3</strong>.</li></ul><h2 id="no-more-plugin-support" tabindex="-1">No more plugin support <a class="directLink" href="#no-more-plugin-support">#</a></h2><p>As of version 2.0, you canâ€™t install Timber as a plugin. You need to install it through Composer. Follow the <a href="https://timber.github.io/docs/v2/installation/">Setup Guide</a> for how to install Timber. Timber will continue to exist as a WordPress plugin in version 1.x.</p><h2 id="initializing-timber" tabindex="-1">Initializing Timber <a class="directLink" href="#initializing-timber">#</a></h2><p>Up until now, you had to initialize Timber by instantiating a new object of the <code>Timber\Timber</code> class. The constructor of that class is now protected and youâ€™ll run into an error (<code>Call to protected Timber\Timber::__construct() from invalid context</code>) if you try to intialize Timber with it.</p><p><strong>ðŸš« Before</strong></p><pre class="language-php"><code class="language-php"><span class="token keyword">new</span> <span class="token function">Timber<span class="token punctuation">\</span>Timber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The new way to initialize Timber is to call <code>Timber\Timber::init()</code>.</p><p><strong>âœ… Now</strong></p><pre class="language-php"><code class="language-php"><span class="token class-name class-name-fully-qualified static-context">Timber<span class="token punctuation">\</span>Timber</span><span class="token operator">::</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="dont-use-a-dollartimber-global" tabindex="-1">Donâ€™t use a <code>$timber</code> global <a class="directLink" href="#dont-use-a-dollartimber-global">#</a></h2><p>The <code>Timber\Timber::init()</code> method doesnâ€™t return anything. If you use an older pattern where you use a global variable to assign Timber, then it wonâ€™t do anything:</p><p><strong>ðŸš« Donâ€™t do this</strong></p><pre class="language-php"><code class="language-php"><span class="token keyword">global</span> <span class="token variable">$timber</span><span class="token punctuation">;</span><br><br><span class="token variable">$timber</span> <span class="token operator">=</span> <span class="token class-name class-name-fully-qualified static-context">Timber<span class="token punctuation">\</span>Timber</span><span class="token operator">::</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="checking-timbers-version" tabindex="-1">Checking Timberâ€™s version <a class="directLink" href="#checking-timbers-version">#</a></h2><p>If you need to check what Timber version is installed, you can use <code>Timber::version</code>.</p><pre class="language-php"><code class="language-php"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">version_compare</span><span class="token punctuation">(</span><span class="token class-name static-context">Timber</span><span class="token operator">::</span><span class="token variable">$version</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'2.0.0'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'>='</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// Timber 2.x is installed.</span><br><span class="token punctuation">}</span></code></pre><h2 id="removed-functionality" tabindex="-1">Removed functionality <a class="directLink" href="#removed-functionality">#</a></h2><h3 id="removed-routes" tabindex="-1">Removed Routes <a class="directLink" href="#removed-routes">#</a></h3><p>The routing feature had been deprecated in Timber 1.x and was fully removed in Timber 2.0. Routing in Timber is outside its primary mission. Many of its use cases can usually be solved via existing WordPress functionality. We wanted to make it easier for developers to use other routing libraries.</p><p>In case you still need routing as it were before, you can install the library that Timber used before:</p><pre class="language-bash"><code class="language-bash"><span class="token function">composer</span> require upstatement/routes</code></pre><p>Or you can use one of the available libraries and hook it into your code. Follow the <a href="https://timber.github.io/docs/v2/guides/routing/">Routing Guide</a> for more information.</p><h3 id="removed-twig-cache-extension" tabindex="-1">Removed Twig cache extension <a class="directLink" href="#removed-twig-cache-extension">#</a></h3><p>Timber used the <a href="https://github.com/twigphp/twig-cache-extension"><code>twig/cache-extension</code></a> package, which was abandoned. You only need this package if youâ€™ve used the <code>{% cache %}</code> tag in Twig.</p><p>You should use <a href="https://github.com/twigphp/cache-extra"><code>twig/cache-extra</code></a> instead, which you can implement yourself. Check you the <a href="https://timber.github.io/docs/v2/guides/performance/#cache-parts-of-the-twig-file-and-data">relevant section in the Performance/Caching Guide</a> for more information.</p><p>If you still need the <code>twig/cache-extension</code> package before moving to <a href="https://github.com/twigphp/cache-extra"><code>twig/cache-extra</code></a>, you can still install it yourself:</p><pre class="language-bash"><code class="language-bash"><span class="token function">composer</span> require twig/cache-extension</code></pre><p>And then, you can enable it with the following filter:</p><p><strong>functions.php</strong></p><pre class="language-php"><code class="language-php"><span class="token function">add_filter</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'timber/cache/enable_extension'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'__return_true'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="removed-timber\request-class" tabindex="-1">Removed <code>Timber\Request</code> class <a class="directLink" href="#removed-timber\request-class">#</a></h3><p>We removed the <code>Timber\Request</code> class without replacement, because it provided only limited functionality.</p><p>The <code>Timber\Request</code> class was used to create a <code>request</code> entry in the global <a href="https://timber.github.io/docs/v2/guides/context/">Timber context</a>. With this you had access to <code>$_GET</code> and <code>$_POST</code> in Twig.</p><p><strong>ðŸš« This doesnâ€™t work anymore</strong></p><pre class="language-twig"><code class="language-twig"><span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> request<span class="token punctuation">.</span>get <span class="token delimiter punctuation">}}</span></span><br><br><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">if</span> request<span class="token punctuation">.</span>get<span class="token punctuation">.</span>something <span class="token delimiter punctuation">%}</span></span><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">endif</span> <span class="token delimiter punctuation">%}</span></span><br><br><span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> request<span class="token punctuation">.</span>post <span class="token delimiter punctuation">}}</span></span><br><br><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">if</span> request<span class="token punctuation">.</span>post<span class="token punctuation">.</span>something <span class="token delimiter punctuation">%}</span></span><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">endif</span> <span class="token delimiter punctuation">%}</span></span></code></pre><p>If you still need to work with requests in Twig, you can use a maintained and well-tested library. Here are some examples:</p><ul><li><a href="https://github.com/Nyholm/psr7">Nyholm/psr7</a> â€“ A super lightweight PSR-7 implementation.</li><li><a href="https://github.com/guzzle/psr7">guzzle/psr7</a> â€“ PSR-7 HTTP message library.</li><li><a href="https://github.com/laminas/laminas-diactoros">laminas/laminas-diactoros</a> â€“ PSR HTTP Message implementations</li></ul><p>And hereâ€™s an example for how you could add <a href="https://github.com/Nyholm/psr7">Nyholm/psr7</a> as a <code>request</code> object in Twig.</p><pre class="language-php"><code class="language-php"><span class="token function">add_filter</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'timber/context'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token variable">$psr17Factory</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified"><span class="token punctuation">\</span>Nyholm<span class="token punctuation">\</span>Psr7<span class="token punctuation">\</span>Factory<span class="token punctuation">\</span>Psr17Factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token variable">$creator</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified"><span class="token punctuation">\</span>Nyholm<span class="token punctuation">\</span>Psr7Server<span class="token punctuation">\</span>ServerRequestCreator</span><span class="token punctuation">(</span><br>        <span class="token variable">$psr17Factory</span><span class="token punctuation">,</span> <span class="token comment">// ServerRequestFactory</span><br>        <span class="token variable">$psr17Factory</span><span class="token punctuation">,</span> <span class="token comment">// UriFactory</span><br>        <span class="token variable">$psr17Factory</span><span class="token punctuation">,</span> <span class="token comment">// UploadedFileFactory</span><br>        <span class="token variable">$psr17Factory</span>  <span class="token comment">// StreamFactory</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token variable">$context</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'request'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$creator</span><span class="token operator">-></span><span class="token function">fromGlobals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">return</span> <span class="token variable">$context</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="namespaced-class-names" tabindex="-1">Namespaced class names <a class="directLink" href="#namespaced-class-names">#</a></h2><p>Namespaced class names were already introduced in Timber version 1.0. Up until now, you could still the use the old, non-namespaced class names. Only namespaced class names are used now. In version 2.0, we removed the following class aliases:</p><ul><li><code>TimberArchives</code>, use <code>Timber\Archives</code> instead</li><li><code>TimberComment</code>, use <code>Timber\Comment</code> instead</li><li><code>TimberCore</code>, use <code>Timber\Core</code> instead</li><li><code>TimberFunctionWrapper</code>, use <code>Timber\FunctionWrapper</code> instead</li><li><code>TimberHelper</code>, use <code>Timber\Helper</code> instead</li><li><code>TimberImage</code>, use <code>Timber\Image</code> instead</li><li><code>TimberImageHelper</code>, use <code>Timber\ImageHelper</code> instead</li><li><code>TimberIntegrations</code>, use <code>Timber\Integrations</code> instead</li><li><code>TimberLoader</code>, use <code>Timber\Loader</code> instead</li><li><code>TimberMenu</code>, use <code>Timber\Menu</code> instead</li><li><code>TimberMenuItem</code>, use <code>Timber\MenuItem</code> instead</li><li><code>TimberPost</code>, use <code>Timber\Post</code> instead</li><li><code>TimberPostCollection</code>, without replacement</li><li><code>Timber\PostsCollection</code>, without replacement</li><li><code>TimberPostGetter</code>, without replacement</li><li><code>TimberQueryIterator</code>, without replacement</li><li><code>TimberRequest</code>, without replacement</li><li><code>TimberSite</code>, use <code>Timber\Site</code> instead</li><li><code>TimberTerm</code>, use <code>Timber\Term</code> instead</li><li><code>TimberTermGetter</code>, without replacement</li><li><code>TimberTheme</code>, use <code>Timber\Theme</code> instead</li><li><code>TimberTwig</code>, use <code>Timber\Twig</code> instead</li><li><code>TimberURLHelper</code>, use <code>Timber\URLHelper</code> instead</li><li><code>TimberUser</code>, use <code>Timber\User</code> instead</li><li><code>TimberCommand</code>, use <code>Timber\Command</code> instead</li><li><code>Timber_WP_CLI_Command</code>, use <code>Timber\Timber_WP_CLI_Command</code> instead</li></ul><h3 id="timber\timber" tabindex="-1">Timber\Timber <a class="directLink" href="#timber\timber">#</a></h3><p>A special case is the class alias <code>Timber</code> for the <code>Timber\Timber</code> class. We decided to keep it, because itâ€™s more convenient to write <code>Timber::render()</code> instead of <code>Timber\Timber::render()</code> if you donâ€™t use <a href="https://www.php.net/manual/en/language.namespaces.importing.php">the <code>use</code> operator</a>.</p><h3 id="twig-classes" tabindex="-1">Twig classes <a class="directLink" href="#twig-classes">#</a></h3><p>Timber requires a Twig version (2.12) which comes with its own namespaced classes:</p><ul><li>Instead of <code>Twig_Function</code> or <code>Twig_SimpleFunction</code>, you need to use <code>Twig\TwigFunction</code>.</li><li>Instead of <code>Twig_Filter</code> or <code>Twig_SimpleFilter</code>, you need to use <code>Twig\TwigFilter</code>.</li><li>Instead of <code>Twig_Environment</code>, you need to use <code>Twig\Environment</code>.</li></ul><p>You maybe use one of those classes with the <a href="https://timber.github.io/docs/v2/hooks/filters/#timber/twig"><code>timber/twig</code> filter</a>. Make sure you update them.</p><p>In Timber v1, we used to have <code>Timber\Twig_Function</code> and <code>Timber\Twig_Filter</code> as interim classes that could be used for better compatibility with the different class names that exist with Twig. These are now removed as well. Use the classes <code>Twig\TwigFunction</code> and <code>Twig\TwigFilter</code> instead.</p><h2 id="an-updated-api-to-get-timber-objects" tabindex="-1">An updated API to get Timber objects <a class="directLink" href="#an-updated-api-to-get-timber-objects">#</a></h2><p>In Timber 2.0, we updated the API to get Timber objects to avoid certain pitfalls. Hereâ€™s the short list:</p><ul><li>Use <code>Timber::get_post()</code> to get a post. Using <code>new Timber\Post()</code> will not work anymore.</li><li>Use <code>Timber::get_posts()</code> to get posts. Using <code>new Timber\PostQuery()</code> will not work anymore.</li><li>Use <code>Timber::get_term()</code> to get a term. Using <code>new Timber\Term()</code> will not work anymore.</li><li>Use <code>Timber::get_terms()</code> to get terms.</li><li>Use <code>Timber::get_comment()</code> to get a comment. Using <code>new Timber\Comment()</code> will not work anymore.</li><li>Use <code>Timber::get_comments()</code> to get comments.</li><li>Use <code>Timber::get_menu()</code> to get a menu. Using <code>new Timber\Menu()</code> will not work anymore.</li><li>Use <code>Timber::get_user()</code> to get a user. Using <code>new Timber\User()</code> will not work anymore.</li><li>Use <code>Timber::get_users()</code> to get users.</li></ul><p>You will find more details in the following sections.</p><h2 id="factories" tabindex="-1">Factories <a class="directLink" href="#factories">#</a></h2><p>Behind the scenes, Timber now uses a <a href="https://en.wikipedia.org/wiki/Factory_method_pattern">Factory Pattern</a> to get Timber objects. We added factories for posts, terms, menus, menu items, comments and users. Most of the work for version 2 went into the factories.</p><p>No worries, you donâ€™t have to understand this programming pattern to work with Timber. But it is very helpful for developers who use advanced coding patterns and <a href="https://timber.github.io/docs/v2/guides/extending-timber/">extend Timber</a> with their own PHP classes. Now itâ€™s easier to control which PHP classes are used to create the different Timber objects using <a href="https://timber.github.io/docs/v2/guides/class-maps/">Class Maps</a>.</p><h3 id="removed-classes" tabindex="-1">Removed classes <a class="directLink" href="#removed-classes">#</a></h3><p>By using the Factory Pattern, we refactored a lot of code and by moving logic into the factory classes were able to remove the following classes:</p><ul><li><code>Timber\PostCollection</code> â€“ Timber now uses different classes for collections of posts, that all implement the new <code>Timber\PostCollectionInterface</code>. <a href="https://timber.github.io/docs/v2/guides/posts/#post-collections">Learn more about Post Collections</a> in the Posts Guide.</li><li><code>Timber\PostGetter</code></li><li><code>Timber\TermGetter</code></li><li><code>Timber\QueryIterator</code></li></ul><h2 id="posts" tabindex="-1">Posts <a class="directLink" href="#posts">#</a></h2><p>Before version 2.0, when you wanted to get a collection of posts, the standard way was to use <code>Timber::get_posts()</code>, and <code>Timber::get_post()</code> to get a single post. But you could also use <code>new Timber\Post()</code> or <code>new Timber\PostQuery()</code>.</p><p>We deprecated the possibility to instantiate objects directly. Instead, you should only use <code>Timber::get_post()</code> and <code>Timber::get_posts()</code>.</p><p>Make sure you also read the new <a href="https://timber.github.io/docs/v2/guides/posts">Posts Guide</a>.</p><h3 id="timberget_post" tabindex="-1">Timber::get_post() <a class="directLink" href="#timberget_post">#</a></h3><h4 id="use-timberget_post-instead-of-new-timber\post" tabindex="-1">Use <code>Timber::get_post()</code> instead of <code>new Timber\Post()</code> <a class="directLink" href="#use-timberget_post-instead-of-new-timber\post">#</a></h4><p>Itâ€™s not possible anymore to directly instantiate a post with <code>new Timber\Post()</code>. Instead, you always need to use <code>Timber::get_post()</code> and pass in the ID of the post.</p><p><strong>single.php</strong></p><pre class="language-php"><code class="language-php"><span class="token comment">// Figure out post to get from current query.</span><br><span class="token variable">$post</span> <span class="token operator">=</span> <span class="token class-name static-context">Timber</span><span class="token operator">::</span><span class="token function">get_post</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>Any template</strong></p><pre class="language-php"><code class="language-php"><span class="token comment">// Pass in a post ID to get a particular post.</span><br><span class="token variable">$post</span> <span class="token operator">=</span> <span class="token class-name static-context">Timber</span><span class="token operator">::</span><span class="token function">get_post</span><span class="token punctuation">(</span><span class="token number">56</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4 id="updated-function-signature-for-timberget_post" tabindex="-1">Updated function signature for <code>Timber::get_post()</code> <a class="directLink" href="#updated-function-signature-for-timberget_post">#</a></h4><p>We updated the function parameters for <code>Timber::get_post()</code>.</p><p><strong>ðŸš« Before</strong></p><pre class="language-php"><code class="language-php"><span class="token keyword">function</span> <span class="token function-definition function">get_post</span><span class="token punctuation">(</span><span class="token variable">$query</span> <span class="token operator">=</span> <span class="token constant boolean">false</span><span class="token punctuation">,</span> <span class="token variable">$PostClass</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'Timber\Post'</span><span class="token punctuation">)</span><br><span class="token punctuation">{</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p><strong>âœ… Now</strong></p><pre class="language-php"><code class="language-php"><span class="token keyword">function</span> <span class="token function-definition function">get_post</span><span class="token punctuation">(</span><span class="token keyword type-hint">mixed</span> <span class="token variable">$query</span> <span class="token operator">=</span> <span class="token constant boolean">false</span><span class="token punctuation">,</span> <span class="token keyword type-hint">array</span> <span class="token variable">$options</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br><span class="token punctuation">{</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>We deprecated the <code>$PostClass</code> parameter. If you want to control the class your post should be instantiated with, use a <a href="https://timber.github.io/docs/v2/guides/class-maps/#the-post-class-map">Class Map filter</a>. Instead, we now have an <code>$options</code> array.</p><h4 id="changed-return-type-timberget_post-on-failure" tabindex="-1">Changed return type <code>Timber::get_post()</code> on failure <a class="directLink" href="#changed-return-type-timberget_post-on-failure">#</a></h4><p><code>Timber::get_post()</code> returned <code>false</code> if no post could be found in 1.x. Now, that function will return <code>null</code> if no post could be found. We recommend using <code>null</code> instead of <code>false</code> for when no objects are found to match modern PHP practices.</p><h3 id="timberget_posts" tabindex="-1">Timber::get_posts() <a class="directLink" href="#timberget_posts">#</a></h3><h4 id="use-timberget_posts-instead-of-new-timber\postquery" tabindex="-1">Use <code>Timber::get_posts()</code> instead of <code>new Timber\PostQuery()</code> <a class="directLink" href="#use-timberget_posts-instead-of-new-timber\postquery">#</a></h4><p><strong>ðŸš« Before</strong></p><pre class="language-php"><code class="language-php"><span class="token variable">$query</span> <span class="token operator">=</span> <span class="token punctuation">[</span><br>    <span class="token string single-quoted-string">'post_type'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'book'</span><span class="token punctuation">,</span><br>    <span class="token string single-quoted-string">'posts_per_page'</span> <span class="token operator">=></span> <span class="token number">10</span><span class="token punctuation">,</span><br>    <span class="token string single-quoted-string">'post_status'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'publish'</span><span class="token punctuation">,</span><br><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br><span class="token variable">$latest_books</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified">Timber<span class="token punctuation">\</span>PostQuery</span><span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>âœ… Now</strong></p><pre class="language-php"><code class="language-php"><span class="token variable">$query</span> <span class="token operator">=</span> <span class="token punctuation">[</span><br>    <span class="token string single-quoted-string">'post_type'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'book'</span><span class="token punctuation">,</span><br>    <span class="token string single-quoted-string">'posts_per_page'</span> <span class="token operator">=></span> <span class="token number">10</span><span class="token punctuation">,</span><br>    <span class="token string single-quoted-string">'post_status'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'publish'</span><span class="token punctuation">,</span><br><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br><span class="token variable">$latest_books</span> <span class="token operator">=</span> <span class="token class-name static-context">Timber</span><span class="token operator">::</span><span class="token function">get_posts</span><span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$latest_books</span><span class="token operator">-></span><span class="token function">to_array</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token variable">$book</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// Do something.</span><br><span class="token punctuation">}</span></code></pre><h4 id="use-an-array-instead-of-query-strings-in-timberget_posts" tabindex="-1">Use an array instead of query strings in <code>Timber::get_posts()</code> <a class="directLink" href="#use-an-array-instead-of-query-strings-in-timberget_posts">#</a></h4><p>It will no longer be possible to pass in arguments to <code>Timber::get_posts()</code> as a query string. Instead, you will have to use the array notation.</p><p><strong>ðŸš« Before</strong></p><pre class="language-php"><code class="language-php"><span class="token class-name static-context">Timber</span><span class="token operator">::</span><span class="token function">get_posts</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'post_type=article'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>âœ… Now</strong></p><pre class="language-php"><code class="language-php"><span class="token class-name static-context">Timber</span><span class="token operator">::</span><span class="token function">get_posts</span><span class="token punctuation">(</span><span class="token punctuation">[</span><br>    <span class="token string single-quoted-string">'post_type'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'article'</span><span class="token punctuation">,</span><br><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4 id="updated-function-signature-for-timberget_posts" tabindex="-1">Updated function signature for <code>Timber::get_posts()</code> <a class="directLink" href="#updated-function-signature-for-timberget_posts">#</a></h4><p>We updated the function parameters for <code>Timber::get_posts()</code>.</p><p><strong>ðŸš« Before</strong></p><pre class="language-php"><code class="language-php"><span class="token keyword">function</span> <span class="token function-definition function">get_posts</span><span class="token punctuation">(</span><span class="token variable">$query</span> <span class="token operator">=</span> <span class="token constant boolean">false</span><span class="token punctuation">,</span> <span class="token variable">$PostClass</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'Timber\Post'</span><span class="token punctuation">,</span> <span class="token variable">$return_collection</span> <span class="token operator">=</span> <span class="token constant boolean">false</span><span class="token punctuation">)</span><br><span class="token punctuation">{</span><br><span class="token punctuation">}</span></code></pre><p><strong>âœ… Now</strong></p><pre class="language-php"><code class="language-php"><span class="token keyword">function</span> <span class="token function-definition function">get_posts</span><span class="token punctuation">(</span><span class="token keyword type-hint">array</span> <span class="token variable">$query</span><span class="token punctuation">,</span> <span class="token keyword type-hint">array</span> <span class="token variable">$options</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br><span class="token punctuation">{</span><br><span class="token punctuation">}</span></code></pre><p>The function still accepts the <code>$query</code> parameters as the first argument. Most of your queries will still work.</p><p>The following two parameters were removed:</p><ul><li><strong><code>$PostClass</code></strong> â€“ You canâ€™t directly pass the class to instantiate the object with anymore. Instead, you will have to use a <a href="https://timber.github.io/docs/v2/guides/class-maps/#the-post-class-map">Class Map filter</a>.</li><li><strong><code>$return_collection</code></strong> â€“ You canâ€™t tell the function whether it should return a <code>Timber\PostCollection</code> or an array of posts. It will always return an object implementing <code>Timber\PostCollectionInterface</code>. But you can always convert to collection to posts when you use <code>to_array()</code>:</li></ul><pre class="language-php"><code class="language-php"><span class="token variable">$posts_as_array</span> <span class="token operator">=</span> <span class="token class-name static-context">Timber</span><span class="token operator">::</span><span class="token function">get_posts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">to_array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>ðŸš« Before</strong></p><pre class="language-php"><code class="language-php"><span class="token variable">$args</span> <span class="token operator">=</span> <span class="token punctuation">[</span><br>    <span class="token string single-quoted-string">'post_type'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'book'</span><span class="token punctuation">,</span><br>    <span class="token string single-quoted-string">'posts_per_page'</span> <span class="token operator">=></span> <span class="token number">10</span><span class="token punctuation">,</span><br>    <span class="token string single-quoted-string">'post_status'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'publish'</span><span class="token punctuation">,</span><br><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br><span class="token variable">$latest_books_collection</span> <span class="token operator">=</span> <span class="token class-name static-context">Timber</span><span class="token operator">::</span><span class="token function">get_posts</span><span class="token punctuation">(</span><span class="token variable">$args</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'Book'</span><span class="token punctuation">,</span> <span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token variable">$latest_books_array</span> <span class="token operator">=</span> <span class="token class-name static-context">Timber</span><span class="token operator">::</span><span class="token function">get_posts</span><span class="token punctuation">(</span><span class="token variable">$args</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'Book'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>âœ… Now</strong></p><pre class="language-php"><code class="language-php"><span class="token variable">$args</span> <span class="token operator">=</span> <span class="token punctuation">[</span><br>    <span class="token string single-quoted-string">'post_type'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'book'</span><span class="token punctuation">,</span><br>    <span class="token string single-quoted-string">'posts_per_page'</span> <span class="token operator">=></span> <span class="token number">10</span><span class="token punctuation">,</span><br>    <span class="token string single-quoted-string">'post_status'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'publish'</span><span class="token punctuation">,</span><br><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br><span class="token variable">$latest_books_collection</span> <span class="token operator">=</span> <span class="token class-name static-context">Timber</span><span class="token operator">::</span><span class="token function">get_posts</span><span class="token punctuation">(</span><span class="token variable">$args</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token variable">$latest_books_array</span> <span class="token operator">=</span> <span class="token class-name static-context">Timber</span><span class="token operator">::</span><span class="token function">get_posts</span><span class="token punctuation">(</span><span class="token variable">$args</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">to_array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The new <code>$options</code> parameter can be used to pass in options for the query. Check out the documentation for <a href="https://timber.github.io/docs/reference/timber/#get-posts"><code>Timber::get_posts()</code></a> to see all options.</p><h3 id="post-queries-in-twig" tabindex="-1">Post queries in Twig <a class="directLink" href="#post-queries-in-twig">#</a></h3><p>You can run post queries in Twig. Pass the parameters in an argument hash (in Twig, key-value arrays are called hashes, and you use curly braces <code>{}</code> instead of brackets <code>[]</code> for them).</p><pre class="language-twig"><code class="language-twig"><span class="token twig language-twig"><span class="token comment">{# Hash notation #}</span></span><br><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">for</span> post <span class="token operator">in</span> get_posts<span class="token punctuation">(</span><span class="token punctuation">{</span><br>    post_type<span class="token punctuation">:</span> <span class="token string"><span class="token punctuation">'</span>post<span class="token punctuation">'</span></span><span class="token punctuation">,</span><br>    post_status<span class="token punctuation">:</span> <span class="token string"><span class="token punctuation">'</span>publish<span class="token punctuation">'</span></span><span class="token punctuation">,</span><br>    posts_per_page<span class="token punctuation">:</span> <span class="token number">10</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token delimiter punctuation">%}</span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> post<span class="token punctuation">.</span>link <span class="token delimiter punctuation">}}</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> post<span class="token punctuation">.</span>title <span class="token delimiter punctuation">}}</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><br><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">endfor</span> <span class="token delimiter punctuation">%}</span></span></code></pre><p>We still recommend you to run queries and prepare posts in PHP and not in Twig. But sometimes this is not possible when you donâ€™t have access to the relevant PHP files, but only to Twig.</p><h3 id="post-collections" tabindex="-1">Post Collections <a class="directLink" href="#post-collections">#</a></h3><p>We added some documentation about how to work with <a href="https://timber.github.io/docs/v2/guides/posts#post-collections">Post Collections</a>, which are returned when you use <code>Timber::get_posts()</code>.</p><p>Make sure you also read about <a href="https://timber.github.io/docs/v2/guides/posts#laziness-and-caching">the Laziness of posts</a>.</p><h3 id="post-serialization" tabindex="-1">Post Serialization <a class="directLink" href="#post-serialization">#</a></h3><p>When converting post data to JSON, for example to use post data in JavaScript, then we talk about <a href="https://timber.github.io/docs/v2/guides/posts#serialization">Serialization</a>. We added some documentation for that.</p><hr><h2 id="terms" tabindex="-1">Terms <a class="directLink" href="#terms">#</a></h2><p>Similar to posts, when you wanted to get a Timber term object before version 2.0, you could either use <code>Timber::get_term()</code> or <code>new Timber\Term()</code>. Now, instantiating <code>Timber\Term</code> directly doesnâ€™t work anymore. You will always have to use <code>Timber::get_term()</code>.</p><p>Make sure you also read the new <a href="https://timber.github.io/docs/v2/guides/terms">Terms Guide</a>.</p><h3 id="timberget_term" tabindex="-1">Timber::get_term() <a class="directLink" href="#timberget_term">#</a></h3><h4 id="use-timberget_term-instead-of-new-timber\term" tabindex="-1">Use <code>Timber::get_term()</code> instead of <code>new Timber\Term()</code> <a class="directLink" href="#use-timberget_term-instead-of-new-timber\term">#</a></h4><p>Itâ€™s not possible anymore to directly instantiate a term with <code>new Timber\Term()</code>. Instead, you always need to use <code>Timber::get_term()</code> and pass in the ID of the term.</p><pre class="language-php"><code class="language-php"><span class="token comment">// Pass in a term ID (or a WP_Term object) to get a particular term.</span><br><span class="token variable">$term</span> <span class="token operator">=</span> <span class="token class-name static-context">Timber</span><span class="token operator">::</span><span class="token function">get_term</span><span class="token punctuation">(</span><span class="token number">17</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4 id="updated-function-signature-for-timberget_term" tabindex="-1">Updated function signature for <code>Timber::get_term()</code> <a class="directLink" href="#updated-function-signature-for-timberget_term">#</a></h4><p>We updated the function parameters for <code>Timber::get_term()</code>.</p><p><strong>ðŸš« Before</strong></p><pre class="language-php"><code class="language-php"><span class="token keyword">function</span> <span class="token function-definition function">get_term</span><span class="token punctuation">(</span><span class="token variable">$term</span><span class="token punctuation">,</span> <span class="token variable">$taxonomy</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'post_tag'</span><span class="token punctuation">,</span> <span class="token variable">$TermClass</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'Timber\Term'</span><span class="token punctuation">)</span><br><span class="token punctuation">{</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p><strong>âœ… Now</strong></p><pre class="language-php"><code class="language-php"><span class="token keyword">function</span> <span class="token function-definition function">get_term</span><span class="token punctuation">(</span><span class="token variable">$term</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">)</span><br><span class="token punctuation">{</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><ul><li>We removed the <code>$taxonomy</code> parameter. Timber needs the ID of a term or a <code>WP_Term</code> object. It can figure out the taxonomy itself.</li><li>We removed the <code>$TermClass</code> parameter. If you want to control the class your term should be instantiated with, use a <a href="https://timber.github.io/docs/v2/guides/class-maps/#the-term-class-map">Term Class Map filter</a>.</li></ul><h4 id="removed-edge-case-logic" tabindex="-1">Removed edge case logic <a class="directLink" href="#removed-edge-case-logic">#</a></h4><p>When you use <code>Timber::get_term()</code> without any parameter, Timber returns the queried term if the queried object is a term.</p><p>There was a hidden logic in <code>Timber::get_term()</code> for cases where there was no queried term: When the global query already had a <code>tax_query</code> definition that queried specific terms, Timber would return the first of these terms.</p><p>We <a href="https://github.com/timber/timber/pull/2664/">removed that logic</a>, because it could also lead to unexpected behavior.</p><h3 id="timberget_terms" tabindex="-1">Timber::get_terms() <a class="directLink" href="#timberget_terms">#</a></h3><h4 id="updated-function-signature-for-timberget_terms" tabindex="-1">Updated function signature for <code>Timber::get_terms()</code> <a class="directLink" href="#updated-function-signature-for-timberget_terms">#</a></h4><p>We updated the function parameters for <code>Timber::get_terms()</code>.</p><p><strong>ðŸš« Before</strong></p><pre class="language-php"><code class="language-php"><span class="token keyword">function</span> <span class="token function-definition function">get_terms</span><span class="token punctuation">(</span><span class="token variable">$args</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">,</span> <span class="token variable">$maybe_args</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token variable">$TermClass</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'Timber\Term'</span><span class="token punctuation">)</span><br><span class="token punctuation">{</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p><strong>âœ… Now</strong></p><pre class="language-php"><code class="language-php"><span class="token keyword">function</span> <span class="token function-definition function">get_terms</span><span class="token punctuation">(</span><span class="token variable">$args</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">,</span> <span class="token keyword type-hint">array</span> <span class="token variable">$options</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br><span class="token punctuation">{</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><ul><li>The function still accepts an <code>$args</code> parameter where you pass in the same arguments that you would pass to <a href="https://developer.wordpress.org/reference/classes/WP_Term_Query/__construct/"><code>WP_Term_Query()</code></a>. Most of your calls to <code>Timber::get_terms()</code> should still work the same.</li><li>The <code>$options</code> parameter is not used yet, but it might be used in the future.</li><li>We removed the <code>$TermClass</code> parameter. If you want to control the class your term should be instantiated with, use a <a href="https://timber.github.io/docs/v2/guides/class-maps/#the-term-class-map">Term Class Map filter</a>.</li></ul><h4 id="updated-default-query-parameters-for-timberget_terms" tabindex="-1">Updated default query parameters for <code>Timber::get_terms()</code> <a class="directLink" href="#updated-default-query-parameters-for-timberget_terms">#</a></h4><p>Before Timber 2.0, we set the default argument <code>hide_empty</code> to <code>false</code> in the term query, which is <strong>not what WordPress does by default</strong>. WordPress always hides empty terms by default <a href="https://developer.wordpress.org/reference/classes/WP_Term_Query/__construct/">in term queries</a>. For version 2, we donâ€™t change these defaults and follow what WordPress does.</p><p>If you <strong>need empty terms</strong>, you need to explicitly set <code>hide_empty</code> to <code>false</code>.</p><pre class="language-php"><code class="language-php"><span class="token variable">$terms</span> <span class="token operator">=</span> <span class="token class-name static-context">Timber</span><span class="token operator">::</span><span class="token function">get_terms</span><span class="token punctuation">(</span><span class="token punctuation">[</span><br>    <span class="token string single-quoted-string">'taxonomy'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'category'</span><span class="token punctuation">,</span><br>    <span class="token string single-quoted-string">'hide_empty'</span> <span class="token operator">=></span> <span class="token constant boolean">false</span><span class="token punctuation">,</span><br><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="comments" tabindex="-1">Comments <a class="directLink" href="#comments">#</a></h2><p>To get a Timber comment object before version 2.0, you would use <code>new Timber\Comment( $comment_id )</code>. We removed the possibility to instantiate comment objects directly. You will always have to use the new <code>Timber::get_comment()</code> function.</p><p><strong>ðŸš« Before</strong></p><pre class="language-php"><code class="language-php"><span class="token variable">$comment</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified">Timber<span class="token punctuation">\</span>Comment</span><span class="token punctuation">(</span><span class="token variable">$comment_id</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>âœ… Now</strong></p><pre class="language-php"><code class="language-php"><span class="token variable">$comment</span> <span class="token operator">=</span> <span class="token class-name static-context">Timber</span><span class="token operator">::</span><span class="token function">get_comment</span><span class="token punctuation">(</span><span class="token variable">$comment_id</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="menus" tabindex="-1">Menus <a class="directLink" href="#menus">#</a></h2><p>Before version 2.0, when you wanted to get a menu, the standard way was to use <code>new Timber\Menu()</code>. We removed the possibility to instantiate menu objects directly. Instead, you should only use the new <code>Timber::get_menu()</code> function.</p><p><strong>ðŸš« Before</strong></p><pre class="language-php"><code class="language-php"><span class="token variable">$menu</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified">Timber<span class="token punctuation">\</span>Menu</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'primary'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>âœ… Now</strong></p><pre class="language-php"><code class="language-php"><span class="token variable">$menu</span> <span class="token operator">=</span> <span class="token class-name static-context">Timber</span><span class="token operator">::</span><span class="token function">get_menu</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'primary'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="a-parameter-is-always-required" tabindex="-1">A parameter is always required <a class="directLink" href="#a-parameter-is-always-required">#</a></h3><p>Before 2.0, you could pass in nothing to the constructor of <code>Timber\Menu</code> to get the first menu Timber found. We removed the possibility to pass in nothing when getting a menu because it led to confusing cases.</p><p><strong>ðŸš« Before</strong></p><p>This will cause an error.</p><pre class="language-php"><code class="language-php"><span class="token variable">$menu</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified">Timber<span class="token punctuation">\</span>Menu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>âœ… Now</strong></p><p>Always pass a parameter.</p><pre class="language-php"><code class="language-php"><span class="token variable">$menu</span> <span class="token operator">=</span> <span class="token class-name static-context">Timber</span><span class="token operator">::</span><span class="token function">get_menu</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'primary'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="the-pages-menu" tabindex="-1">The Pages Menu <a class="directLink" href="#the-pages-menu">#</a></h3><p>Previously, if you didnâ€™t provide a parameter to <code>Timber\Menu()</code> and didnâ€™t have any menus registered, Timber would build <strong>a menu from your existing pages</strong>. To achieve this same functionality, you must now use the new <code>Timber::get_pages_menu()</code> function.</p><p><strong>ðŸš« Before</strong></p><pre class="language-php"><code class="language-php"><span class="token variable">$menu</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified">Timber<span class="token punctuation">\</span>Menu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>âœ… Now</strong></p><pre class="language-php"><code class="language-php"><span class="token variable">$menu</span> <span class="token operator">=</span> <span class="token class-name static-context">Timber</span><span class="token operator">::</span><span class="token function">get_pages_menu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>If <code>Timber::get_menu()</code> canâ€™t find a menu with the parameters you used, it will now return <code>null</code>.</p><h2 id="users" tabindex="-1">Users <a class="directLink" href="#users">#</a></h2><p>To get a Timber user object before version 2.0, you would use <code>new Timber\User( $user_id )</code>. We removed the possibility to instantiate user objects directly. You will always have to use the new <code>Timber::get_user()</code> function.</p><p><strong>ðŸš« Before</strong></p><pre class="language-php"><code class="language-php"><span class="token variable">$user</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified">Timber<span class="token punctuation">\</span>User</span><span class="token punctuation">(</span><span class="token variable">$user_id</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>âœ… Now</strong></p><pre class="language-php"><code class="language-php"><span class="token variable">$user</span> <span class="token operator">=</span> <span class="token class-name static-context">Timber</span><span class="token operator">::</span><span class="token function">get_user</span><span class="token punctuation">(</span><span class="token variable">$user_id</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="context" tabindex="-1">Context <a class="directLink" href="#context">#</a></h2><h3 id="global-context" tabindex="-1">Global context <a class="directLink" href="#global-context">#</a></h3><p>The context variables <code>{{ wp_head }}</code> and <code>{{ wp_footer }}</code> were removed definitely from the global context. Use <code>{{ function('wp_head') }}</code> and <code>{{ function('wp_footer') }}</code> in your Twig template directly.</p><h3 id="template-context" tabindex="-1">Template context <a class="directLink" href="#template-context">#</a></h3><p>Version 2.0 introduces the concept of template contexts for Timber. This means that Timber will automatically set different variables like <code>post</code> in your context for singular templates and <code>posts</code> and maybe <code>term</code> or <code>author</code> for archive templates. Check out <a href="https://timber.github.io/docs/v2/guides/context/#template-contexts">the section in the Context Guide</a> for an overview.</p><p>Through the context, compatibility for third party plugins will be improved as well. Refer to the new <a href="https://timber.github.io/docs/v2/guides/context/">Context Guide</a> to learn more.</p><p>In short:</p><ul><li>If you use <code>$context['post'] = Timber::get_post()</code> or <code>$context['posts'] = Timber::get_posts()</code> in your template files, you can probably omit these, because the context will do this for you. You might also benefit from better compatibility with third party plugins, because for singular templates, Timber will handle certain globals and hooks when setting up <code>post</code>.</li><li>If you decide to still use <code>$context['post'] = â€¦</code> in your template file, then you should to set up your post through <code>$context['post']-&gt;setup()</code>. The <code>setup()</code> function improves compatibility with third-party plugins.</li><li>Itâ€™s now possible to <a href="https://timber.github.io/docs/v2/guides/context/#change-arguments-for-default-query">overwrite the default arguments</a> that are passed to the default query for <code>posts</code>.</li><li>When you need the global context in partials, then use <code>Timber::context_global()</code> to only load the global context.</li></ul><h3 id="passing-variables-directly-to-context" tabindex="-1">Passing variables directly to context <a class="directLink" href="#passing-variables-directly-to-context">#</a></h3><p>Itâ€™s now possible to pass data directly to <code>Timber::context()</code>.</p><p>Hereâ€™s an example: Instead of setting a <code>posts</code> variable in <code>$context</code> after youâ€™ve called <code>Timber::context()</code>, you can pass an associative array with a <code>posts</code> key and the same value to the <code>Timber::context()</code> function:</p><p><strong>Still correct</strong></p><pre class="language-php"><code class="language-php"><span class="token variable">$context</span> <span class="token operator">=</span> <span class="token class-name static-context">Timber</span><span class="token operator">::</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token variable">$context</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'posts'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name static-context">Timber</span><span class="token operator">::</span><span class="token function">get_posts</span><span class="token punctuation">(</span><span class="token punctuation">[</span><br>    <span class="token string single-quoted-string">'query'</span> <span class="token operator">=></span> <span class="token punctuation">[</span><br>        <span class="token string single-quoted-string">'post_type'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'book'</span><span class="token punctuation">,</span><br>        <span class="token string single-quoted-string">'posts_per_page'</span> <span class="token operator">=></span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><br>        <span class="token string single-quoted-string">'post_status'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'publish'</span><span class="token punctuation">,</span><br>    <span class="token punctuation">]</span><span class="token punctuation">,</span><br><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token class-name static-context">Timber</span><span class="token operator">::</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'archive.twig'</span><span class="token punctuation">,</span> <span class="token variable">$context</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>Another way to do it</strong></p><pre class="language-php"><code class="language-php"><span class="token variable">$context</span> <span class="token operator">=</span> <span class="token class-name static-context">Timber</span><span class="token operator">::</span><span class="token function">context</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><br>	<span class="token string single-quoted-string">'posts'</span> <span class="token operator">=></span> <span class="token class-name static-context">Timber</span><span class="token operator">::</span><span class="token function">get_posts</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><br>        <span class="token string single-quoted-string">'post_type'</span>      <span class="token operator">=></span> <span class="token string single-quoted-string">'book'</span><span class="token punctuation">,</span><br>        <span class="token string single-quoted-string">'posts_per_page'</span> <span class="token operator">=></span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><br>        <span class="token string single-quoted-string">'post_status'</span>    <span class="token operator">=></span> <span class="token string single-quoted-string">'publish'</span><span class="token punctuation">,</span><br>	<span class="token punctuation">]</span><span class="token punctuation">,</span><br><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token class-name static-context">Timber</span><span class="token operator">::</span><span class="token function">render</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'archive.twig'</span><span class="token punctuation">,</span> <span class="token variable">$context</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="twig" tabindex="-1">Twig <a class="directLink" href="#twig">#</a></h2><h3 id="updated-function-names" tabindex="-1">Updated function names <a class="directLink" href="#updated-function-names">#</a></h3><p>In Twig, you could use functions that were called the same as classes to convert objects or IDs of objects into Timber object. To have the same function names as in Timberâ€™s public API, weâ€™ve added the following functions:</p><ul><li><code>{{ get_post() }}</code></li><li><code>{{ get_posts() }}</code></li><li><code>{{ get_attachment_by() }}</code></li><li><code>{{ get_term() }}</code></li><li><code>{{ get_terms() }}</code></li><li><code>{{ get_user() }}</code></li><li><code>{{ get_users() }}</code></li><li><code>{{ get_comment() }}</code></li><li><code>{{ get_comments() }}</code></li></ul><p>The following functions are now deprecated:</p><table><thead><tr><th>Deprecated functions</th><th>Use one of these instead</th></tr></thead><tbody><tr><td><code>{{ TimberPost() }}</code><br><code>{{ Post() }}</code></td><td><code>{{ get_post() }}</code><br><code>{{ get_posts() }}</code></td></tr><tr><td><code>{{ TimberTerm() }}</code><br><code>{{ Term() }}</code></td><td><code>{{ get_term() }}</code><br><code>{{ get_terms() }}</code></td></tr><tr><td><code>{{ TimberImage() }}</code><br><code>{{ Image() }}</code></td><td><code>{{ get_image() }}</code><br><code>{{ get_post() }}</code><br><code>{{ get_attachment() }}</code><br><code>{{ get_attachment_by() }}</code><br><code>{{ get_posts() }}</code></td></tr><tr><td><code>{{ TimberUser() }}</code><br><code>{{ User() }}</code></td><td><code>{{ get_user() }}</code><br><code>{{ get_users() }}</code></td></tr></tbody></table><h3 id="updated-timber/twig-filters" tabindex="-1">Updated timber/twig filters <a class="directLink" href="#updated-timber/twig-filters">#</a></h3><p>In Timber 1.x, apart from <code>timber/twig</code>, we had other internal filters to filter the Twig Environment.</p><ul><li><code>timber/twig/functions</code></li><li><code>timber/twig/filters</code></li><li><code>timber/twig/escapers</code></li></ul><p>You shouldnâ€™t use any of those anymore. In Timber 2.x, you should only use <code>timber/twig</code> to add your own functionality to the Twig Environment. If you use any of the following filters to filter the Twig Environment, youâ€™ll get a <code>Call to a member function addFunction() on array</code> or a <code>Call to a member function addFilter() on array</code> error:</p><ul><li><code>timber/twig/functions</code></li><li><code>timber/twig/filters</code></li></ul><p>The other filters will be used to filter the functions, filters and escapers that are actually added to Twig by Timber. Check out the new <a href="https://timber.github.io/docs/v2/guides/extending-timber/">Extending Twig Guide</a> to learn more.</p><h3 id="namespaced-twig-locations" tabindex="-1">Namespaced Twig locations <a class="directLink" href="#namespaced-twig-locations">#</a></h3><p>You can now use namespaced Twig locations. Read more about this in the <a href="https://timber.github.io/docs/v2/guides/template-locations/#register-your-own-namespaces">Template Locations Guide</a>.</p><h3 id="better-compatibility-with-twig-date-functions" tabindex="-1">Better compatibility with Twig date functions <a class="directLink" href="#better-compatibility-with-twig-date-functions">#</a></h3><p>Twig has a <a href="https://twig.symfony.com/doc/filters/date.html"><code>date</code></a> filter as well as a <a href="https://twig.symfony.com/doc/functions/date.html"><code>date()</code></a> function. Timber 2.0 has much better compatibility with this functionality than before. Now, you can use any of the functionality described in Twigâ€™s documentation.</p><p>Timber will automatically load the timezone as well as the default date format from the WordPress settings when you work with dates in Twig. Even if itâ€™s advised in the Twig documentation, you shouldnâ€™t update the timezone in Twig (unless you know what youâ€™re doing):</p><pre class="language-php"><code class="language-php"><span class="token comment">// Donâ€™t do this!</span><br><span class="token variable">$twig</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified"><span class="token punctuation">\</span>Twig<span class="token punctuation">\</span>Environment</span><span class="token punctuation">(</span><span class="token variable">$loader</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token variable">$twig</span><span class="token operator">-></span><span class="token function">getExtension</span><span class="token punctuation">(</span><span class="token class-name class-name-fully-qualified static-context"><span class="token punctuation">\</span>Twig<span class="token punctuation">\</span>Extension<span class="token punctuation">\</span>CoreExtension</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">setTimezone</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Europe/Paris'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Also refer to the new <a href="https://timber.github.io/docs/v2/guides/date-time/">Date/Time Guide</a> for extended information on working with dates in Timber.</p><h3 id="no-context-argument-when-calling-actions-in-twig" tabindex="-1">No context argument when calling actions in Twig <a class="directLink" href="#no-context-argument-when-calling-actions-in-twig">#</a></h3><p>In version 1.x of Timber, you would always get the context as a last argument in the hook function:</p><pre class="language-twig"><code class="language-twig"><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">do</span> action<span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>my_action<span class="token punctuation">'</span></span><span class="token punctuation">,</span> <span class="token string"><span class="token punctuation">'</span>foo<span class="token punctuation">'</span></span><span class="token punctuation">)</span> <span class="token delimiter punctuation">%}</span></span></code></pre><pre class="language-php"><code class="language-php"><span class="token function">add_action</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'my_action_with_args'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'my_function_with_args'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function-definition function">my_function_with_args</span><span class="token punctuation">(</span><span class="token variable">$foo</span><span class="token punctuation">,</span> <span class="token variable">$post</span><span class="token punctuation">,</span> <span class="token variable">$context</span><span class="token punctuation">)</span><br><span class="token punctuation">{</span><br>    <span class="token keyword">echo</span> <span class="token string single-quoted-string">'I say '</span> <span class="token operator">.</span> <span class="token variable">$foo</span> <span class="token operator">.</span> <span class="token string single-quoted-string">'!'</span><span class="token punctuation">;</span><br>    <span class="token keyword">echo</span> <span class="token string single-quoted-string">'For the post with title '</span> <span class="token operator">.</span> <span class="token variable">$context</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'post'</span><span class="token punctuation">]</span><span class="token operator">-></span><span class="token function">title</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>In version 2.0, <strong>a context argument will no longer be passed to the hook function</strong>. Now, if you want anything from the templateâ€™s context, youâ€™ll need to pass in the argument manually:</p><pre class="language-twig"><code class="language-twig"><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">do</span> action<span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>my_action<span class="token punctuation">'</span></span><span class="token punctuation">,</span> <span class="token string"><span class="token punctuation">'</span>foo<span class="token punctuation">'</span></span><span class="token punctuation">,</span> post<span class="token punctuation">)</span> <span class="token delimiter punctuation">%}</span></span></code></pre><pre class="language-php"><code class="language-php"><span class="token function">add_action</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'my_action_with_args'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'my_function_with_args'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function-definition function">my_function_with_args</span><span class="token punctuation">(</span><span class="token variable">$foo</span><span class="token punctuation">,</span> <span class="token variable">$post</span><span class="token punctuation">)</span><br><span class="token punctuation">{</span><br>    <span class="token keyword">echo</span> <span class="token string single-quoted-string">'I say '</span> <span class="token operator">.</span> <span class="token variable">$foo</span> <span class="token operator">.</span> <span class="token string single-quoted-string">'!'</span><span class="token punctuation">;</span><br>    <span class="token keyword">echo</span> <span class="token string single-quoted-string">'For the post with title '</span> <span class="token operator">.</span> <span class="token variable">$post</span><span class="token operator">-></span><span class="token function">title</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><h3 id="deprecated-twig-filters" tabindex="-1">Deprecated Twig filters <a class="directLink" href="#deprecated-twig-filters">#</a></h3><p>The following Twig filters have been deprecated and will be removed in future versions of Timber:</p><ul><li><code>|get_class</code></li><li><code>|print_r</code></li></ul><p>In addition, the confusingly named (and non-functional) <code>|get_type</code> filter has been removed.</p><h3 id="twig-deprecations" tabindex="-1">Twig deprecations <a class="directLink" href="#twig-deprecations">#</a></h3><p>Apart from the deprecations listed above, you should also consider the deprecations by Twig itself.</p><ul><li><a href="https://twig.symfony.com/doc/2.x/deprecated.html">Deprecated features in Twig 2.x</a> â€“ Make sure you check out the deprecated features for <a href="https://twig.symfony.com/doc/2.x/deprecated.html#tags">Tags</a>.</li><li><a href="https://twig.symfony.com/doc/3.x/deprecated.html">Deprecated features in Twig 3.x</a> â€“ Twig mainly removes all deprecated features in 2.x.</li></ul><p>There are a couple we want to highlight:</p><h4 id="spaceless" tabindex="-1">Spaceless <a class="directLink" href="#spaceless">#</a></h4><p>The <code>spaceless</code> tag is deprecated, you should use the <a href="https://twig.symfony.com/doc/tags/apply.html"><code>apply</code> tag</a> using the <a href="https://twig.symfony.com/doc/2.x/filters/spaceless.html"><code>spaceless</code> filter</a> instead.</p><p><strong>ðŸš« Before</strong></p><pre class="language-twig"><code class="language-twig"><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">spaceless</span> <span class="token delimiter punctuation">%}</span></span><br><br><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">endspaceless</span> <span class="token delimiter punctuation">%}</span></span></code></pre><p><strong>âœ… Now</strong></p><pre class="language-twig"><code class="language-twig"><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">apply</span> spaceless <span class="token delimiter punctuation">%}</span></span><br><br><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">endapply</span> <span class="token delimiter punctuation">%}</span></span></code></pre><h4 id="filter-tag" tabindex="-1">Filter tag <a class="directLink" href="#filter-tag">#</a></h4><p>The <code>filter</code> tag is deprecated. Use the <a href="https://twig.symfony.com/doc/tags/apply.html"><code>apply</code> tag</a> in combination with <code>apply_filters()</code> instead.</p><p><strong>ðŸš« Before</strong></p><pre class="language-twig"><code class="language-twig"><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">filter</span> apply_filters<span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>your_filter_name<span class="token punctuation">'</span></span><span class="token punctuation">)</span> <span class="token delimiter punctuation">%}</span></span><br><br><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">endapply</span> <span class="token delimiter punctuation">%}</span></span></code></pre><p><strong>âœ… Now</strong></p><pre class="language-twig"><code class="language-twig"><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">apply</span> apply_filters<span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>your_filter_name<span class="token punctuation">'</span></span><span class="token punctuation">)</span> <span class="token delimiter punctuation">%}</span></span><br><br><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">endapply</span> <span class="token delimiter punctuation">%}</span></span></code></pre><h2 id="meta" tabindex="-1">Meta <a class="directLink" href="#meta">#</a></h2><h3 id="deprecating-direct-access-to-meta-values" tabindex="-1">Deprecating direct access to meta values <a class="directLink" href="#deprecating-direct-access-to-meta-values">#</a></h3><p>In Timber 1.x, it was possible to access meta values via dynamic properties. For example, you could do:</p><pre class="language-twig"><code class="language-twig"><span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> post<span class="token punctuation">.</span>my_custom_field_name <span class="token delimiter punctuation">}}</span></span></code></pre><p>This is no longer the recommended way to access meta values because there might be conflicts with existing Timber methods or properties. For example, if you named a custom field <code>date</code> and accessed it through <code>{{ post.date }}</code>, it wasnâ€™t clear if you would get the postsâ€™ date or the value for your custom field named <code>date</code>.</p><h3 id="access-meta-values-through-meta" tabindex="-1">Access meta values through meta() <a class="directLink" href="#access-meta-values-through-meta">#</a></h3><p>The <strong>new recommended way to access meta values</strong> is through <code>meta()</code>:</p><pre class="language-twig"><code class="language-twig"><span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> post<span class="token punctuation">.</span>meta<span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>my_custom_field_name<span class="token punctuation">'</span></span><span class="token punctuation">)</span> <span class="token delimiter punctuation">}}</span></span></code></pre><p>This way, your values will be filtered by third-party plugins like ACF.</p><h3 id="access-raw-meta-values" tabindex="-1">Access raw meta values <a class="directLink" href="#access-raw-meta-values">#</a></h3><p>If you want to access the raw and unfiltered value directly from the database instead, you can use the new <code>raw_meta()</code> method:</p><pre class="language-twig"><code class="language-twig"><span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> post<span class="token punctuation">.</span>raw_meta<span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>my_custom_field_name<span class="token punctuation">'</span></span><span class="token punctuation">)</span> <span class="token delimiter punctuation">}}</span></span></code></pre><h3 id="the-custom-property" tabindex="-1">The custom property <a class="directLink" href="#the-custom-property">#</a></h3><p>Maybe you were also used to use the <code>$custom</code> property on an object:</p><pre class="language-twig"><code class="language-twig"><span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> post<span class="token punctuation">.</span>custom<span class="token punctuation">.</span>my_custom_field_name <span class="token delimiter punctuation">}}</span></span></code></pre><p>This property was <strong>removed</strong> and you can <strong>no longer access meta values through it</strong>. It was only meant as a reference for you to see which meta values exist for an object when you use <code>{{ dump() }}</code> or <code>var_dump()</code>. To access the values, you should always use the <code>meta('field_name')</code> and <code>raw_meta('field_name')</code> methods. If you still need to know which meta values exist on an object, you can use <code>meta()</code> or <code>raw_meta()</code> without a field name:</p><pre class="language-twig"><code class="language-twig"><span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> dump<span class="token punctuation">(</span>post<span class="token punctuation">.</span>meta<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token delimiter punctuation">}}</span></span><br><span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> dump<span class="token punctuation">(</span>post<span class="token punctuation">.</span>raw_meta<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token delimiter punctuation">}}</span></span></code></pre><p>This is only recommended for development purposes, because it might affect your performance if you always request all values.</p><p>The <code>meta()</code> and <code>raw_meta()</code> methods work the same way for all <code>Timber\Post</code>, <code>Timber\Term</code>, <code>Timber\User</code> and <code>Timber\Comment</code> objects. You can read more about this in the <a href="https://timber.github.io/docs/v2/guides/custom-fields">Custom Fields Guide</a> as well as the <a href="https://timber.github.io/docs/v2/integrations/advanced-custom-fields">ACF Integrations Guide</a>.</p><h2 id="new-classes" tabindex="-1">New classes <a class="directLink" href="#new-classes">#</a></h2><h3 id="new-attachment-class" tabindex="-1">New Attachment class <a class="directLink" href="#new-attachment-class">#</a></h3><p>Up until now, there was only a representation for WordPress image attachments in Timber. With version 2.0, we introduce a new <code>Timber\Attachment</code> class that represents WordPress attachments â€“ including the ones that might not necessarily be images, like PDF files.</p><ul><li>The <code>Timber\Image</code> class now extends the <code>Timber\Attachment</code> class. All your code should already be compatible with this change. But in the future, you could use the new <code>Timber\Attachment</code> class if you work with an attachment that is not an image.</li><li>Weâ€™ve added new methods for <code>Timber\Attachment</code>. See the <a href="https://timber.github.io/docs/v2/upgrade-guides/2.0/#new-functions">section below</a>.</li><li>To get attachments from attachment IDs in Twig, you can use <code>{{ get_attachment(attachment_id) }}</code>. Behind the curtains, Timber uses <a href="https://timber.github.io/docs/v2/guides/class-maps">Class Maps</a> to use the <a href="https://timber.github.io/docs/v2/reference/timber-image/"><code>Timber\Image</code></a> and <a href="https://timber.github.io/docs/v2/reference/timber-attachment/"><code>Timber\Attachment</code></a> classes for attachment posts.</li></ul><h3 id="new-externalimage-class" tabindex="-1">New ExternalImage class <a class="directLink" href="#new-externalimage-class">#</a></h3><p>With Timber 2.0, we differentiate between images that are WordPress attachments and &quot;external&quot; images that are loaded from a different location in your WordPress installation, for example from your theme folder.</p><p>Previously, when you used <code>{{ Image(url).src }}</code> in Twig, you could also provide a path or URL to an external image. Now, you should use <code>{{ get_external_image(url).src }}</code>.</p><p>With the new <code>Timber::get_external_image()</code> function, you can load an external image in PHP.</p><h3 id="new-pagesmenu-class" tabindex="-1">New PagesMenu class <a class="directLink" href="#new-pagesmenu-class">#</a></h3><p>To handle cases where you wanted to build a menu from your existing pages separately, we added a <code>Timber\PagesMenu</code> class that will be used when you use the new <code>Timber::get_pages_menu()</code> function.</p><h2 id="deprecated-functions-and-variables" tabindex="-1">Deprecated functions and variables <a class="directLink" href="#deprecated-functions-and-variables">#</a></h2><p>The following functions are being deprecated and will be removed in a future version of Timber.</p><h3 id="timber\timber-1" tabindex="-1">Timber\Timber <a class="directLink" href="#timber\timber-1">#</a></h3><ul><li><code>get_context()</code> - use <code>context()</code> instead.</li><li><code>Timber::$autoescape</code> â€“ use the <code>timber/twig/environment/options</code> filter instead.</li><li><code>Timber::$twig_cache</code> â€“ use the <code>timber/twig/environment/options</code> filter instead.</li><li><code>Timber::$cache</code> â€“ use the <code>timber/twig/environment/options</code> filter instead.</li></ul><h3 id="timber\post" tabindex="-1">Timber\Post <a class="directLink" href="#timber\post">#</a></h3><ul><li><code>get_preview()</code> - use <code>excerpt()</code> instead.</li><li><code>get_field()</code> - use <code>meta()</code> instead.</li><li><code>import_field()</code> - use <code>meta()</code> instead.</li><li><code>preview()</code> - use <code>excerpt()</code> instead.</li><li><code>update()</code> - use WordPress coreâ€™s <code>update_post_meta()</code> instead.</li></ul><h3 id="timber\postquery" tabindex="-1">Timber\PostQuery <a class="directLink" href="#timber\postquery">#</a></h3><ul><li><code>get_query()</code>, use <code>query()</code> instead.</li></ul><h3 id="timber\image-and-timber\attachment" tabindex="-1">Timber\Image and Timber\Attachment <a class="directLink" href="#timber\image-and-timber\attachment">#</a></h3><ul><li><code>get_pathinfo()</code> â€“ use <code>pathinfo()</code> instead.</li><li><code>get_dimensions()</code> â€“ use <code>width()</code> or <code>height()</code> instead.</li><li><code>get_dimensions_loaded()</code> â€“ use <code>width()</code> or <code>height()</code> instead.</li><li><code>get_dimension()</code> â€“ use <code>width()</code> or <code>height()</code> instead.</li><li><code>get_dimension_loaded()</code> â€“ use <code>width()</code> or <code>height()</code> instead.</li><li><code>get_post_custom()</code> â€“ use <code>meta()</code> instead.</li></ul><h3 id="timber\term" tabindex="-1">Timber\Term <a class="directLink" href="#timber\term">#</a></h3><ul><li><code>get_children()</code> â€“ use <code>children()</code> instead.</li><li><code>get_edit_url()</code> â€“ use <code>edit_link()</code> instead.</li><li><code>get_field()</code> â€“ use <code>meta()</code> instead.</li><li><code>get_meta_field()</code> â€“ use <code>meta()</code> instead.</li><li><code>get_posts()</code> â€“ use <code>posts()</code> instead.</li><li><code>update()</code> - use WordPress coreâ€™s <code>update_metadata()</code> instead.</li></ul><h3 id="timber\comment" tabindex="-1">Timber\Comment <a class="directLink" href="#timber\comment">#</a></h3><ul><li><code>get_field()</code> - use <code>{{ comment.meta('my_field_name') }}</code> instead</li><li><code>get_meta_field()</code> - use <code>{{ comment.meta('my_field_name') }}</code> instead</li><li><code>update()</code> - use WordPress coreâ€™s <code>update_metadata()</code> instead.</li></ul><h3 id="timber\menuitem" tabindex="-1">Timber\MenuItem <a class="directLink" href="#timber\menuitem">#</a></h3><ul><li><code>external()</code> â€“ use <code>{{ item.is_external }}</code> instead.</li><li><code>get_children()</code> â€“ use <code>{{ item.children }}</code> instead.</li><li><code>get_field()</code> â€“ use <code>{{ item.meta }}</code> instead.</li></ul><h3 id="timber\user" tabindex="-1">Timber\User <a class="directLink" href="#timber\user">#</a></h3><ul><li><code>get_field()</code> â€“ use <code>{{ user.meta('my_field_name') }}</code> instead.</li><li><code>get_meta()</code> â€“ use <code>{{ user.meta('my_field_name') }}</code> instead.</li><li><code>get_meta_field()</code> â€“ use <code>{{ user.meta('my_field_name') }}</code> instead.</li></ul><h3 id="timber\site" tabindex="-1">Timber\Site <a class="directLink" href="#timber\site">#</a></h3><ul><li><code>$pingback</code> property â€“ use <code>$pingback_url</code>.</li><li><code>meta()</code> â€“ use <code>option()</code> instead.</li><li><code>update()</code> â€“ use WordPress coreâ€™s <code>update_blog_option()</code> instead.</li><li><code>url()</code> â€“ use <code>link()</code> instead.</li></ul><h3 id="timber\archives" tabindex="-1">Timber\Archives <a class="directLink" href="#timber\archives">#</a></h3><ul><li><code>get_items()</code> â€“ use <code>items()</code> instead.</li></ul><h3 id="timber\twig" tabindex="-1">Timber\Twig <a class="directLink" href="#timber\twig">#</a></h3><ul><li><code>intl_date()</code>, use <code>Timber\DateTimeHelper::wp_date()</code> instead.</li><li><code>time_ago()</code>, use <code>DateTimeHelper::time_ago()</code> instead.</li></ul><h3 id="timber\loader" tabindex="-1">Timber\Loader <a class="directLink" href="#timber\loader">#</a></h3><ul><li><code>template_exists()</code> â€“ No longer used internally.</li></ul><h3 id="timber\locationmanager" tabindex="-1">Timber\LocationManager <a class="directLink" href="#timber\locationmanager">#</a></h3><ul><li><code>get_locations_user()</code> â€“ Use <code>add_filter( 'timber/locations', $locations )</code> instead</li></ul><h2 id="removed-functions-and-properties" tabindex="-1">Removed functions and properties <a class="directLink" href="#removed-functions-and-properties">#</a></h2><p>The following functions and properties were <strong>removed from the codebase</strong>, either because they were already deprecated or because theyâ€™re not used anymore.</p><h3 id="timber\timber-2" tabindex="-1">Timber\Timber <a class="directLink" href="#timber\timber-2">#</a></h3><ul><li><code>add_route()</code> - The routes feature was completely removed in 2.0.</li><li><code>get_pagination()</code> â€“ Use <code>{{ posts.pagination }}</code> instead. Follow the <a href="https://timber.github.io/docs/v2/guides/pagination/">Pagination Guide</a> for more information.</li></ul><h3 id="timber\site-1" tabindex="-1">Timber\Site <a class="directLink" href="#timber\site-1">#</a></h3><ul><li><code>get_link()</code>, use <code>{{ site.link }}</code> instead</li><li><code>get_url()</code>, use <code>{{ site.link }}</code> instead</li></ul><h3 id="timber\post-1" tabindex="-1">Timber\Post <a class="directLink" href="#timber\post-1">#</a></h3><ul><li><code>get_author()</code> â€“ use <code>{{ post.author }}</code> instead</li><li><code>get_categories()</code> â€“ use <code>{{ post.categories }}</code> instead</li><li><code>get_category()</code> â€“ use <code>{{ post.category }}</code> instead</li><li><code>get_children()</code> â€“ use <code>{{ post.children }}</code> instead</li><li><code>get_comment_count()</code> â€“ use <code>{{ post.comment_count }}</code> instead</li><li><code>get_comments()</code> â€“ use <code>{{ post.comments }}</code> instead</li><li><code>get_content()</code> â€“ use <code>{{ post.content }}</code> instead</li><li><code>get_edit_url()</code> â€“ use <code>link()</code> instead</li><li><code>get_format()</code> â€“ use <code>{{ post.format }}</code> instead</li><li><code>get_image()</code> â€“ use <code>{{ get_image(post.meta('my_image')) }}</code> or <code>{{ get_attachment(post.meta('my_file')) }}</code> instead</li><li><code>get_link()</code> â€“ use <code>{{ post.link }}</code> instead</li><li><code>get_modified_author()</code> â€“ use <code>{{ post.modified_author }}</code> instead</li><li><code>get_modified_date()</code> â€“ use <code>{{ post.modified_date }}</code> instead</li><li><code>get_modified_time()</code> â€“ use <code>{{ post.modified_time }}</code> instead</li><li><code>get_next()</code> â€“ use <code>{{ post.next }}</code> instead</li><li><code>get_pagination()</code> â€“ use <code>{{ post.pagination }}</code> instead</li><li><code>get_parent()</code> â€“ use <code>{{ post.parent }}</code> instead</li><li><code>get_path()</code> â€“ use <code>{{ post.path }}</code> instead</li><li><code>get_permalink()</code> â€“ use <code>{{ post.link }}</code> instead</li><li><code>get_post_id_by_name()</code></li><li><code>get_post_type()</code> â€“ use <code>{{ post.type() }}</code> instead</li><li><code>get_prev()</code> â€“ use <code>{{ post.prev }}</code> instead</li><li><code>get_tags()</code> â€“ use <code>{{ post.tags }}</code> instead</li><li><code>get_terms()</code> â€“ use <code>{{ post.term }}</code> instead</li><li><code>get_thumbnail()</code> â€“ use <code>{{ post.thumbnail }}</code> instead</li><li><code>get_title()</code> â€“ use <code>{{ post.title }}</code> instead</li><li><code>init()</code> â€“ no replacement.</li><li><code>permalink()</code> â€“ use <code>{{ post.link }}</code> instead</li><li><code>prepare_post_info()</code></li></ul><h3 id="timber\term-1" tabindex="-1">Timber\Term <a class="directLink" href="#timber\term-1">#</a></h3><ul><li><code>get_link()</code> â€“ use <code>{{ term.link }}</code> instead</li><li><code>get_path()</code> â€“ use <code>{{ term.path }}</code> instead</li><li><code>get_term_from_query()</code> - use <code>Timber::get_term()</code> instead</li></ul><h3 id="timber\image" tabindex="-1">Timber\Image <a class="directLink" href="#timber\image">#</a></h3><ul><li><code>init()</code> â€“ only relevant if youâ€™ve extended the <code>Timber\Image</code> class</li><li><code>determine_id()</code> â€“ only relevant if youâ€™ve extended the <code>Timber\Image</code> class</li><li><code>get_attachment_info()</code> â€“ use <code>get_info()</code> instead</li><li><code>get_src()</code> â€“ use <code>{{ image.src }}</code> instead</li><li><code>get_url()</code> â€“ use <code>{{ image.src }}</code> instead</li><li><code>url()</code> â€“ use <code>{{ image.src }}</code> instead</li><li><code>$caption</code> property â€“ use <code>caption()</code> method instead. You can still use <code>{{ image.caption }}</code> in Twig. In PHP <code>$image-&gt;caption</code> also still works because magic properties will automatically resolve to <code>$image-&gt;caption()</code>.</li><li><code>is_image()</code> â€“ without replacement. Timber now checks whether a post is an image if you use <code>Timber::get_post()</code> or <code>Timber::get_image()</code> and only returns a <code>Timber\Image</code> object for attachments that are images.</li></ul><h3 id="timber\menuitem-1" tabindex="-1">Timber\MenuItem <a class="directLink" href="#timber\menuitem-1">#</a></h3><ul><li><code>get_link()</code> â€“ use <code>{{ item.link }}</code> instead</li><li><code>get_path()</code> â€“ use <code>{{ item.path }}</code> instead</li><li><code>permalink()</code> â€“ use <code>{{ item.link }}</code> instead</li><li><code>type()</code> â€“ use the the <code>MenuItem::$type</code> property instead. In Twig, this is still the same: <code>{{ item.type }}</code>.</li></ul><h3 id="timber\comment-1" tabindex="-1">Timber\Comment <a class="directLink" href="#timber\comment-1">#</a></h3><ul><li><code>$PostClass</code> property â€“ use <a href="https://timber.github.io/docs/v2/guides/class-maps/">Class Maps</a> instead.</li></ul><h3 id="timber\commentthread" tabindex="-1">Timber\CommentThread <a class="directLink" href="#timber\commentthread">#</a></h3><ul><li><code>$CommentClass</code> property â€“ use <a href="https://timber.github.io/docs/v2/guides/class-maps/">Class Maps</a> instead.</li></ul><h3 id="timber\user-1" tabindex="-1">Timber\User <a class="directLink" href="#timber\user-1">#</a></h3><ul><li><code>$name</code> property â€“ use <code>name()</code> method instead. You can still use <code>{{ user.name }}</code> in Twig.</li><li><code>$first_name</code> property â€“ use <code>{{ user.meta('first_name') }}</code> instead.</li><li><code>$last_name</code> property â€“ use <code>{{ user.meta('last_name') }}</code> instead.</li><li><code>$description</code> property â€“ use <code>{{ user.meta('description') }}</code> instead.</li></ul><h3 id="timber\helper" tabindex="-1">Timber\Helper <a class="directLink" href="#timber\helper">#</a></h3><ul><li><code>function_wrapper()</code> â€“ use <code>{{ function( 'function_to_call' ) }}</code> instead</li><li><code>trim_words()</code> â€“ use <code>TextHelper::trim_words()</code> instead</li><li><code>close_tags()</code> â€“ use <code>TextHelper::close_tags()</code> instead</li><li><code>get_comment_form()</code> â€“ use <code>{{ function('comment_form') }}</code> instead</li><li><code>paginate_links()</code> â€“ use <code>Pagination::paginate_links()</code> instead</li><li><code>get_current_url()</code> â€“ use <code>Timber\URLHelper::get_current_url()</code> instead</li><li><code>filter_array()</code> â€“ use <code>array_filter()</code> or <code>Timber\Helper::wp_list_filter()</code> instead.</li></ul><h3 id="timber\texthelper" tabindex="-1">Timber\TextHelper <a class="directLink" href="#timber\texthelper">#</a></h3><ul><li><code>starts_with()</code> - use <code>str_starts_with()</code> instead.</li><li><code>ends_with()</code> - use <code>str_ends_with()</code> instead.</li></ul><h3 id="timber\integration\command" tabindex="-1">Timber\Integration\Command <a class="directLink" href="#timber\integration\command">#</a></h3><p>The whole <code>Timber\Integration\Command</code> class was removed. Its methods were moved over to the <code>Timber\Cache\Cleaner</code> class.</p><ul><li><code>clear_cache()</code>, use <code>Timber\Cache\Cleaner::clear_cache()</code> instead.</li><li><code>clear_cache_timber()</code>, use <code>Timber\Cache\Cleaner::clear_cache_timber()</code> instead.</li><li><code>clear_cache_twig()</code>, use <code>Timber\Cache\Cleaner::clear_cache_twig()</code> instead.</li></ul><h2 id="new-functions" tabindex="-1">New functions <a class="directLink" href="#new-functions">#</a></h2><p><strong>Timber\Timber</strong></p><ul><li><code>context_global()</code> - Gets the global context.</li><li><code>context_post()</code> - Gets post context for a singular template.</li><li><code>context_posts()</code> - Gets posts context for an archive template.</li><li><code>get_attachment()</code> â€“ Gets an attachment.</li><li><code>get_attachment_by()</code> â€“ Gets an attachment by its URL or absolute file path.</li><li><code>get_menu()</code> â€“ Gets a menu object for a specific menu.</li><li><code>get_image()</code> â€“ Gets an image that is a WordPress attachment.</li><li><code>get_external_image()</code> â€“ Gets an image that is not a WordPress attachment.</li><li><code>get_pages_menu()</code> â€“ Gets a menu object built from your existing pages.</li><li><code>get_post_by()</code> â€“ Gets a post by title or slug.</li><li><code>get_term_by()</code> â€“ Gets a post by title or slug.</li><li><code>get_user()</code> â€“ Gets a single user.</li><li><code>get_users()</code> â€“ Gets one or more users as an array.</li><li><code>get_user_by()</code> â€“ Gets a user by field.</li></ul><p><strong>Timber\Post</strong></p><ul><li><code>raw_meta()</code> â€“ Gets a post meta value directly from the database.</li><li><code>wp_object()</code> - Gets the underlying WordPress Core object.</li></ul><p><strong>Timber\Term</strong></p><ul><li><code>raw_meta()</code> â€“ Gets a term meta value directly from the database.</li><li><code>wp_object()</code> - Gets the underlying WordPress Core object.</li></ul><p><strong>Timber\User</strong></p><ul><li><code>raw_meta()</code> â€“ Gets a user meta value directly from the database.</li><li><code>wp_object()</code> - Gets the underlying WordPress Core object.</li><li><code>edit_link()</code> â€“ Gets the edit link for a user if the current user has the correct rights.</li></ul><p><strong>Timber\Comment</strong></p><ul><li><code>raw_meta()</code> â€“ Gets a comment meta value directly from the database.</li><li><code>wp_object()</code> - Gets the underlying WordPress Core object.</li><li><code>edit_link()</code> - Gets the edit link for a comment if the current user has the correct rights.</li></ul><p><strong>Timber\Menu</strong></p><ul><li><code>current_item()</code> â€“ Gets the current menu item. Read more about this in the <a href="">functionsâ€™s documentation</a> or the <a href="https://timber.github.io/docs/v2/guides/menus/#the-current-menu-item">Menu Guide</a>.</li><li><code>current_top_level_item()</code> â€“ Gets the top level parent of the current menu item.</li><li><code>wp_object()</code> - Gets the underlying WordPress Core object.</li></ul><p><strong>Timber\MenuItem</strong></p><ul><li><code>target()</code> â€“ Gets the target of a menu item according to the Â«Open in new tabÂ» option in the menu item options.</li><li><code>is_target_blank()</code> â€“ Checks whether the Â«Open in new tabÂ» option checked in the menu item options in the backend.</li><li><code>wp_object()</code> - Gets the underlying WordPress Core object.</li></ul><p><strong>Timber\Attachment</strong></p><ul><li><code>size()</code> - Gets the filesize of an attachment in bytes.</li><li><code>size_raw()</code> - Gets the filesize of an attachment in a human-readable format. E.g. <code>16 KB</code> instead of <code>16555 bytes</code>.</li><li><code>extension()</code> - Gets the extension of the attached file.</li></ul><p><strong>Timber\User</strong></p><ul><li><code>wp_object()</code> - Gets the underlying WordPress Core object.</li></ul><h2 id="new-and-updated-functions" tabindex="-1">New and updated functions <a class="directLink" href="#new-and-updated-functions">#</a></h2><p><strong>Timber\Timber</strong></p><ul><li><code>get_post_by()</code> â€“ Gets a post by post slug or post title.</li></ul><p><strong>Timber\Post</strong></p><ul><li><code>children()</code> â€“ We removed the <code>$child_post_class</code> parameter in this function. Use <a href="https://timber.github.io/docs/v2/guides/class-maps/">Class Maps</a> instead to control which class to instantiate child posts with.</li><li><code>comments()</code> â€“ We removed the <code>$CommentClass</code> parameter in this function. Use <a href="https://timber.github.io/docs/v2/guides/class-maps/">Class Maps</a> instead to control which class to instantiate child posts with.</li></ul><p><strong>Timber\Cache\Cleaner</strong></p><ul><li><code>clear_cache()</code> - We remove the possibility to pass an array to that function. Now, only strings are accepted.</li></ul><h3 id="timber\postterms" tabindex="-1">Timber\Post::terms() <a class="directLink" href="#timber\postterms">#</a></h3><p>The <code>Timber\Term::terms()</code> function already supported using an array of query arguments. But to make it more consistent with how other functions are used in Timber, we changed the signature to use two parameters: <code>$query_args</code> and <code>$options</code>.</p><p><strong>Function Signature</strong></p><pre class="language-php"><code class="language-php"><span class="token comment">// ðŸš« Before</span><br><span class="token keyword">function</span> <span class="token function-definition function">terms</span><span class="token punctuation">(</span><span class="token variable">$args</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token variable">$merge</span> <span class="token operator">=</span> <span class="token constant boolean">true</span><span class="token punctuation">,</span> <span class="token variable">$term_class</span> <span class="token operator">=</span> <span class="token string single-quoted-string">''</span><span class="token punctuation">)</span><br><span class="token punctuation">{</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token comment">// âœ… Now</span><br><span class="token keyword">function</span> <span class="token function-definition function">terms</span><span class="token punctuation">(</span><span class="token variable">$query_args</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token variable">$options</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br><span class="token punctuation">{</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p><strong>PHP</strong></p><pre class="language-php"><code class="language-php"><span class="token comment">// ðŸš« Before</span><br><span class="token variable">$terms</span> <span class="token operator">=</span> <span class="token variable">$post</span><span class="token operator">-></span><span class="token function">terms</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'category'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// âœ… Now</span><br><span class="token variable">$terms</span> <span class="token operator">=</span> <span class="token variable">$post</span><span class="token operator">-></span><span class="token function">terms</span><span class="token punctuation">(</span><span class="token punctuation">[</span><br>    <span class="token string single-quoted-string">'taxonomy'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'category'</span><span class="token punctuation">,</span><br><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>or</p><pre class="language-php"><code class="language-php"><span class="token comment">// ðŸš« Before</span><br><span class="token variable">$terms</span> <span class="token operator">=</span> <span class="token variable">$post</span><span class="token operator">-></span><span class="token function">terms</span><span class="token punctuation">(</span><span class="token punctuation">[</span><br>    <span class="token string single-quoted-string">'query'</span> <span class="token operator">=></span> <span class="token punctuation">[</span><br>        <span class="token string single-quoted-string">'taxonomy'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'custom_tax'</span><span class="token punctuation">,</span><br>        <span class="token string single-quoted-string">'orderby'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'count'</span><span class="token punctuation">,</span><br>    <span class="token punctuation">]</span><span class="token punctuation">,</span><br>    <span class="token string single-quoted-string">'merge'</span> <span class="token operator">=></span> <span class="token constant boolean">false</span><span class="token punctuation">,</span><br><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// âœ… Now</span><br><span class="token variable">$terms</span> <span class="token operator">=</span> <span class="token variable">$post</span><span class="token operator">-></span><span class="token function">terms</span><span class="token punctuation">(</span><span class="token punctuation">[</span><br>    <span class="token string single-quoted-string">'taxonomy'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'custom_tax'</span><span class="token punctuation">,</span><br>    <span class="token string single-quoted-string">'orderby'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'count'</span><span class="token punctuation">,</span><br><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><br>    <span class="token string single-quoted-string">'merge'</span> <span class="token operator">=></span> <span class="token constant boolean">false</span><span class="token punctuation">,</span><br><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>Twig</strong></p><pre class="language-twig"><code class="language-twig"><span class="token twig language-twig"><span class="token comment">{# ðŸš« Before #}</span></span><br><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">for</span> term <span class="token operator">in</span> post<span class="token punctuation">.</span>terms<span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>category<span class="token punctuation">'</span></span><span class="token punctuation">)</span> <span class="token delimiter punctuation">%}</span></span><br><br><span class="token twig language-twig"><span class="token comment">{# âœ… Now #}</span></span><br><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">for</span> term <span class="token operator">in</span> post<span class="token punctuation">.</span>terms<span class="token punctuation">(</span><span class="token punctuation">{</span> taxonomy<span class="token punctuation">:</span> <span class="token string"><span class="token punctuation">'</span>category<span class="token punctuation">'</span></span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token delimiter punctuation">%}</span></span><br><br><span class="token twig language-twig"><span class="token comment">{# or #}</span></span><br><br><span class="token twig language-twig"><span class="token comment">{# âœ… Now #}</span></span><br>{% for term in post.terms({<br>    query: {<br>        taxonomy: 'custom_tax',<br>        orderby: 'count'<br>    },<br>    merge: false<br>})}</code></pre><h3 id="timber\postget_info" tabindex="-1">Timber\Post::get_info() <a class="directLink" href="#timber\postget_info">#</a></h3><p>We changed the function signature for the <code>get_info()</code> function. This function is responsible for the properties that are imported in the <code>Timber\Post</code> object from a <code>WP_Post</code> object.</p><p>This change is only relevant if you extend the <code>Timber\Post</code> class and add a custom <code>get_info()</code> method.</p><p>Before, the function got a post ID as a parameter and returned a <code>WP_Post</code> object. Now, the function gets an array of post data and returns an updated array with data that will then be imported.</p><p><strong>Before</strong></p><pre class="language-php"><code class="language-php"><span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function-definition function">get_info</span><span class="token punctuation">(</span><span class="token variable">$post_id</span><span class="token punctuation">)</span><br><span class="token punctuation">{</span><br><br><span class="token punctuation">}</span></code></pre><p><strong>Now</strong></p><pre class="language-php"><code class="language-php"><span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function-definition function">get_info</span><span class="token punctuation">(</span><span class="token keyword type-hint">array</span> <span class="token variable">$data</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword return-type">array</span><br><span class="token punctuation">{</span><br>    <span class="token comment">// Access the original post through $this->wp_object.</span><br><br>    <span class="token keyword">return</span> <span class="token variable">$data</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><h3 id="timber\termposts" tabindex="-1">Timber\Term::posts() <a class="directLink" href="#timber\termposts">#</a></h3><p>We changed the function parameters for the <code>Timber\Term::posts()</code> function to better support different use cases. Basically, youâ€™ll use the same query parameters that you already know from <code>WP_Query</code>.</p><p><strong>Function Signature</strong></p><pre class="language-php"><code class="language-php"><span class="token comment">// ðŸš« Before</span><br><span class="token keyword">function</span> <span class="token function-definition function">posts</span><span class="token punctuation">(</span><span class="token variable">$numberposts_or_args</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token variable">$post_type_or_class</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'any'</span><span class="token punctuation">,</span> <span class="token variable">$post_class</span> <span class="token operator">=</span> <span class="token string single-quoted-string">''</span><span class="token punctuation">)</span><br><span class="token punctuation">{</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token comment">// âœ… Now</span><br><span class="token keyword">function</span> <span class="token function-definition function">posts</span><span class="token punctuation">(</span><span class="token variable">$query_args</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br><span class="token punctuation">{</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p><strong>ðŸš« Old usage</strong></p><p>In PHP:</p><pre class="language-php"><code class="language-php"><span class="token variable">$genre</span><span class="token operator">-></span><span class="token function">posts</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'book'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>And in Twig:</p><pre class="language-twig"><code class="language-twig"><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">for</span> book <span class="token operator">in</span> genre<span class="token punctuation">.</span>posts<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> 'book<span class="token punctuation">)</span> <span class="token delimiter punctuation">%}</span></span></code></pre><p><strong>âœ… New usage</strong></p><p>In PHP:</p><pre class="language-php"><code class="language-php"><span class="token variable">$genre</span><span class="token operator">-></span><span class="token function">posts</span><span class="token punctuation">(</span><span class="token punctuation">[</span><br>    <span class="token string single-quoted-string">'post_type'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'book'</span><span class="token punctuation">,</span><br>    <span class="token string single-quoted-string">'post_per_page'</span> <span class="token operator">=></span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><br>    <span class="token string single-quoted-string">'orderby'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'menu_order'</span><span class="token punctuation">,</span><br><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>And in Twig:</p><pre class="language-twig"><code class="language-twig"><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">for</span> book <span class="token operator">in</span> genre<span class="token punctuation">.</span>posts<span class="token punctuation">(</span><span class="token punctuation">{</span><br>    post_type<span class="token punctuation">:</span> <span class="token string"><span class="token punctuation">'</span>book<span class="token punctuation">'</span></span><span class="token punctuation">,</span><br>    posts_per_page<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><br>    orderby<span class="token punctuation">:</span> <span class="token string"><span class="token punctuation">'</span>menu_order<span class="token punctuation">'</span></span><br><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token delimiter punctuation">%}</span></span></code></pre><p>You can still also pass an integer as the sole argument, to tell it how many posts you want.</p><pre class="language-php"><code class="language-php"><span class="token variable">$genre</span><span class="token operator">-></span><span class="token function">posts</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>This is equivalent to:</p><pre class="language-php"><code class="language-php"><span class="token variable">$genre</span><span class="token operator">-></span><span class="token function">posts</span><span class="token punctuation">(</span><span class="token punctuation">[</span><br>    <span class="token string single-quoted-string">'posts_per_page'</span> <span class="token operator">=></span> <span class="token number">3</span><span class="token punctuation">,</span><br>    <span class="token string single-quoted-string">'post_type'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'any'</span><span class="token punctuation">,</span><br><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="post-excerpts" tabindex="-1">Post Excerpts <a class="directLink" href="#post-excerpts">#</a></h2><h3 id="excerpt-instead-of-preview" tabindex="-1">Excerpt instead of Preview <a class="directLink" href="#excerpt-instead-of-preview">#</a></h3><p>We renamed the <code>Timber\PostPreview</code> class to <code>Timber\PostExcerpt</code> and also changed all instances of the term &quot;preview&quot; to &quot;excerpt&quot;. The reason for this change is that the term &quot;preview&quot; in WordPress is mainly used for previewing a post before you save changes in the admin. For the short texts that are used in post teasers, the term &quot;excerpt&quot; is used. We wanted to follow the WordPress terminology here.</p><p>For this, weâ€¦</p><ul><li>Renamed the <code>Timber\PostPreview</code> class to <code>Timber\PostExcerpt</code>.</li><li>Added a <code>Timber\Post::excerpt()</code> function that you should use instead of <code>Timber\Post::preview()</code>.</li><li>Changed filter names.</li></ul><h3 id="read-more-links-and-end-strings-will-not-always-be-added" tabindex="-1">Read more links and end strings will not always be added <a class="directLink" href="#read-more-links-and-end-strings-will-not-always-be-added">#</a></h3><p>We updated the logic for when read more links and end strings (<code>â€¦</code> by default) will be added. For example, if the excerpt is generated from the postâ€™s content, but the postâ€™s content isnâ€™t longer than the excerpt, then no read more link and no end string will be added.</p><p>You can control this behavior with these two new parameters for excerpts:</p><ul><li><code>always_add_read_more</code> â€“ Controls whether a read more link should be added even if the excerpt isnâ€™t trimmed (when the excerpt isnâ€™t shorter than the postâ€™s content). The default is <code>false</code>.</li><li><code>always_add_end</code> â€“ Whether the end string should be added even if the excerpt isnâ€™t trimmed. The default is <code>false</code>.</li></ul><h3 id="filter-the-defaults" tabindex="-1">Filter the defaults <a class="directLink" href="#filter-the-defaults">#</a></h3><p>Thereâ€™s a new <code>timber/post/excerpt/defaults</code> filter that can be used to update default options for excerpts, including <code>always_add_read_more</code> and <code>always_add_end</code>.</p><pre class="language-php"><code class="language-php"><span class="token function">add_filter</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'timber/post/excerpt/defaults'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$defaults</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// Only add a read more link if the post content isnâ€™t longer than the excerpt.</span><br>    <span class="token variable">$defaults</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'always_add_read_more'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant boolean">false</span><span class="token punctuation">;</span><br><br>    <span class="token comment">// Set a default character limit.</span><br>    <span class="token variable">$defaults</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'words'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">240</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">return</span> <span class="token variable">$defaults</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="post.excerpt-takes-arguments-in-array/hash-notation" tabindex="-1"><code>post.excerpt</code> takes arguments in array/hash notation <a class="directLink" href="#post.excerpt-takes-arguments-in-array/hash-notation">#</a></h3><p>The <code>{{ post.excerpt }}</code> function was added as a replacement for <code>{{ post.preview }}</code>. When using <code>{{ post.preview }}</code>, you could pass in arguments by chaining them. Itâ€™s now possible to pass in arguments as an array in PHP or in hash style in Twig. This finally cleans up how the previews of posts are handled. Hereâ€™s an example:</p><p><strong>PHP</strong></p><pre class="language-php"><code class="language-php"><span class="token variable">$post</span><span class="token operator">-></span><span class="token function">excerpt</span><span class="token punctuation">(</span><span class="token punctuation">[</span><br>    <span class="token string single-quoted-string">'words'</span> <span class="token operator">=></span> <span class="token number">50</span><span class="token punctuation">,</span><br>    <span class="token string single-quoted-string">'chars'</span> <span class="token operator">=></span> <span class="token constant boolean">false</span><span class="token punctuation">,</span><br>    <span class="token string single-quoted-string">'end'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'&amp;hellip;'</span><span class="token punctuation">,</span><br>    <span class="token string single-quoted-string">'force'</span> <span class="token operator">=></span> <span class="token constant boolean">false</span><span class="token punctuation">,</span><br>    <span class="token string single-quoted-string">'strip'</span> <span class="token operator">=></span> <span class="token constant boolean">true</span><span class="token punctuation">,</span><br>    <span class="token string single-quoted-string">'read_more'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'Read More'</span><span class="token punctuation">,</span><br><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>Twig</strong></p><pre class="language-twig"><code class="language-twig"><span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> post<span class="token punctuation">.</span>excerpt<span class="token punctuation">(</span><span class="token punctuation">{</span><br>    words<span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">,</span><br>    chars<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br>    end<span class="token punctuation">:</span> <span class="token string"><span class="token punctuation">"</span>&amp;hellip;<span class="token punctuation">"</span></span><span class="token punctuation">,</span><br>    force<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br>    strip<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>    read_more<span class="token punctuation">:</span> <span class="token string"><span class="token punctuation">"</span>Read More<span class="token punctuation">"</span></span><br><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token delimiter punctuation">}}</span></span></code></pre><h2 id="hooks" tabindex="-1">Hooks <a class="directLink" href="#hooks">#</a></h2><p>In version 1.0, we already introduced some filters and actions that were namespaced with a <code>timber/</code> prefix. In version 2.0, we refactored all filters to have the same naming standard. If you still use an old action or filter, you will see a warning with the name of the new hook. See the Hooks section in the documentation that lists all the current hooks. There, youâ€™ll also see which hooks are deprecated.</p><h3 id="deprecated-hooks" tabindex="-1">Deprecated hooks <a class="directLink" href="#deprecated-hooks">#</a></h3><p>You should update the following hooks because they will be removed in a future version of Timber. We use <a href="https://developer.wordpress.org/reference/functions/apply_filters_deprecated/"><code>apply_filters_deprecated()</code></a>, so you should get a proper warning when <code>WP_DEBUG</code> is set to <code>true</code>.</p><p><strong>Timber\Timber</strong></p><ul><li><code>timber_render_file</code>, use <code>timber/render/file</code> instead</li><li><code>timber_render_data</code>, use <code>timber/render/data</code> instead</li><li><code>timber_compile_file</code>, use <code>timber/compile/file</code> instead</li><li><code>timber_compile_data</code>, use <code>timber/compile/data</code> instead</li><li><code>timber_compile_done</code>, use <code>timber/compile/done</code> instead</li></ul><p><strong>Timber\Post</strong></p><ul><li><code>timber_post_get_meta_field_pre</code>, use <code>timber/post/pre_meta</code> instead</li><li><code>timber_post_get_meta_pre</code>, use <code>timber/post/pre_get</code> instead</li><li><code>timber_post_get_meta_field</code>, use <code>timber/post/meta</code> instead</li><li><code>timber_post_get_meta</code>, use <code>timber/post/meta</code> instead</li><li><code>Timber\PostClassMap</code>, use <code>timber/post/classmap</code> instead</li></ul><p><strong>Timber\PostGetter</strong></p><ul><li><code>Timber\PostClassMap</code>, use <code>timber/post/classmap</code></li></ul><p><strong>Timber\PostPreview</strong></p><ul><li><code>timber/post/preview/read_more_class</code>, use <code>timber/post/excerpt/read_more_class</code> instead</li><li><code>timber/post/get_preview/read_more_link</code>, use <code>timber/post/excerpt/read_more_link</code> instead</li></ul><p><strong>Timber\Term</strong></p><ul><li><code>timber/term/meta/field</code>, use <code>timber/term/meta</code> instead</li><li><code>timber_term_get_meta_field</code>, use <code>timber/term/meta</code> instead</li><li><code>timber_term_get_meta</code>, use <code>timber/term/meta</code> instead</li></ul><p><strong>Timber\Comment</strong></p><ul><li><code>timber_comment_get_meta_field_pre</code>, use <code>timber/comment/pre_meta</code> instead</li><li><code>timber_comment_get_meta_pre</code>, use <code>timber/comment/pre_meta</code> instead</li><li><code>timber_comment_get_meta_field</code>, use <code>timber/comment/meta</code> instead</li><li><code>timber_comment_get_meta</code>, use <code>timber/comment/meta</code> instead</li></ul><p><strong>Timber\User</strong></p><ul><li><code>timber_user_get_meta_field_pre</code>, use <code>timber/user/pre_meta</code> instead</li><li><code>timber_user_get_meta_pre</code>, use <code>timber/user/pre_meta</code> instead</li><li><code>timber_user_get_meta_field</code>, use <code>timber/user/meta</code> instead</li><li><code>timber_user_get_meta</code>, use <code>timber/user/meta</code> instead</li></ul><p><strong>Timber\Site</strong></p><ul><li><code>timber_site_set_meta</code>, use <code>timber/site/update_option</code> instead</li></ul><p><strong>Timber\Loader</strong></p><ul><li><code>timber/cache/location</code>, use an absolute path in the <code>cache</code> option in the <code>timber/twig/environment/options</code> filter instead.</li><li><code>timber/loader/paths</code>, use <code>timber/locations</code> instead</li></ul><p><strong>Timber\URLHelper</strong></p><p>The following filter names have changed to match the WordPress naming convention for hooks, which says that hooks should be all lowercase:</p><ul><li><code>timber/URLHelper/url_to_file_system/path</code>, use <code>timber/url_helper/url_to_file_system/path</code> instead</li><li><code>timber/URLHelper/file_system_to_url</code>, use <code>timber/url_helper/file_system_to_url</code> instead</li><li><code>timber/URLHelper/get_content_subdir/home_url</code>, use <code>timber/url_helper/get_content_subdir/home_url</code> instead</li></ul><h3 id="deprecated-without-replacement" tabindex="-1">Deprecated without replacement <a class="directLink" href="#deprecated-without-replacement">#</a></h3><p>The following filters were deprecated without a replacement and will be removed in the next major version:</p><ul><li>The filters <code>timber_term_set_meta</code> and <code>timber/term/meta/set</code> were deprecated. They were used by <code>Term::update()</code>, which is now deprecated as well (without a replacement).</li></ul><h3 id="timber/term/meta" tabindex="-1">timber/term/meta <a class="directLink" href="#timber/term/meta">#</a></h3><p>If youâ€™ve used <code>timber/term/meta</code> before, you might have to switch to <code>timer/term/get_meta_fields</code>. The <code>timber/term/meta</code> filter was introduced in 2.0 to be used instead of <code>timber/term/meta/field</code> and <code>timber_term_get_meta_field</code>. However, a filter <code>timber/term/meta</code> already existed in <code>Term::get_meta_values()</code> for version 1.0 and was renamed to <code>timber/term/get_meta_fields</code> to match the new naming conventions.</p><h3 id="removed-hooks" tabindex="-1">Removed hooks <a class="directLink" href="#removed-hooks">#</a></h3><p>The following filters were <strong>removed</strong> without a replacement:</p><ul><li><code>Timber\PostClassMap</code> â€“ use the <a href="https://timber.github.io/docs/v2/guides/class-maps/#the-post-class-map">Post Class Map</a> instead.</li><li><code>timber/get_posts/mirror_wp_get_posts</code> â€“ This filter was used so that <code>Timber::get_posts()</code> mimicks the behavior of WordPressâ€™s <code>get_posts()</code> function. We removed it because <code>Timber::get_posts()</code> is the new official API. If you want the same behavior, there are <a href="https://timber.github.io/docs/v2/guides/posts#differences-from-wp-cores-get_posts">arguments that you can pass to this function</a>.</li><li><code>timber_post_getter_get_posts</code> â€“ Remove because the <code>PostGetter</code> class doesnâ€™t exist anymore.</li></ul><h3 id="new-hooks" tabindex="-1">New hooks <a class="directLink" href="#new-hooks">#</a></h3><p>We added new hooks that let you filter things you couldnâ€™t filter before:</p><ul><li><code>timber/term/classmap</code></li><li><code>timber/menu/classmap</code></li><li><code>timber/menuitem/class</code></li><li><code>timber/pages_menu/class</code></li><li><code>timber/user/class</code></li><li><code>timber/comment/classmap</code></li><li><code>timber/twig/environment/options</code></li></ul><h2 id="sideloaded/external-images" tabindex="-1">Sideloaded/external images <a class="directLink" href="#sideloaded/external-images">#</a></h2><p>We changed the folder for images that are loaded from external URLs through <code>Timber\ImageHelper::sideload_image()</code> or when you use the <code>|resize</code> filter.</p><p>They will now be loaded to a folder named <strong>external</strong> in your uploads folder. We added this change because when you use a year-month-based folder structure, sideloaded images would be downloaded again each month.</p><p>You can control this behavior using the <a href="https://timber.github.io/docs/v2/hooks/filters/#timber/sideload_image/subdir"><code>timber/sideload_image/subdir</code></a> filter.</p><p>We also integrated sideloading images in the new <code>Timber::get_external_image()</code> function. If you provide it with an external image, it will sideload the image and return a <code>Timber\ExternalImage</code> object to easily work with it.</p><h2 id="escaping" tabindex="-1">Escaping <a class="directLink" href="#escaping">#</a></h2><p>While Twig has escaping enabled by default, Timber doesnâ€™t automatically enable espacing for Twig. To enable autoescaping in Timber 1.x, you would use <code>Timber::$autoescape = true</code>. The value <code>true</code> was deprecated for Twig 2.0, you now have to use <code>html</code> or <a href="https://twig.symfony.com/doc/2.x/api.html#environment-options">another auto-escaping strategy</a> instead. Youâ€™ll need to use the <code>timber/twig/environment/options</code> filter:</p><pre class="language-php"><code class="language-php"><span class="token function">add_filter</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'timber/twig/environment/options'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token variable">$options</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'autoescape'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'html'</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">return</span> <span class="token variable">$options</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Read more about this in the <a href="https://timber.github.io/docs/v2/guides/escaping/">Escaping Guide</a>.</p><h2 id="urlhelper" tabindex="-1">URLHelper <a class="directLink" href="#urlhelper">#</a></h2><p>The <code>URLHelper::get_params()</code> method now returns <code>false</code> if passed an index that does not exist, whereas before it returned <code>null</code> in that case. This is for better consistency with other core API methods and only affects code using <code>===</code> or equivalent checks on return values from this method.</p><h2 id="integrations" tabindex="-1">Integrations <a class="directLink" href="#integrations">#</a></h2><p>Thereâ€™s a new way how integrations are initialized internally. Timber uses a new <code>timber/integrations</code> filter to get all integrations it should init. Each integration uses an interface with a <code>should_init()</code> and an <code>init()</code> method that Timber can use to check whether an integration should be initialized before it actually initializes an integration.</p><p>With that filter and the interface, itâ€™s easier to add your own integrations and remove or replace existing Timber integrations. Read all about it in the new <a href="https://timber.github.io/docs/v2/guides/custom-integrations/">Custom Integrations Guide</a>.</p><h2 id="wp-cli" tabindex="-1">WP-CLI <a class="directLink" href="#wp-cli">#</a></h2><p>Timber already had an integration for WP-CLI in version 1, but only few people knew about it. It is now documented in the <a href="https://timber.github.io/docs/v2/guides/wp-cli/">WP CLI Guide</a>.</p><p>We updated the WP-CLI commands for Timber:</p><p><strong>ðŸš« Before</strong></p><pre class="language-bash"><code class="language-bash">wp timber clear_cache<br>wp timber clear_cache_timber<br>wp timber clear_cache_twig</code></pre><p><strong>âœ… After</strong></p><pre class="language-bash"><code class="language-bash">wp timber clear-cache<br>wp timber clear-cache timber<br>wp timber clear-cache twig</code></pre><h2 id="documentation" tabindex="-1">Documentation <a class="directLink" href="#documentation">#</a></h2><p>We added a couple of new guides that you may want to read through in addition to this Upgrade Guide:</p><ul><li><a href="https://timber.github.io/docs/v2/guides/posts/">Posts Guide</a></li><li><a href="https://timber.github.io/docs/v2/guides/terms/">Terms Guide</a></li><li><a href="https://timber.github.io/docs/v2/guides/users/">Users Guide</a></li><li><a href="https://timber.github.io/docs/v2/guides/class-maps/">Class Maps Guide</a></li><li><a href="https://timber.github.io/docs/v2/guides/context/">Context Guide</a></li><li><a href="https://timber.github.io/docs/v2/guides/custom-fields/">Custom Fields Guide</a>, which is now decoupled from the <a href="https://timber.github.io/docs/v2/integrations/advanced-custom-fields/">ACF Integrations Guide</a>.</li><li><a href="https://timber.github.io/docs/v2/guides/custom-integrations/">Custom Integrations Guide</a></li><li><a href="https://timber.github.io/docs/v2/guides/wp-cli/">WP CLI Guide</a></li></ul></div></article></main></div><script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script><script>docsearch({
    appId: '7REN4GR6X4',
    apiKey: '9acbf22ef9a9b117a0f9ba50bd2f4280',
    /**
     * Timber config.
     *
     * @link https://github.com/algolia/docsearch-configs/blob/master/configs/timber.json
     */
    indexName: 'timber',
    container: '#docsearch',
    /**
     * Filter for different doc versions.
     *
     * @link https://www.algolia.com/doc/api-reference/api-parameters/facetFilters/
     */
    searchParameters: {
      facetFilters: ['version:v2']
    },
    // Set debug to true if you want to inspect the dropdown.
    // debug: true
  })</script></body></html>